{"version":3,"file":"index-BOIk6e8a.js","sources":["../../../node_modules/@emotion-icons/material-outlined/Mic/Mic.esm.js","../../../node_modules/@emotion-icons/material-rounded/Pause/Pause.esm.js","../../../node_modules/@emotion-icons/material-rounded/PlayArrow/PlayArrow.esm.js","../../../node_modules/@emotion-icons/material-rounded/Refresh/Refresh.esm.js","../../../node_modules/@emotion-icons/material-rounded/StopCircle/StopCircle.esm.js","../../../node_modules/wavesurfer.js/dist/wavesurfer.esm.js","../../../node_modules/wavesurfer.js/dist/plugins/record.js","../../../streamlit/frontend/lib/src/hooks/useDownloadUrl.ts","../../../streamlit/frontend/lib/src/hooks/useWidgetManagerElementState.tsx","../../../streamlit/frontend/lib/src/util/uploadFiles.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/styled-components.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInputActionButtons.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInputErrorState.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/constants.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/convertAudioToWav.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/formatTime.ts","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/NoMicPermissions.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/Placeholder.tsx","../../../streamlit/frontend/lib/src/components/widgets/AudioInput/AudioInput.tsx"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Mic = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"\n  }));\n});\nMic.displayName = 'Mic';\nexport var MicDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Pause = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24,\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z\"\n  }));\n});\nPause.displayName = 'Pause';\nexport var PauseDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var PlayArrow = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24,\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 000-1.69L9.54 5.98A.998.998 0 008 6.82z\"\n  }));\n});\nPlayArrow.displayName = 'PlayArrow';\nexport var PlayArrowDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var Refresh = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.65 6.35a7.95 7.95 0 00-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 007.21-4.56c.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53a5.994 5.994 0 01-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0112 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z\"\n  }));\n});\nRefresh.displayName = 'Refresh';\nexport var RefreshDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var StopCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"none\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: 24,\n    height: 24\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9 16h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1zm3-14C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\"\n  }));\n});\nStopCircle.displayName = 'StopCircle';\nexport var StopCircleDimensions = {\n  height: 24,\n  width: 24\n};","function t(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{h(s.next(t))}catch(t){r(t)}}function a(t){try{h(s.throw(t))}catch(t){r(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((s=s.apply(t,e||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class e{constructor(){this.listeners={}}on(t,e,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(e),null==i?void 0:i.once){const i=()=>{this.un(t,i),this.un(t,e)};return this.on(t,i),i}return()=>this.un(t,e)}un(t,e){var i;null===(i=this.listeners[t])||void 0===i||i.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}}const i={decode:function(e,i){return t(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:i});return t.decodeAudioData(e).finally((()=>t.close()))}))},createBuffer:function(t,e){return\"number\"==typeof t[0]&&(t=[t]),function(t){const e=t[0];if(e.some((t=>t>1||t<-1))){const i=e.length;let s=0;for(let t=0;t<i;t++){const i=Math.abs(e[t]);i>s&&(s=i)}for(const e of t)for(let t=0;t<i;t++)e[t]/=s}}(t),{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:e=>null==t?void 0:t[e],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function s(t,e){const i=e.xmlns?document.createElementNS(e.xmlns,t):document.createElement(t);for(const[t,n]of Object.entries(e))if(\"children\"===t&&n)for(const[t,e]of Object.entries(n))e instanceof Node?i.appendChild(e):\"string\"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(s(t,e));else\"style\"===t?Object.assign(i.style,n):\"textContent\"===t?i.textContent=n:i.setAttribute(t,n.toString());return i}function n(t,e,i){const n=s(t,e||{});return null==i||i.appendChild(n),n}var r=Object.freeze({__proto__:null,createElement:n,default:n});const o={fetchBlob:function(e,i,s){return t(this,void 0,void 0,(function*(){const n=yield fetch(e,s);if(n.status>=400)throw new Error(`Failed to fetch ${e}: ${n.status} (${n.statusText})`);return function(e,i){t(this,void 0,void 0,(function*(){if(!e.body||!e.headers)return;const s=e.body.getReader(),n=Number(e.headers.get(\"Content-Length\"))||0;let r=0;const o=e=>t(this,void 0,void 0,(function*(){r+=(null==e?void 0:e.length)||0;const t=Math.round(r/n*100);i(t)})),a=()=>t(this,void 0,void 0,(function*(){let t;try{t=yield s.read()}catch(t){return}t.done||(o(t.value),yield a())}));a()}))}(n.clone(),i),n.blob()}))}};class a extends e{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement(\"audio\"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),null!=t.playbackRate&&this.onMediaEvent(\"canplay\",(()=>{null!=t.playbackRate&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}onMediaEvent(t,e,i){return this.media.addEventListener(t,e,i),()=>this.media.removeEventListener(t,e,i)}getSrc(){return this.media.currentSrc||this.media.src||\"\"}revokeSrc(){const t=this.getSrc();t.startsWith(\"blob:\")&&URL.revokeObjectURL(t)}canPlayType(t){return\"\"!==this.media.canPlayType(t)}setSrc(t,e){const i=this.getSrc();if(t&&i===t)return;this.revokeSrc();const s=e instanceof Blob&&(this.canPlayType(e.type)||!t)?URL.createObjectURL(e):t;if(i&&this.media.removeAttribute(\"src\"),s||t)try{this.media.src=s}catch(e){this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.removeAttribute(\"src\"),this.media.load())}setMediaElement(t){this.media=t}play(){return t(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&\"AbortError\"===t.name)return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,e){null!=e&&(this.media.preservesPitch=e),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class h extends e{constructor(t,e){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const i=this.parentFromOptionsContainer(t.container);this.parent=i;const[s,n]=this.initHtml();i.appendChild(s),this.container=s,this.scrollContainer=n.querySelector(\".scroll\"),this.wrapper=n.querySelector(\".wrapper\"),this.canvasWrapper=n.querySelector(\".canvases\"),this.progressWrapper=n.querySelector(\".progress\"),this.cursor=n.querySelector(\".cursor\"),e&&n.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if(\"string\"==typeof t?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error(\"Container not found\");return e}initEvents(){const t=t=>{const e=this.wrapper.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top;return[i/e.width,s/e.height]};if(this.wrapper.addEventListener(\"click\",(e=>{const[i,s]=t(e);this.emit(\"click\",i,s)})),this.wrapper.addEventListener(\"dblclick\",(e=>{const[i,s]=t(e);this.emit(\"dblclick\",i,s)})),!0!==this.options.dragToSeek&&\"object\"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollContainer.addEventListener(\"scroll\",(()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:i}=this.scrollContainer,s=t/e,n=(t+i)/e;this.emit(\"scroll\",s,n,t,t+i)})),\"function\"==typeof ResizeObserver){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&\"auto\"!==this.options.height||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,e,i,s,n=3,r=0,o=100){if(!t)return()=>{};const a=matchMedia(\"(pointer: coarse)\").matches;let h=()=>{};const l=l=>{if(l.button!==r)return;l.preventDefault(),l.stopPropagation();let d=l.clientX,c=l.clientY,u=!1;const p=Date.now(),m=s=>{if(s.preventDefault(),s.stopPropagation(),a&&Date.now()-p<o)return;const r=s.clientX,h=s.clientY,l=r-d,m=h-c;if(u||Math.abs(l)>n||Math.abs(m)>n){const s=t.getBoundingClientRect(),{left:n,top:o}=s;u||(null==i||i(d-n,c-o),u=!0),e(l,m,r-n,h-o),d=r,c=h}},f=e=>{if(u){const i=e.clientX,n=e.clientY,r=t.getBoundingClientRect(),{left:o,top:a}=r;null==s||s(i-o,n-a)}h()},g=t=>{t.relatedTarget&&t.relatedTarget!==document.documentElement||f(t)},v=t=>{u&&(t.stopPropagation(),t.preventDefault())},b=t=>{u&&t.preventDefault()};document.addEventListener(\"pointermove\",m),document.addEventListener(\"pointerup\",f),document.addEventListener(\"pointerout\",g),document.addEventListener(\"pointercancel\",g),document.addEventListener(\"touchmove\",b,{passive:!1}),document.addEventListener(\"click\",v,{capture:!0}),h=()=>{document.removeEventListener(\"pointermove\",m),document.removeEventListener(\"pointerup\",f),document.removeEventListener(\"pointerout\",g),document.removeEventListener(\"pointercancel\",g),document.removeEventListener(\"touchmove\",b),setTimeout((()=>{document.removeEventListener(\"click\",v,{capture:!0})}),10)}};return t.addEventListener(\"pointerdown\",l),()=>{h(),t.removeEventListener(\"pointerdown\",l)}}(this.wrapper,((t,e,i)=>{this.emit(\"drag\",Math.max(0,Math.min(1,i/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!0,this.emit(\"dragstart\",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}),(t=>{this.isDragging=!1,this.emit(\"dragend\",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))})))}getHeight(t,e){var i;const s=(null===(i=this.audioData)||void 0===i?void 0:i.numberOfChannels)||1;if(null==t)return 128;if(!isNaN(Number(t)))return Number(t);if(\"auto\"===t){const t=this.parent.clientHeight||128;return(null==e?void 0:e.every((t=>!t.overlay)))?t/s:t}return 128}initHtml(){const t=document.createElement(\"div\"),e=t.attachShadow({mode:\"open\"}),i=this.options.cspNonce&&\"string\"==typeof this.options.cspNonce?this.options.cspNonce.replace(/\"/g,\"\"):\"\";return e.innerHTML=`\\n      <style${i?` nonce=\"${i}\"`:\"\"}>\\n        :host {\\n          user-select: none;\\n          min-width: 1px;\\n        }\\n        :host audio {\\n          display: block;\\n          width: 100%;\\n        }\\n        :host .scroll {\\n          overflow-x: auto;\\n          overflow-y: hidden;\\n          width: 100%;\\n          position: relative;\\n        }\\n        :host .noScrollbar {\\n          scrollbar-color: transparent;\\n          scrollbar-width: none;\\n        }\\n        :host .noScrollbar::-webkit-scrollbar {\\n          display: none;\\n          -webkit-appearance: none;\\n        }\\n        :host .wrapper {\\n          position: relative;\\n          overflow: visible;\\n          z-index: 2;\\n        }\\n        :host .canvases {\\n          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;\\n        }\\n        :host .canvases > div {\\n          position: relative;\\n        }\\n        :host canvas {\\n          display: block;\\n          position: absolute;\\n          top: 0;\\n          image-rendering: pixelated;\\n        }\\n        :host .progress {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 2;\\n          top: 0;\\n          left: 0;\\n          width: 0;\\n          height: 100%;\\n          overflow: hidden;\\n        }\\n        :host .progress > div {\\n          position: relative;\\n        }\\n        :host .cursor {\\n          pointer-events: none;\\n          position: absolute;\\n          z-index: 5;\\n          top: 0;\\n          left: 0;\\n          height: 100%;\\n          border-radius: 2px;\\n        }\\n      </style>\\n\\n      <div class=\"scroll\" part=\"scroll\">\\n        <div class=\"wrapper\" part=\"wrapper\">\\n          <div class=\"canvases\" part=\"canvases\"></div>\\n          <div class=\"progress\" part=\"progress\"></div>\\n          <div class=\"cursor\" part=\"cursor\"></div>\\n        </div>\\n      </div>\\n    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}!0!==t.dragToSeek&&\"object\"!=typeof this.options.dragToSeek||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:e}=this.scrollContainer,i=e*t;this.setScroll(i)}destroy(){var t,e;this.subscriptions.forEach((t=>t())),this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(e=this.unsubscribeOnScroll)||void 0===e||e.forEach((t=>t())),this.unsubscribeOnScroll=[]}createDelay(t=10){let e,i;const s=()=>{e&&clearTimeout(e),i&&i()};return this.timeouts.push(s),()=>new Promise(((n,r)=>{s(),i=r,e=setTimeout((()=>{e=void 0,i=void 0,n()}),t)}))}convertColorValues(t){if(!Array.isArray(t))return t||\"\";if(t.length<2)return t[0]||\"\";const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\"),s=e.height*(window.devicePixelRatio||1),n=i.createLinearGradient(0,0,0,s),r=1/(t.length-1);return t.forEach(((t,e)=>{const i=e*r;n.addColorStop(i,t)})),n}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,e,i,s){const n=t[0],r=t[1]||t[0],o=n.length,{width:a,height:h}=i.canvas,l=h/2,d=this.getPixelRatio(),c=e.barWidth?e.barWidth*d:1,u=e.barGap?e.barGap*d:e.barWidth?c/2:0,p=e.barRadius||0,m=a/(c+u)/o,f=p&&\"roundRect\"in i?\"roundRect\":\"rect\";i.beginPath();let g=0,v=0,b=0;for(let t=0;t<=o;t++){const o=Math.round(t*m);if(o>g){const t=Math.round(v*l*s),n=t+Math.round(b*l*s)||1;let r=l-t;\"top\"===e.barAlign?r=0:\"bottom\"===e.barAlign&&(r=h-n),i[f](g*(c+u),r,c,n,p),g=o,v=0,b=0}const a=Math.abs(n[t]||0),d=Math.abs(r[t]||0);a>v&&(v=a),d>b&&(b=d)}i.fill(),i.closePath()}renderLineWaveform(t,e,i,s){const n=e=>{const n=t[e]||t[0],r=n.length,{height:o}=i.canvas,a=o/2,h=i.canvas.width/r;i.moveTo(0,a);let l=0,d=0;for(let t=0;t<=r;t++){const r=Math.round(t*h);if(r>l){const t=a+(Math.round(d*a*s)||1)*(0===e?-1:1);i.lineTo(l,t),l=r,d=0}const o=Math.abs(n[t]||0);o>d&&(d=o)}i.lineTo(l,a)};i.beginPath(),n(0),n(1),i.fill(),i.closePath()}renderWaveform(t,e,i){if(i.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,i);let s=e.barHeight||1;if(e.normalize){const e=Array.from(t[0]).reduce(((t,e)=>Math.max(t,Math.abs(e))),0);s=e?1/e:1}e.barWidth||e.barGap||e.barAlign?this.renderBarWaveform(t,e,i,s):this.renderLineWaveform(t,e,i,s)}renderSingleCanvas(t,e,i,s,n,r,o){const a=this.getPixelRatio(),h=document.createElement(\"canvas\");h.width=Math.round(i*a),h.height=Math.round(s*a),h.style.width=`${i}px`,h.style.height=`${s}px`,h.style.left=`${Math.round(n)}px`,r.appendChild(h);const l=h.getContext(\"2d\");if(this.renderWaveform(t,e,l),h.width>0&&h.height>0){const t=h.cloneNode(),i=t.getContext(\"2d\");i.drawImage(h,0,0),i.globalCompositeOperation=\"source-in\",i.fillStyle=this.convertColorValues(e.progressColor),i.fillRect(0,0,h.width,h.height),o.appendChild(t)}}renderMultiCanvas(t,e,i,s,n,r){const o=this.getPixelRatio(),{clientWidth:a}=this.scrollContainer,l=i/o;let d=Math.min(h.MAX_CANVAS_WIDTH,a,l),c={};if(e.barWidth||e.barGap){const t=e.barWidth||.5,i=t+(e.barGap||t/2);d%i!=0&&(d=Math.floor(d/i)*i)}if(0===d)return;const u=i=>{if(i<0||i>=p)return;if(c[i])return;c[i]=!0;const o=i*d;let a=Math.min(l-o,d);if(e.barWidth||e.barGap){const t=e.barWidth||.5,i=t+(e.barGap||t/2);a=Math.floor(a/i)*i}if(a<=0)return;const h=t.map((t=>{const e=Math.floor(o/l*t.length),i=Math.floor((o+a)/l*t.length);return t.slice(e,i)}));this.renderSingleCanvas(h,e,a,s,o,n,r)},p=Math.ceil(l/d);if(!this.isScrollable){for(let t=0;t<p;t++)u(t);return}const m=this.scrollContainer.scrollLeft/l,f=Math.floor(m*p);if(u(f-1),u(f),u(f+1),p>1){const t=this.on(\"scroll\",(()=>{const{scrollLeft:t}=this.scrollContainer,e=Math.floor(t/l*p);Object.keys(c).length>h.MAX_NODES&&(n.innerHTML=\"\",r.innerHTML=\"\",c={}),u(e-1),u(e),u(e+1)}));this.unsubscribeOnScroll.push(t)}}renderChannel(t,e,i,s){var{overlay:n}=e,r=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(e,[\"overlay\"]);const o=document.createElement(\"div\"),a=this.getHeight(r.height,r.splitChannels);o.style.height=`${a}px`,n&&s>0&&(o.style.marginTop=`-${a}px`),this.canvasWrapper.style.minHeight=`${a}px`,this.canvasWrapper.appendChild(o);const h=o.cloneNode();this.progressWrapper.appendChild(h),this.renderMultiCanvas(t,r,i,a,o,h)}render(e){return t(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((t=>t())),this.timeouts=[],this.canvasWrapper.innerHTML=\"\",this.progressWrapper.innerHTML=\"\",null!=this.options.width&&(this.scrollContainer.style.width=\"number\"==typeof this.options.width?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),s=this.scrollContainer.clientWidth,n=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=n>s;const r=this.options.fillParent&&!this.isScrollable,o=(r?s:n)*i;if(this.wrapper.style.width=r?\"100%\":`${n}px`,this.scrollContainer.style.overflowX=this.isScrollable?\"auto\":\"hidden\",this.scrollContainer.classList.toggle(\"noScrollbar\",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit(\"render\"),this.options.splitChannels)for(let i=0;i<e.numberOfChannels;i++){const s=Object.assign(Object.assign({},this.options),null===(t=this.options.splitChannels)||void 0===t?void 0:t[i]);this.renderChannel([e.getChannelData(i)],s,o,i)}else{const t=[e.getChannelData(0)];e.numberOfChannels>1&&t.push(e.getChannelData(1)),this.renderChannel(t,this.options,o,0)}Promise.resolve().then((()=>this.emit(\"rendered\")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((t=>t())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:e}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:t}=this.progressWrapper.getBoundingClientRect();let i=t-e;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{scrollLeft:i,scrollWidth:s,clientWidth:n}=this.scrollContainer,r=t*s,o=i,a=i+n,h=n/2;if(this.isDragging){const t=30;r+t>a?this.scrollContainer.scrollLeft+=t:r-t<o&&(this.scrollContainer.scrollLeft-=t)}else{(r<o||r>a)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?h:0));const t=r-i-h;e&&this.options.autoCenter&&t>0&&(this.scrollContainer.scrollLeft+=Math.min(t,10))}{const t=this.scrollContainer.scrollLeft,e=t/s,i=(t+n)/s;this.emit(\"scroll\",e,i,t,t+n)}}renderProgress(t,e){if(isNaN(t))return;const i=100*t;this.canvasWrapper.style.clipPath=`polygon(${i}% 0%, 100% 0%, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:\"\",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,e)}exportImage(e,i,s){return t(this,void 0,void 0,(function*(){const t=this.canvasWrapper.querySelectorAll(\"canvas\");if(!t.length)throw new Error(\"No waveform data\");if(\"dataURL\"===s){const s=Array.from(t).map((t=>t.toDataURL(e,i)));return Promise.resolve(s)}return Promise.all(Array.from(t).map((t=>new Promise(((s,n)=>{t.toBlob((t=>{t?s(t):n(new Error(\"Could not export image\"))}),e,i)})))))}))}}h.MAX_CANVAS_WIDTH=8e3,h.MAX_NODES=10;class l extends e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on(\"tick\",(()=>{requestAnimationFrame((()=>{this.emit(\"tick\")}))})),this.emit(\"tick\")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class d extends e{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc=\"\",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit(\"emptied\");fetch(t).then((e=>{if(e.status>=400)throw new Error(`Failed to fetch ${t}: ${e.status} (${e.statusText})`);return e.arrayBuffer()})).then((e=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(e))).then((e=>{this.currentSrc===t&&(this.buffer=e,this.emit(\"loadedmetadata\"),this.emit(\"canplay\"),this.autoplay&&this.play())}))}_play(){var t;if(!this.paused)return;this.paused=!1,null===(t=this.bufferNode)||void 0===t||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit(\"ended\"))}}_pause(){var t;this.paused=!0,null===(t=this.bufferNode)||void 0===t||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit(\"play\"))}))}pause(){this.paused||(this._pause(),this.emit(\"pause\"))}stopAt(t){const e=t-this.currentTime,i=this.bufferNode;null==i||i.stop(this.audioContext.currentTime+e),null==i||i.addEventListener(\"ended\",(()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return t(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const e=!this.paused;e&&this._pause(),this.playedDuration=t/this._playbackRate,e&&this._play(),this.emit(\"seeking\"),this.emit(\"timeupdate\")}get duration(){var t,e;return null!==(t=this._duration)&&void 0!==t?t:(null===(e=this.buffer)||void 0===e?void 0:e.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit(\"volumechange\")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const e=this.buffer.numberOfChannels;for(let i=0;i<e;i++)t.push(this.buffer.getChannelData(i));return t}removeAttribute(t){switch(t){case\"src\":this.src=\"\";break;case\"playbackRate\":this.playbackRate=0;break;case\"currentTime\":this.currentTime=0;break;case\"duration\":this.duration=0;break;case\"volume\":this.volume=0;break;case\"muted\":this.muted=!1}}}const c={waveColor:\"#999\",progressColor:\"#555\",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class u extends a{static create(t){return new u(t)}constructor(t){const e=t.media||(\"WebAudio\"===t.backend?new d:void 0);super({media:e,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},c,t),this.timer=new l;const i=e?void 0:this.getMediaElement();this.renderer=new h(this.options,i),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const s=this.options.url||this.getSrc()||\"\";Promise.resolve().then((()=>{this.emit(\"init\");const{peaks:t,duration:e}=this.options;(s||t&&e)&&this.load(s,t,e).catch((()=>null))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on(\"tick\",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit(\"timeupdate\",t),this.emit(\"audioprocess\",t),null!=this.stopAtPosition&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit(\"play\"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent(\"timeupdate\",(()=>{const t=this.updateProgress();this.emit(\"timeupdate\",t)})),this.onMediaEvent(\"play\",(()=>{this.emit(\"play\"),this.timer.start()})),this.onMediaEvent(\"pause\",(()=>{this.emit(\"pause\"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(\"emptied\",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent(\"ended\",(()=>{this.emit(\"timeupdate\",this.getDuration()),this.emit(\"finish\"),this.stopAtPosition=null})),this.onMediaEvent(\"seeking\",(()=>{this.emit(\"seeking\",this.getCurrentTime())})),this.onMediaEvent(\"error\",(()=>{var t;this.emit(\"error\",null!==(t=this.getMediaElement().error)&&void 0!==t?t:new Error(\"Media error\")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on(\"click\",((t,e)=>{this.options.interact&&(this.seekTo(t),this.emit(\"interaction\",t*this.getDuration()),this.emit(\"click\",t,e))})),this.renderer.on(\"dblclick\",((t,e)=>{this.emit(\"dblclick\",t,e)})),this.renderer.on(\"scroll\",((t,e,i,s)=>{const n=this.getDuration();this.emit(\"scroll\",t*n,e*n,i,s)})),this.renderer.on(\"render\",(()=>{this.emit(\"redraw\")})),this.renderer.on(\"rendered\",(()=>{this.emit(\"redrawcomplete\")})),this.renderer.on(\"dragstart\",(t=>{this.emit(\"dragstart\",t)})),this.renderer.on(\"dragend\",(t=>{this.emit(\"dragend\",t)})));{let t;this.subscriptions.push(this.renderer.on(\"drag\",(e=>{if(!this.options.interact)return;let i;this.renderer.renderProgress(e),clearTimeout(t),this.isPlaying()?i=0:!0===this.options.dragToSeek?i=200:\"object\"==typeof this.options.dragToSeek&&void 0!==this.options.dragToSeek&&(i=this.options.dragToSeek.debounceTime),t=setTimeout((()=>{this.seekTo(e)}),i),this.emit(\"interaction\",e*this.getDuration()),this.emit(\"drag\",e)})))}}initPlugins(){var t;(null===(t=this.options.plugins)||void 0===t?void 0:t.length)&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=i.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=i.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),null!=t.mediaControls&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const e=t.once(\"destroy\",(()=>{this.plugins=this.plugins.filter((e=>e!==t)),this.subscriptions=this.subscriptions.filter((t=>t!==e))}));return this.subscriptions.push(e),t}unregisterPlugin(t){this.plugins=this.plugins.filter((e=>e!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const e=t/this.getDuration();this.renderer.setScrollPercentage(e)}getActivePlugins(){return this.plugins}loadAudio(e,s,n,r){return t(this,void 0,void 0,(function*(){var t;if(this.emit(\"load\",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!s&&!n){const i=this.options.fetchParams||{};window.AbortController&&!i.signal&&(this.abortController=new AbortController,i.signal=null===(t=this.abortController)||void 0===t?void 0:t.signal);const n=t=>this.emit(\"loading\",t);s=yield o.fetchBlob(e,n,i);const r=this.options.blobMimeType;r&&(s=new Blob([s],{type:r}))}this.setSrc(e,s);const a=yield new Promise((t=>{const e=r||this.getDuration();e?t(e):this.mediaSubscriptions.push(this.onMediaEvent(\"loadedmetadata\",(()=>t(this.getDuration())),{once:!0}))}));if(!e&&!s){const t=this.getMediaElement();t instanceof d&&(t.duration=a)}if(n)this.decodedData=i.createBuffer(n,a||0);else if(s){const t=yield s.arrayBuffer();this.decodedData=yield i.decode(t,this.options.sampleRate)}this.decodedData&&(this.emit(\"decode\",this.getDuration()),this.renderer.render(this.decodedData)),this.emit(\"ready\",this.getDuration())}))}load(e,i,s){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,i,s)}catch(t){throw this.emit(\"error\",t),t}}))}loadBlob(e,i,s){return t(this,void 0,void 0,(function*(){try{return yield this.loadAudio(\"\",e,i,s)}catch(t){throw this.emit(\"error\",t),t}}))}zoom(t){if(!this.decodedData)throw new Error(\"No audio loaded\");this.renderer.zoom(t),this.emit(\"zoom\",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:e=8e3,precision:i=1e4}={}){if(!this.decodedData)throw new Error(\"The audio has not been decoded yet\");const s=Math.min(t,this.decodedData.numberOfChannels),n=[];for(let t=0;t<s;t++){const s=this.decodedData.getChannelData(t),r=[],o=s.length/e;for(let t=0;t<e;t++){const e=s.slice(Math.floor(t*o),Math.ceil((t+1)*o));let n=0;for(let t=0;t<e.length;t++){const i=e[t];Math.abs(i)>Math.abs(n)&&(n=i)}r.push(Math.round(n*i)/i)}n.push(r)}return n}getDuration(){let t=super.getDuration()||0;return 0!==t&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit(\"timeupdate\",t)}seekTo(t){const e=this.getDuration()*t;this.setTime(e)}play(e,i){const s=Object.create(null,{play:{get:()=>super.play}});return t(this,void 0,void 0,(function*(){null!=e&&this.setTime(e);const t=yield s.play.call(this);return null!=i&&(this.media instanceof d?this.media.stopAt(i):this.stopAtPosition=i),t}))}playPause(){return t(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load(\"\",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return t(this,arguments,void 0,(function*(t=\"image/png\",e=1,i=\"dataURL\"){return this.renderer.exportImage(t,e,i)}))}destroy(){var t;this.emit(\"destroy\"),null===(t=this.abortController)||void 0===t||t.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}u.BasePlugin=class extends e{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},u.dom=r;export{u as default};\n","function t(t,i,e,s){return new(e||(e=Promise))((function(o,r){function n(t){try{d(s.next(t))}catch(t){r(t)}}function a(t){try{d(s.throw(t))}catch(t){r(t)}}function d(t){var i;t.done?o(t.value):(i=t.value,i instanceof e?i:new e((function(t){t(i)}))).then(n,a)}d((s=s.apply(t,i||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class i{constructor(){this.listeners={}}on(t,i,e){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(i),null==e?void 0:e.once){const e=()=>{this.un(t,e),this.un(t,i)};return this.on(t,e),e}return()=>this.un(t,i)}un(t,i){var e;null===(e=this.listeners[t])||void 0===e||e.delete(i)}once(t,i){return this.on(t,i,{once:!0})}unAll(){this.listeners={}}emit(t,...i){this.listeners[t]&&this.listeners[t].forEach((t=>t(...i)))}}class e extends i{constructor(t){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=t}onInit(){}_init(t){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=t,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((t=>t())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}class s extends i{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on(\"tick\",(()=>{requestAnimationFrame((()=>{this.emit(\"tick\")}))})),this.emit(\"tick\")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const o=[\"audio/webm\",\"audio/wav\",\"audio/mpeg\",\"audio/mp4\",\"audio/mp3\"];class r extends e{constructor(t){var i,e,o,r,n,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:null!==(i=t.audioBitsPerSecond)&&void 0!==i?i:128e3,scrollingWaveform:null!==(e=t.scrollingWaveform)&&void 0!==e&&e,scrollingWaveformWindow:null!==(o=t.scrollingWaveformWindow)&&void 0!==o?o:5,continuousWaveform:null!==(r=t.continuousWaveform)&&void 0!==r&&r,renderRecordedAudio:null===(n=t.renderRecordedAudio)||void 0===n||n,mediaRecorderTimeslice:null!==(a=t.mediaRecorderTimeslice)&&void 0!==a?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new s,this.subscriptions.push(this.timer.on(\"tick\",(()=>{const t=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+t,this.emit(\"record-progress\",this.duration)})))}static create(t){return new r(t||{})}renderMicStream(t){var i;const e=new AudioContext,s=e.createMediaStreamSource(t),o=e.createAnalyser();s.connect(o),this.options.continuousWaveform&&(o.fftSize=32);const r=o.frequencyBinCount,n=new Float32Array(r);let a=0;this.wavesurfer&&(null!==(i=this.originalOptions)&&void 0!==i||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const d=setInterval((()=>{var t,i,s,d;if(!this.isWaveformPaused){if(o.getFloatTimeDomainData(n),this.options.scrollingWaveform){const t=Math.floor((this.options.scrollingWaveformWindow||0)*e.sampleRate),i=Math.min(t,this.dataWindow?this.dataWindow.length+r:r),s=new Float32Array(t);if(this.dataWindow){const e=Math.max(0,t-this.dataWindow.length);s.set(this.dataWindow.slice(-i+r),e)}s.set(n,t-r),this.dataWindow=s}else if(this.options.continuousWaveform){if(!this.dataWindow){const e=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):(null!==(i=null===(t=this.wavesurfer)||void 0===t?void 0:t.getWidth())&&void 0!==i?i:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(e)}let e=0;for(let t=0;t<r;t++){const i=Math.abs(n[t]);i>e&&(e=i)}if(a+1>this.dataWindow.length){const t=new Float32Array(2*this.dataWindow.length);t.set(this.dataWindow,0),this.dataWindow=t}this.dataWindow[a]=e,a++}else this.dataWindow=n;if(this.wavesurfer){const t=(null!==(d=null===(s=this.dataWindow)||void 0===s?void 0:s.length)&&void 0!==d?d:0)/100;this.wavesurfer.load(\"\",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:t).then((()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))})).catch((t=>{console.error(\"Error rendering real-time recording data:\",t)}))}}}),10);return{onDestroy:()=>{clearInterval(d),null==s||s.disconnect(),null==e||e.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(d),this.stopMic()}}}startMic(i){return t(this,void 0,void 0,(function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:null==i||i})}catch(t){throw new Error(\"Error accessing the microphone: \"+t.message)}const{onDestroy:e,onEnd:s}=this.renderMicStream(t);return this.subscriptions.push(this.once(\"destroy\",e)),this.subscriptions.push(this.once(\"record-end\",s)),this.stream=t,t}))}stopMic(){this.stream&&(this.stream.getTracks().forEach((t=>t.stop())),this.stream=null,this.mediaRecorder=null)}startRecording(i){return t(this,void 0,void 0,(function*(){const t=this.stream||(yield this.startMic(i));this.dataWindow=null;const e=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||o.find((t=>MediaRecorder.isTypeSupported(t))),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=e,this.stopRecording();const s=[];e.ondataavailable=t=>{t.data.size>0&&s.push(t.data),this.emit(\"record-data-available\",t.data)};const r=t=>{var i;const o=new Blob(s,{type:e.mimeType});this.emit(t,o),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),null===(i=this.wavesurfer)||void 0===i||i.load(URL.createObjectURL(o)))};e.onpause=()=>r(\"record-pause\"),e.onstop=()=>r(\"record-end\"),e.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit(\"record-start\")}))}getDuration(){return this.duration}isRecording(){var t;return\"recording\"===(null===(t=this.mediaRecorder)||void 0===t?void 0:t.state)}isPaused(){var t;return\"paused\"===(null===(t=this.mediaRecorder)||void 0===t?void 0:t.state)}isActive(){var t;return\"inactive\"!==(null===(t=this.mediaRecorder)||void 0===t?void 0:t.state)}stopRecording(){var t;this.isActive()&&(null===(t=this.mediaRecorder)||void 0===t||t.stop(),this.timer.stop())}pauseRecording(){var t,i;this.isRecording()&&(this.isWaveformPaused=!0,null===(t=this.mediaRecorder)||void 0===t||t.requestData(),null===(i=this.mediaRecorder)||void 0===i||i.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,null===(t=this.mediaRecorder)||void 0===t||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit(\"record-resume\"))}static getAvailableAudioDevices(){return t(this,void 0,void 0,(function*(){return navigator.mediaDevices.enumerateDevices().then((t=>t.filter((t=>\"audioinput\"===t.kind))))}))}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}export{r as default};\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useContext } from \"react\"\n\nimport { LibContext } from \"~lib/components/core/LibContext\"\nimport createDownloadLinkElement from \"~lib/util/createDownloadLinkElement\"\n\nconst useDownloadUrl = (\n  url: string | null,\n  filename: string\n): (() => void) => {\n  const {\n    libConfig: {\n      enforceDownloadInNewTab = false, // Default to false, if no libConfig, e.g. for tests\n    },\n  } = useContext(LibContext)\n\n  const downloadUrl = useCallback(() => {\n    if (!url) return\n\n    const link = createDownloadLinkElement({\n      enforceDownloadInNewTab,\n      url,\n      filename,\n    })\n\n    link.style.display = \"none\"\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n  }, [url, enforceDownloadInNewTab, filename])\n\n  return downloadUrl\n}\n\nexport default useDownloadUrl\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\"\n\nimport { useFormClearHelper } from \"~lib/components/widgets/Form\"\nimport { isNullOrUndefined, notNullOrUndefined } from \"~lib/util/utils\"\nimport { WidgetStateManager } from \"~lib/WidgetStateManager\"\n\n/**\n * Think of useState, but the state is also persisted in the widget manager.\n * This allows you to have the state be persisted between mounting and unmounting of the component.\n * @param widgetMgr - The widget manager instance to use\n * @param id - The id of the widget to store the state for\n * @param key - The key of the state to store\n * @param defaultValue - The default value to use if the state is not set in the widget manager\n * @returns A tuple containing the current state and a function to set the state\n */\nconst useWidgetManagerElementState = <T,>({\n  widgetMgr,\n  id,\n  formId,\n  key,\n  defaultValue,\n}: {\n  widgetMgr: WidgetStateManager\n  id: string\n  formId?: string\n  key: string\n  defaultValue: T\n}): [T, (value: T) => void] => {\n  useEffect(() => {\n    const existingValue = widgetMgr.getElementState(id, key)\n    if (isNullOrUndefined(existingValue) && notNullOrUndefined(defaultValue)) {\n      widgetMgr.setElementState(id, key, defaultValue)\n    }\n  }, [widgetMgr, id, key, defaultValue])\n\n  const [state, setStateInternal] = useState<T>(\n    widgetMgr.getElementState(id, key) ?? defaultValue\n  )\n\n  const setState = useCallback(\n    (value: T) => {\n      widgetMgr.setElementState(id, key, value)\n      setStateInternal(value)\n    },\n    [widgetMgr, id, key]\n  )\n\n  const element = useMemo(() => ({ formId: formId || \"\" }), [formId])\n  const onFormCleared = useCallback(\n    () => setState(defaultValue),\n    [defaultValue, setState]\n  )\n\n  useFormClearHelper({\n    element,\n    widgetMgr,\n    onFormCleared,\n  })\n\n  return [state, setState]\n}\n\nexport default useWidgetManagerElementState\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport zip from \"lodash/zip\"\n\nimport {\n  FileUploaderState as FileUploaderStateProto,\n  IFileURLs,\n  UploadedFileInfo as UploadedFileInfoProto,\n} from \"@streamlit/protobuf\"\n\nimport { FileUploadClient } from \"~lib/FileUploadClient\"\nimport { ensureError } from \"~lib/util/ErrorHandling\"\nimport { WidgetInfo, WidgetStateManager } from \"~lib/WidgetStateManager\"\n\ntype SuccessfulUpload = {\n  fileUrl: IFileURLs\n  file: File\n}\n\ntype FailedUpload = {\n  file: File\n  error: Error\n}\n\nexport const uploadFiles = async ({\n  files,\n  uploadClient,\n  widgetMgr,\n  widgetInfo,\n  fragmentId,\n}: {\n  files: File[]\n  uploadClient: FileUploadClient\n  widgetMgr: WidgetStateManager\n  widgetInfo: WidgetInfo\n  fragmentId?: string\n}): Promise<{\n  successfulUploads: SuccessfulUpload[]\n  failedUploads: FailedUpload[]\n}> => {\n  let fileUrls: IFileURLs[] = []\n\n  try {\n    fileUrls = await uploadClient.fetchFileURLs(files)\n  } catch (e) {\n    return {\n      successfulUploads: [],\n      failedUploads: files.map(file => ({ file, error: ensureError(e) })),\n    }\n  }\n\n  const filesWithUrls = zip(files, fileUrls)\n\n  const successfulUploads: SuccessfulUpload[] = []\n  const failedUploads: FailedUpload[] = []\n\n  await Promise.all(\n    filesWithUrls.map(async ([file, fileUrl]) => {\n      if (!file || !fileUrl || !fileUrl.uploadUrl || !fileUrl.fileId) {\n        return { file, fileUrl, error: new Error(\"No upload URL found\") }\n      }\n\n      try {\n        await uploadClient.uploadFile(\n          { id: fileUrl.fileId, formId: widgetInfo.formId || \"\" }, // TODO SEE IF DOWNSTREAM LOGIC CAN BE SIMPLIFIED\n          fileUrl.uploadUrl,\n          file\n        )\n        successfulUploads.push({ fileUrl, file })\n      } catch (e) {\n        const error = ensureError(e)\n        failedUploads.push({ file, error })\n      }\n    })\n  )\n\n  widgetMgr.setFileUploaderStateValue(\n    widgetInfo,\n    new FileUploaderStateProto({\n      uploadedFileInfo: successfulUploads.map(\n        ({ file, fileUrl }) =>\n          new UploadedFileInfoProto({\n            fileId: fileUrl.fileId,\n            fileUrls: fileUrl,\n            name: file.name,\n            size: file.size,\n          })\n      ),\n    }),\n    {\n      fromUi: true,\n    },\n    fragmentId\n  )\n\n  return { successfulUploads, failedUploads }\n}\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled from \"@emotion/styled\"\n\nexport const StyledAudioInputContainerDiv = styled.div()\n\nexport const StyledWaveformContainerDiv = styled.div<{ disabled?: boolean }>(\n  ({ theme, disabled }) => ({\n    height: theme.sizes.largestElementHeight,\n    width: \"100%\",\n    background: theme.colors.secondaryBg,\n    borderRadius: theme.radii.default,\n    marginBottom: theme.spacing.twoXS,\n    display: \"flex\",\n    alignItems: \"center\",\n    position: \"relative\",\n    paddingLeft: theme.spacing.xs,\n    paddingRight: theme.spacing.sm,\n    border: theme.colors.widgetBorderColor\n      ? `${theme.sizes.borderWidth} solid ${theme.colors.widgetBorderColor}`\n      : undefined,\n    cursor: disabled ? \"not-allowed\" : \"auto\",\n  })\n)\n\nexport const StyledWaveformInnerDiv = styled.div({\n  flex: 1,\n})\n\nexport const StyledWaveSurferDiv = styled.div<{ show: boolean }>(\n  ({ show }) => ({\n    display: show ? \"block\" : \"none\",\n  })\n)\n\nexport const StyledWaveformTimeCode = styled.span<{\n  isPlayingOrRecording: boolean\n  disabled?: boolean\n}>(({ theme, isPlayingOrRecording, disabled }) => ({\n  margin: theme.spacing.sm,\n  fontFamily: theme.fonts.monospace,\n  color: disabled\n    ? theme.colors.fadedText40\n    : isPlayingOrRecording\n      ? theme.colors.bodyText\n      : theme.colors.fadedText60,\n  backgroundColor: theme.colors.secondaryBg,\n  fontSize: theme.fontSizes.sm,\n}))\n\nexport const StyledErrorContainerDiv = styled.div({\n  width: \"100%\",\n  textAlign: \"center\",\n  overflow: \"hidden\",\n})\n\nexport const StyledErrorTextSpan = styled.span(({ theme }) => ({\n  color: theme.colors.bodyText,\n}))\n\nexport const StyledNoMicInputLearnMoreLink = styled.a(({ theme }) => ({\n  color: theme.colors.link,\n  textDecoration: theme.linkUnderline ? \"underline\" : \"none\",\n}))\n\n// Placeholder\nexport const StyledPlaceholderContainerDiv = styled.div(({ theme }) => ({\n  height: theme.sizes.largestElementHeight,\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n}))\n\nexport const StyledPlaceholderDotsDiv = styled.div(({ theme }) => {\n  const dotSize = \"0.625em\"\n  return {\n    opacity: 0.2,\n    width: \"100%\",\n    height: dotSize,\n    backgroundSize: dotSize,\n    backgroundImage: `radial-gradient(${theme.colors.fadedText10} 40%, transparent 40%)`,\n    backgroundRepeat: \"repeat\",\n  }\n})\n\nexport const StyledActionButtonStopRecordingDiv = styled.span(({ theme }) => ({\n  \"& > button\": {\n    color: theme.colors.primary,\n    padding: theme.spacing.threeXS,\n  },\n  \"& > button:hover, & > button:focus\": {\n    color: theme.colors.red,\n  },\n}))\n\nexport const StyledActionButtonStartRecordingDiv = styled.span(\n  ({ theme }) => ({\n    \"& > button\": {\n      padding: theme.spacing.threeXS,\n      color: theme.colors.fadedText60,\n    },\n    \"& > button:hover, & > button:focus\": {\n      color: theme.colors.bodyText,\n    },\n  })\n)\n\nexport const StyledActionButtonPlayPauseDiv = styled.span(({ theme }) => ({\n  \"& > button\": {\n    padding: theme.spacing.threeXS,\n    color: theme.colors.fadedText60,\n  },\n  \"& > button:hover, & > button:focus\": {\n    color: theme.colors.bodyText,\n  },\n}))\n\nexport const StyledActionButtonContainerDiv = styled.div(({ theme }) => ({\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  flexGrow: 0,\n  flexShrink: 1,\n  padding: theme.spacing.xs,\n  gap: theme.spacing.twoXS,\n  marginRight: theme.spacing.twoXS,\n}))\n\nexport const StyledWidgetLabelHelp = styled.div(({ theme }) => ({\n  marginLeft: theme.spacing.sm,\n}))\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo } from \"react\"\n\nimport { EmotionIcon } from \"@emotion-icons/emotion-icon\"\nimport { Mic } from \"@emotion-icons/material-outlined\"\nimport {\n  Pause,\n  PlayArrow,\n  Refresh,\n  StopCircle,\n} from \"@emotion-icons/material-rounded\"\n\nimport BaseButton, { BaseButtonKind } from \"~lib/components/shared/BaseButton\"\nimport Icon, { StyledSpinnerIcon } from \"~lib/components/shared/Icon\"\n\nimport {\n  StyledActionButtonContainerDiv,\n  StyledActionButtonPlayPauseDiv,\n  StyledActionButtonStartRecordingDiv,\n  StyledActionButtonStopRecordingDiv,\n} from \"./styled-components\"\n\ninterface BaseActionButtonProps {\n  onClick: () => void\n  disabled: boolean\n  ariaLabel: string\n  iconContent: EmotionIcon\n}\n\nconst ActionButton: React.FC<BaseActionButtonProps> = ({\n  onClick,\n  disabled,\n  ariaLabel,\n  iconContent,\n}) => (\n  <BaseButton\n    kind={BaseButtonKind.BORDERLESS_ICON}\n    onClick={onClick}\n    disabled={disabled}\n    aria-label={ariaLabel}\n    containerWidth\n    data-testid=\"stAudioInputActionButton\"\n  >\n    <Icon content={iconContent} size=\"lg\" color=\"inherit\" />\n  </BaseButton>\n)\n\nexport interface AudioInputActionButtonProps {\n  disabled: boolean\n  isRecording: boolean\n  isPlaying: boolean\n  isUploading: boolean\n  isError: boolean\n  recordingUrlExists: boolean\n  startRecording(): void\n  stopRecording(): void\n  onClickPlayPause(): void\n  onClear(): void\n}\n\ninterface AudioInputStopRecordingButtonProps {\n  disabled: boolean\n  stopRecording(): void\n}\n\ninterface AudioInputPlayPauseButtonProps {\n  disabled: boolean\n  isPlaying: boolean\n  onClickPlayPause(): void\n}\n\ninterface AudioInputStartRecordingButtonProps {\n  disabled: boolean\n  startRecording(): void\n}\n\ninterface AudioInputResetButtonProps {\n  onClick(): void\n}\n\nexport const AudioInputStopRecordingButton: React.FC<\n  AudioInputStopRecordingButtonProps\n> = ({ disabled, stopRecording }) => (\n  <StyledActionButtonStopRecordingDiv>\n    <ActionButton\n      onClick={stopRecording}\n      disabled={disabled}\n      ariaLabel=\"Stop recording\"\n      iconContent={StopCircle}\n    />\n  </StyledActionButtonStopRecordingDiv>\n)\n\nexport const AudioInputPlayPauseButton: React.FC<\n  AudioInputPlayPauseButtonProps\n> = ({ disabled, isPlaying, onClickPlayPause }) => {\n  return (\n    <StyledActionButtonPlayPauseDiv>\n      {isPlaying ? (\n        <ActionButton\n          onClick={onClickPlayPause}\n          disabled={disabled}\n          ariaLabel=\"Pause\"\n          iconContent={Pause}\n        />\n      ) : (\n        <ActionButton\n          onClick={onClickPlayPause}\n          disabled={disabled}\n          ariaLabel=\"Play\"\n          iconContent={PlayArrow}\n        />\n      )}\n    </StyledActionButtonPlayPauseDiv>\n  )\n}\n\nexport const AudioInputStartRecordingButton: React.FC<\n  AudioInputStartRecordingButtonProps\n> = ({ disabled, startRecording }) => (\n  <StyledActionButtonStartRecordingDiv>\n    <ActionButton\n      onClick={startRecording}\n      disabled={disabled}\n      ariaLabel=\"Record\"\n      iconContent={Mic}\n    />\n  </StyledActionButtonStartRecordingDiv>\n)\n\nexport const AudioInputResetButton: React.FC<AudioInputResetButtonProps> = ({\n  onClick,\n}) => (\n  <StyledActionButtonPlayPauseDiv>\n    <ActionButton\n      disabled={false}\n      onClick={onClick}\n      ariaLabel=\"Reset\"\n      iconContent={Refresh}\n    />\n  </StyledActionButtonPlayPauseDiv>\n)\n\nconst AudioInputActionButtons: React.FC<AudioInputActionButtonProps> = ({\n  disabled,\n  isRecording,\n  isPlaying,\n  isUploading,\n  isError,\n  recordingUrlExists,\n  startRecording,\n  stopRecording,\n  onClickPlayPause,\n  onClear,\n}) => {\n  if (isError) {\n    return (\n      <StyledActionButtonContainerDiv>\n        <AudioInputResetButton onClick={onClear} />\n      </StyledActionButtonContainerDiv>\n    )\n  }\n\n  if (isUploading) {\n    return (\n      <StyledActionButtonContainerDiv>\n        <StyledSpinnerIcon\n          aria-label=\"Uploading\"\n          size=\"base\"\n          margin=\"0\"\n          padding=\"0\"\n        />\n      </StyledActionButtonContainerDiv>\n    )\n  }\n\n  return (\n    <StyledActionButtonContainerDiv>\n      {isRecording ? (\n        <AudioInputStopRecordingButton\n          disabled={disabled}\n          stopRecording={stopRecording}\n        />\n      ) : (\n        <AudioInputStartRecordingButton\n          disabled={disabled}\n          startRecording={startRecording}\n        />\n      )}\n      {recordingUrlExists && (\n        <AudioInputPlayPauseButton\n          disabled={disabled}\n          isPlaying={isPlaying}\n          onClickPlayPause={onClickPlayPause}\n        />\n      )}\n    </StyledActionButtonContainerDiv>\n  )\n}\n\nexport default memo(AudioInputActionButtons)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport {\n  StyledErrorContainerDiv,\n  StyledErrorTextSpan,\n} from \"./styled-components\"\n\nconst AudioInputErrorState = (): ReactElement => {\n  return (\n    <StyledErrorContainerDiv>\n      <StyledErrorTextSpan>\n        An error has occurred, please try again.\n      </StyledErrorTextSpan>\n    </StyledErrorContainerDiv>\n  )\n}\n\nexport default memo(AudioInputErrorState)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const WAVEFORM_PADDING = 4\nexport const BAR_WIDTH = 4\nexport const BAR_GAP = 4\nexport const BAR_RADIUS = 8\nexport const CURSOR_WIDTH = 0\n\nexport const STARTING_TIME_STRING = \"00:00\"\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// code in this file was adapted from recorder.js library\n\nimport { getLogger } from \"loglevel\"\n\nconst LOG = getLogger(\"convertAudioToWav\")\n\n/**\n * Converts a file Blob (audio/video) to a WAV Blob.\n * @param fileBlob - The input file as a Blob.\n * @returns - A Promise resolving with the WAV file as a Blob.\n */\nasync function convertFileToWav(fileBlob: Blob): Promise<Blob | undefined> {\n  const audioContext = new window.AudioContext()\n  const arrayBuffer = await fileBlob.arrayBuffer()\n\n  let audioBuffer: AudioBuffer\n  try {\n    audioBuffer = await audioContext.decodeAudioData(arrayBuffer)\n  } catch (error) {\n    LOG.error(error)\n    return undefined // Return undefined if decoding fails\n  }\n\n  const HEADER_HEIGHT = 44\n  const numOfChan = audioBuffer.numberOfChannels\n  const sampleRate = audioBuffer.sampleRate\n  const length = audioBuffer.length * numOfChan * 2 + HEADER_HEIGHT\n  const buffer = new ArrayBuffer(length)\n  const view = new DataView(buffer)\n\n  // WAV header metadata\n  const wavHeader = {\n    0: { type: \"string\", value: \"RIFF\" },\n    4: { type: \"uint32\", value: length - 8 },\n    8: { type: \"string\", value: \"WAVE\" },\n    12: { type: \"string\", value: \"fmt \" },\n    16: { type: \"uint32\", value: 16 }, // PCM format\n    20: { type: \"uint16\", value: 1 }, // PCM format code\n    22: { type: \"uint16\", value: numOfChan }, // Number of channels\n    24: { type: \"uint32\", value: sampleRate }, // Sample rate\n    28: { type: \"uint32\", value: sampleRate * numOfChan * 2 }, // Byte rate\n    32: { type: \"uint16\", value: numOfChan * 2 }, // Block align\n    34: { type: \"uint16\", value: 16 }, // Bits per sample (16-bit)\n    36: { type: \"string\", value: \"data\" },\n    40: { type: \"uint32\", value: audioBuffer.length * numOfChan * 2 }, // Data chunk length\n  }\n\n  // Write WAV header from the dictionary using Object.entries\n  Object.entries(wavHeader).forEach(([offset, { type, value }]) => {\n    const intOffset = parseInt(offset, 10)\n    if (type === \"string\") {\n      writeString(view, intOffset, value as string)\n    } else if (type === \"uint32\") {\n      view.setUint32(intOffset, value as number, true)\n    } else if (type === \"uint16\") {\n      view.setUint16(intOffset, value as number, true)\n    }\n  })\n\n  // Write PCM data\n  let offset = HEADER_HEIGHT\n  for (let i = 0; i < audioBuffer.length; i++) {\n    for (let channel = 0; channel < numOfChan; channel++) {\n      const sample = Math.max(\n        -1,\n        Math.min(1, audioBuffer.getChannelData(channel)[i])\n      )\n      view.setInt16(offset, sample * 0x7fff, true)\n      offset += 2\n    }\n  }\n\n  const wavArray = new Uint8Array(buffer)\n  return new Blob([wavArray], { type: \"audio/wav\" })\n}\n\n/**\n * Writes a string to a DataView at the specified offset.\n * @param view - The DataView to write to.\n * @param offset - The starting offset in the DataView.\n * @param string - The string to write.\n */\nfunction writeString(view: DataView, offset: number, string: string): void {\n  for (let i = 0; i < string.length; i++) {\n    view.setUint8(offset + i, string.charCodeAt(i))\n  }\n}\n\nexport default convertFileToWav\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst formatTime = (timeMs: number): string => {\n  const seconds = Math.floor(timeMs / 1000)\n  const minutes = Math.floor(seconds / 60)\n  const hours = Math.floor(minutes / 60)\n  const remainingSeconds = seconds % 60\n  const remainingMinutes = minutes % 60\n\n  const displaySec = remainingSeconds.toString().padStart(2, \"0\")\n  const displayMin = remainingMinutes.toString().padStart(2, \"0\")\n  const displayHours = hours.toString().padStart(2, \"0\")\n\n  return minutes < 60\n    ? `${displayMin}:${displaySec}`\n    : `${displayHours}:${displayMin}:${displaySec}`\n}\n\nexport default formatTime\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport { ENABLE_PERIPHERALS_DOCS_URL } from \"~lib/urls\"\n\nimport {\n  StyledErrorContainerDiv,\n  StyledErrorTextSpan,\n  StyledNoMicInputLearnMoreLink,\n} from \"./styled-components\"\n\nconst NoMicPermissions = (): ReactElement => {\n  return (\n    <StyledErrorContainerDiv>\n      <StyledErrorTextSpan>\n        This app would like to use your microphone.\n      </StyledErrorTextSpan>{\" \"}\n      <StyledNoMicInputLearnMoreLink\n        href={ENABLE_PERIPHERALS_DOCS_URL}\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        Learn how to allow access.\n      </StyledNoMicInputLearnMoreLink>\n    </StyledErrorContainerDiv>\n  )\n}\n\nexport default memo(NoMicPermissions)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement } from \"react\"\n\nimport {\n  StyledPlaceholderContainerDiv,\n  StyledPlaceholderDotsDiv,\n} from \"./styled-components\"\n\nconst Placeholder = (): ReactElement => {\n  return (\n    <StyledPlaceholderContainerDiv>\n      <StyledPlaceholderDotsDiv />\n    </StyledPlaceholderContainerDiv>\n  )\n}\n\nexport default memo(Placeholder)\n","/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2025)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  memo,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\"\n\nimport { Delete, FileDownload } from \"@emotion-icons/material-outlined\"\nimport isEqual from \"lodash/isEqual\"\nimport WaveSurfer from \"wavesurfer.js\"\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record\"\n\nimport { AudioInput as AudioInputProto } from \"@streamlit/protobuf\"\n\nimport Toolbar, { ToolbarAction } from \"~lib/components/shared/Toolbar\"\nimport { Placement } from \"~lib/components/shared/Tooltip\"\nimport TooltipIcon from \"~lib/components/shared/TooltipIcon\"\nimport { WidgetLabel } from \"~lib/components/widgets/BaseWidget\"\nimport { FormClearHelper } from \"~lib/components/widgets/Form\"\nimport { FileUploadClient } from \"~lib/FileUploadClient\"\nimport useDownloadUrl from \"~lib/hooks/useDownloadUrl\"\nimport { useEmotionTheme } from \"~lib/hooks/useEmotionTheme\"\nimport useWidgetManagerElementState from \"~lib/hooks/useWidgetManagerElementState\"\nimport { blend, convertRemToPx } from \"~lib/theme/utils\"\nimport { usePrevious } from \"~lib/util/Hooks\"\nimport { uploadFiles } from \"~lib/util/uploadFiles\"\nimport {\n  isNullOrUndefined,\n  labelVisibilityProtoValueToEnum,\n  notNullOrUndefined,\n} from \"~lib/util/utils\"\nimport { WidgetStateManager } from \"~lib/WidgetStateManager\"\n\nimport AudioInputActionButtons from \"./AudioInputActionButtons\"\nimport AudioInputErrorState from \"./AudioInputErrorState\"\nimport {\n  BAR_GAP,\n  BAR_RADIUS,\n  BAR_WIDTH,\n  CURSOR_WIDTH,\n  STARTING_TIME_STRING,\n  WAVEFORM_PADDING,\n} from \"./constants\"\nimport convertAudioToWav from \"./convertAudioToWav\"\nimport formatTime from \"./formatTime\"\nimport NoMicPermissions from \"./NoMicPermissions\"\nimport Placeholder from \"./Placeholder\"\nimport {\n  StyledAudioInputContainerDiv,\n  StyledWaveformContainerDiv,\n  StyledWaveformInnerDiv,\n  StyledWaveformTimeCode,\n  StyledWaveSurferDiv,\n  StyledWidgetLabelHelp,\n} from \"./styled-components\"\nexport interface Props {\n  element: AudioInputProto\n  uploadClient: FileUploadClient\n  widgetMgr: WidgetStateManager\n  fragmentId?: string\n  disabled: boolean\n}\n\nconst AudioInput: React.FC<Props> = ({\n  element,\n  uploadClient,\n  widgetMgr,\n  fragmentId,\n  disabled,\n}): ReactElement => {\n  const theme = useEmotionTheme()\n  const previousTheme = usePrevious(theme)\n  const [wavesurfer, setWavesurfer] = useState<WaveSurfer | null>(null)\n  const waveSurferRef = useRef<HTMLDivElement | null>(null)\n  const [deleteFileUrl, setDeleteFileUrl] = useWidgetManagerElementState<\n    string | null\n  >({\n    widgetMgr,\n    id: element.id,\n    key: \"deleteFileUrl\",\n    defaultValue: null,\n  })\n  const [recordPlugin, setRecordPlugin] = useState<RecordPlugin | null>(null)\n  // to eventually show the user the available audio devices\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [availableAudioDevices, setAvailableAudioDevices] = useState<\n    MediaDeviceInfo[]\n  >([])\n  const [activeAudioDeviceId, setActiveAudioDeviceId] = useState<\n    string | null\n  >(null)\n\n  const [recordingUrl, setRecordingUrl] = useWidgetManagerElementState<\n    string | null\n  >({\n    widgetMgr,\n    id: element.id,\n    key: \"recordingUrl\",\n    defaultValue: null,\n  })\n  const [, setRerender] = useState(0)\n  const forceRerender = (): void => {\n    setRerender(prev => prev + 1)\n  }\n  const [progressTime, setProgressTime] = useState(STARTING_TIME_STRING)\n\n  const [recordingTime, setRecordingTime] =\n    useWidgetManagerElementState<string>({\n      widgetMgr,\n      id: element.id,\n      formId: element.formId,\n      key: \"recordingTime\",\n      defaultValue: STARTING_TIME_STRING,\n    })\n\n  const [shouldUpdatePlaybackTime, setShouldUpdatePlaybackTime] =\n    useState(false)\n  const [hasNoMicPermissions, setHasNoMicPermissions] = useState(false)\n  const [hasRequestedMicPermissions, setHasRequestedMicPermissions] =\n    useState(false)\n  const [isUploading, setIsUploading] = useState(false)\n  const [isError, setIsError] = useState(false)\n\n  const widgetId = element.id\n  const widgetFormId = element.formId\n\n  const transcodeAndUploadFile = useCallback(\n    async (blob: Blob) => {\n      setIsUploading(true)\n      if (notNullOrUndefined(widgetFormId))\n        widgetMgr.setFormsWithUploadsInProgress(new Set([widgetFormId]))\n\n      let wavBlob: Blob | undefined = undefined\n\n      if (blob.type === \"audio/wav\") {\n        wavBlob = blob\n      } else {\n        wavBlob = await convertAudioToWav(blob)\n      }\n\n      if (!wavBlob) {\n        setIsError(true)\n        return\n      }\n\n      const url = URL.createObjectURL(wavBlob)\n      const timestamp = new Date().toISOString().slice(0, 16).replace(\":\", \"-\")\n      const file = new File([wavBlob], `${timestamp}_audio.wav`, {\n        type: wavBlob.type,\n      })\n\n      setRecordingUrl(url)\n\n      void uploadFiles({\n        files: [file],\n        uploadClient,\n        widgetMgr,\n        widgetInfo: { id: widgetId, formId: widgetFormId },\n        fragmentId,\n      })\n        .then(({ successfulUploads, failedUploads }) => {\n          if (failedUploads.length > 0) {\n            setIsError(true)\n            return\n          }\n          const upload = successfulUploads[0]\n          if (upload && upload.fileUrl.deleteUrl) {\n            setDeleteFileUrl(upload.fileUrl.deleteUrl)\n          }\n        })\n        .finally(() => {\n          if (notNullOrUndefined(widgetFormId))\n            widgetMgr.setFormsWithUploadsInProgress(new Set())\n\n          setIsUploading(false)\n        })\n    },\n    [\n      setRecordingUrl,\n      uploadClient,\n      widgetMgr,\n      widgetId,\n      widgetFormId,\n      fragmentId,\n      setDeleteFileUrl,\n    ]\n  )\n\n  const handleClear = useCallback(\n    ({\n      updateWidgetManager,\n      deleteFile,\n    }: {\n      updateWidgetManager: boolean\n      deleteFile: boolean\n    }) => {\n      if (isNullOrUndefined(wavesurfer) || isNullOrUndefined(deleteFileUrl)) {\n        return\n      }\n      setRecordingUrl(null)\n      wavesurfer.empty()\n      if (deleteFile) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        uploadClient.deleteFile(deleteFileUrl)\n      }\n      setDeleteFileUrl(null)\n      setProgressTime(STARTING_TIME_STRING)\n      setRecordingTime(STARTING_TIME_STRING)\n      if (updateWidgetManager) {\n        widgetMgr.setFileUploaderStateValue(\n          element,\n          {},\n          { fromUi: true },\n          fragmentId\n        )\n      }\n      setShouldUpdatePlaybackTime(false)\n      if (notNullOrUndefined(recordingUrl)) {\n        URL.revokeObjectURL(recordingUrl)\n      }\n    },\n    [\n      deleteFileUrl,\n      recordingUrl,\n      uploadClient,\n      wavesurfer,\n      element,\n      widgetMgr,\n      fragmentId,\n      setRecordingTime,\n      setRecordingUrl,\n      setDeleteFileUrl,\n    ]\n  )\n\n  useEffect(() => {\n    if (isNullOrUndefined(widgetFormId)) return\n\n    const formClearHelper = new FormClearHelper()\n    formClearHelper.manageFormClearListener(widgetMgr, widgetFormId, () =>\n      handleClear({ updateWidgetManager: true, deleteFile: false })\n    )\n\n    return () => formClearHelper.disconnect()\n  }, [widgetFormId, handleClear, widgetMgr])\n\n  const initializeWaveSurfer = useCallback(() => {\n    if (waveSurferRef.current === null) return\n\n    const ws = WaveSurfer.create({\n      container: waveSurferRef.current,\n      waveColor: recordingUrl\n        ? blend(theme.colors.fadedText40, theme.colors.secondaryBg)\n        : theme.colors.primary,\n      progressColor: theme.colors.bodyText,\n      height:\n        convertRemToPx(theme.sizes.largestElementHeight) -\n        2 * WAVEFORM_PADDING,\n      barWidth: BAR_WIDTH,\n      barGap: BAR_GAP,\n      barRadius: BAR_RADIUS,\n      cursorWidth: CURSOR_WIDTH,\n      url: recordingUrl ?? undefined,\n    })\n\n    ws.on(\"timeupdate\", time => {\n      setProgressTime(formatTime(time * 1000)) // get from seconds to milliseconds\n    })\n\n    ws.on(\"pause\", () => {\n      forceRerender()\n    })\n\n    const rp = ws.registerPlugin(\n      RecordPlugin.create({\n        scrollingWaveform: false,\n        renderRecordedAudio: true,\n      })\n    )\n\n    rp.on(\"record-end\", blob => {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      transcodeAndUploadFile(blob)\n    })\n\n    rp.on(\"record-progress\", time => {\n      setRecordingTime(formatTime(time))\n    })\n\n    setWavesurfer(ws)\n    setRecordPlugin(rp)\n\n    return () => {\n      if (ws) ws.destroy()\n      if (rp) rp.destroy()\n    }\n    // note: intentionally excluding theme so that we don't have to recreate the wavesurfer instance\n    // and colors will be updated separately\n    // TODO: Update to match React best practices\n    // eslint-disable-next-line react-hooks/react-compiler\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [transcodeAndUploadFile])\n\n  useEffect(() => initializeWaveSurfer(), [initializeWaveSurfer])\n\n  useEffect(() => {\n    if (!isEqual(previousTheme, theme)) {\n      wavesurfer?.setOptions({\n        waveColor: recordingUrl\n          ? blend(theme.colors.fadedText40, theme.colors.secondaryBg)\n          : theme.colors.primary,\n        progressColor: theme.colors.bodyText,\n      })\n    }\n  }, [theme, previousTheme, recordingUrl, wavesurfer])\n\n  const onClickPlayPause = useCallback(() => {\n    if (wavesurfer) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      wavesurfer.playPause()\n      // This is because we want the time to be the duration of the audio when they stop recording,\n      // but once they start playing it, we want it to be the current time. So, once they start playing it\n      // we'll start keeping track of the playback time from that point onwards (until re-recording).\n      setShouldUpdatePlaybackTime(true)\n      // despite the state change above, this is still needed to force a rerender and make the time styling work\n      forceRerender()\n    }\n  }, [wavesurfer])\n\n  const startRecording = useCallback(async () => {\n    let audioDeviceId = activeAudioDeviceId\n\n    if (!hasRequestedMicPermissions) {\n      // this first part is to ensure we prompt for getting the user's media devices\n      await navigator.mediaDevices\n        .getUserMedia({ audio: true })\n        .then(() =>\n          RecordPlugin.getAvailableAudioDevices().then(devices => {\n            setAvailableAudioDevices(devices)\n            if (devices.length > 0) {\n              const { deviceId } = devices[0]\n              setActiveAudioDeviceId(deviceId)\n              audioDeviceId = deviceId\n            }\n          })\n        )\n        .catch(_err => {\n          setHasNoMicPermissions(true)\n        })\n      setHasRequestedMicPermissions(true)\n    }\n\n    if (!recordPlugin || !audioDeviceId || !wavesurfer) {\n      return\n    }\n\n    wavesurfer.setOptions({\n      waveColor: theme.colors.primary,\n    })\n\n    if (recordingUrl) {\n      handleClear({ updateWidgetManager: false, deleteFile: true })\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    recordPlugin.startRecording({ deviceId: audioDeviceId }).then(() => {\n      // Update the record button to show the user that they can stop recording\n      forceRerender()\n    })\n  }, [\n    activeAudioDeviceId,\n    recordPlugin,\n    theme,\n    wavesurfer,\n    recordingUrl,\n    handleClear,\n    hasRequestedMicPermissions,\n  ])\n\n  const stopRecording = useCallback(() => {\n    if (!recordPlugin) return\n\n    recordPlugin.stopRecording()\n\n    wavesurfer?.setOptions({\n      // We are blending this color instead of directly using the theme color (fadedText40)\n      // because the \"faded\" part of fadedText40 means introducing some transparency, which\n      // causes problems with the progress waveform color because wavesurfer is choosing to\n      // tint the waveColor with the progressColor instead of directly setting the progressColor.\n      // This means that the low opacity of fadedText40 causes the progress waveform to\n      // have the same opacity which makes it impossible to darken it enough to match designs.\n      // We fix this by blending the colors to figure out what the resulting color should be at\n      // full opacity, and we usee that color to set the waveColor.\n      waveColor: blend(theme.colors.fadedText40, theme.colors.secondaryBg),\n    })\n  }, [recordPlugin, wavesurfer, theme])\n\n  const downloadRecording = useDownloadUrl(recordingUrl, \"recording.wav\")\n\n  const isRecording = Boolean(recordPlugin?.isRecording())\n  const isPlaying = Boolean(wavesurfer?.isPlaying())\n\n  const isPlayingOrRecording = isRecording || isPlaying\n  const showPlaceholder = !isRecording && !recordingUrl && !hasNoMicPermissions\n\n  const showNoMicPermissionsOrPlaceholderOrError =\n    hasNoMicPermissions || showPlaceholder || isError\n\n  return (\n    <StyledAudioInputContainerDiv\n      className=\"stAudioInput\"\n      data-testid=\"stAudioInput\"\n    >\n      <WidgetLabel\n        label={element.label}\n        disabled={disabled}\n        labelVisibility={labelVisibilityProtoValueToEnum(\n          element.labelVisibility?.value\n        )}\n      >\n        {element.help && (\n          <StyledWidgetLabelHelp>\n            <TooltipIcon content={element.help} placement={Placement.TOP} />\n          </StyledWidgetLabelHelp>\n        )}\n      </WidgetLabel>\n      <StyledWaveformContainerDiv disabled={disabled}>\n        <Toolbar\n          isFullScreen={false}\n          disableFullscreenMode={true}\n          target={StyledWaveformContainerDiv}\n        >\n          {recordingUrl && (\n            <ToolbarAction\n              label=\"Download as WAV\"\n              icon={FileDownload}\n              onClick={() => downloadRecording()}\n            />\n          )}\n          {deleteFileUrl && (\n            <ToolbarAction\n              label=\"Clear recording\"\n              icon={Delete}\n              onClick={() =>\n                handleClear({ updateWidgetManager: true, deleteFile: true })\n              }\n            />\n          )}\n        </Toolbar>\n        <AudioInputActionButtons\n          isRecording={isRecording}\n          isPlaying={isPlaying}\n          isUploading={isUploading}\n          isError={isError}\n          recordingUrlExists={Boolean(recordingUrl)}\n          // eslint-disable-next-line @typescript-eslint/no-misused-promises\n          startRecording={startRecording}\n          stopRecording={stopRecording}\n          onClickPlayPause={onClickPlayPause}\n          onClear={() => {\n            handleClear({ updateWidgetManager: false, deleteFile: true })\n            setIsError(false)\n          }}\n          disabled={disabled || hasNoMicPermissions}\n        />\n        <StyledWaveformInnerDiv>\n          {isError && <AudioInputErrorState />}\n          {showPlaceholder && <Placeholder />}\n          {hasNoMicPermissions && <NoMicPermissions />}\n          <StyledWaveSurferDiv\n            data-testid=\"stAudioInputWaveSurfer\"\n            ref={waveSurferRef}\n            show={!showNoMicPermissionsOrPlaceholderOrError}\n          />\n        </StyledWaveformInnerDiv>\n        <StyledWaveformTimeCode\n          isPlayingOrRecording={isPlayingOrRecording}\n          disabled={disabled}\n          data-testid=\"stAudioInputWaveformTimeCode\"\n        >\n          {shouldUpdatePlaybackTime ? progressTime : recordingTime}\n        </StyledWaveformTimeCode>\n      </StyledWaveformContainerDiv>\n    </StyledAudioInputContainerDiv>\n  )\n}\n\nexport default memo(AudioInput)\n"],"names":["Mic","React.forwardRef","props","ref","attrs","React.createElement","EmotionIconBase","_extends","Pause","PlayArrow","Refresh","StopCircle","t","e","i","s","n","r","h","e$1","o","a","l","d","c","u","p","m","f","g","v","b","useDownloadUrl","url","filename","libConfig","enforceDownloadInNewTab","useContext","LibContext","useCallback","link","createDownloadLinkElement","style","display","document","body","appendChild","click","removeChild","useWidgetManagerElementState","widgetMgr","id","formId","key","defaultValue","useEffect","existingValue","getElementState","isNullOrUndefined","notNullOrUndefined","setElementState","state","setStateInternal","useState","setState","value","element","useMemo","onFormCleared","useFormClearHelper","uploadFiles","files","uploadClient","widgetInfo","fragmentId","fileUrls","fetchFileURLs","successfulUploads","failedUploads","map","file","error","ensureError","filesWithUrls","zip","Promise","all","fileUrl","uploadUrl","fileId","Error","uploadFile","push","setFileUploaderStateValue","FileUploaderStateProto","uploadedFileInfo","UploadedFileInfoProto","name","size","fromUi","StyledAudioInputContainerDiv","_styled","target","StyledWaveformContainerDiv","theme","disabled","height","sizes","largestElementHeight","width","background","colors","secondaryBg","borderRadius","radii","default","marginBottom","spacing","twoXS","alignItems","position","paddingLeft","xs","paddingRight","sm","border","widgetBorderColor","borderWidth","undefined","cursor","StyledWaveformInnerDiv","styles","StyledWaveSurferDiv","show","StyledWaveformTimeCode","isPlayingOrRecording","margin","fontFamily","fonts","monospace","color","fadedText40","bodyText","fadedText60","backgroundColor","fontSize","fontSizes","StyledErrorContainerDiv","StyledErrorTextSpan","StyledNoMicInputLearnMoreLink","textDecoration","linkUnderline","StyledPlaceholderContainerDiv","justifyContent","StyledPlaceholderDotsDiv","dotSize","opacity","backgroundSize","backgroundImage","fadedText10","backgroundRepeat","StyledActionButtonStopRecordingDiv","primary","padding","threeXS","red","StyledActionButtonStartRecordingDiv","StyledActionButtonPlayPauseDiv","StyledActionButtonContainerDiv","flexGrow","flexShrink","gap","marginRight","StyledWidgetLabelHelp","marginLeft","ActionButton","onClick","ariaLabel","iconContent","jsx","BaseButton","BaseButtonKind","BORDERLESS_ICON","Icon","AudioInputStopRecordingButton","stopRecording","AudioInputPlayPauseButton","isPlaying","onClickPlayPause","AudioInputStartRecordingButton","startRecording","AudioInputResetButton","AudioInputActionButtons","isRecording","isUploading","isError","recordingUrlExists","onClear","StyledSpinnerIcon","AudioInputActionButtons$1","memo","AudioInputErrorState","AudioInputErrorState$1","WAVEFORM_PADDING","BAR_WIDTH","BAR_GAP","BAR_RADIUS","CURSOR_WIDTH","STARTING_TIME_STRING","LOG","getLogger","convertFileToWav","fileBlob","audioContext","window","AudioContext","arrayBuffer","audioBuffer","decodeAudioData","HEADER_HEIGHT","numOfChan","numberOfChannels","sampleRate","length","buffer","ArrayBuffer","view","DataView","wavHeader","type","Object","entries","forEach","offset","intOffset","parseInt","writeString","setUint32","setUint16","channel","sample","Math","max","min","getChannelData","setInt16","wavArray","Uint8Array","Blob","string","setUint8","charCodeAt","formatTime","timeMs","seconds","floor","minutes","hours","remainingSeconds","remainingMinutes","displaySec","toString","padStart","displayMin","displayHours","NoMicPermissions","ENABLE_PERIPHERALS_DOCS_URL","NoMicPermissions$1","Placeholder","Placeholder$1","AudioInput","useEmotionTheme","previousTheme","usePrevious","wavesurfer","setWavesurfer","waveSurferRef","useRef","deleteFileUrl","setDeleteFileUrl","recordPlugin","setRecordPlugin","availableAudioDevices","setAvailableAudioDevices","activeAudioDeviceId","setActiveAudioDeviceId","recordingUrl","setRecordingUrl","setRerender","forceRerender","prev","progressTime","setProgressTime","recordingTime","setRecordingTime","shouldUpdatePlaybackTime","setShouldUpdatePlaybackTime","hasNoMicPermissions","setHasNoMicPermissions","hasRequestedMicPermissions","setHasRequestedMicPermissions","setIsUploading","setIsError","widgetId","widgetFormId","transcodeAndUploadFile","blob","setFormsWithUploadsInProgress","Set","wavBlob","convertAudioToWav","URL","createObjectURL","timestamp","Date","toISOString","slice","replace","File","then","upload","deleteUrl","finally","handleClear","updateWidgetManager","deleteFile","empty","revokeObjectURL","formClearHelper","FormClearHelper","manageFormClearListener","disconnect","initializeWaveSurfer","current","ws","WaveSurfer","create","container","waveColor","blend","progressColor","convertRemToPx","barWidth","barGap","barRadius","cursorWidth","on","time","rp","registerPlugin","RecordPlugin","scrollingWaveform","renderRecordedAudio","destroy","isEqual","setOptions","playPause","audioDeviceId","navigator","mediaDevices","getUserMedia","audio","getAvailableAudioDevices","devices","deviceId","catch","_err","downloadRecording","Boolean","showPlaceholder","showNoMicPermissionsOrPlaceholderOrError","jsxs","WidgetLabel","label","labelVisibilityProtoValueToEnum","labelVisibility","help","TooltipIcon","Placement","TOP","Toolbar","ToolbarAction","FileDownload","Delete","AudioInput$1"],"mappings":";;;;;;AAGO,IAAIA,KAAmBC,gBAAAA,EAAAA,WAAiB,SAAUC,GAAOC,GAAK;AACnE,MAAIC,IAAQ;AAAA,IACV,MAAQ;AAAA,IACR,OAAS;AAAA,EACb;AACE,SAAoBC,gBAAAA,EAAAA,cAAoBC,GAAiBC,EAAS;AAAA,IAChE,WAAWH;AAAA,IACX,mBAAmB;AAAA,IACnB,aAAa;AAAA,EACjB,GAAKF,GAAO;AAAA,IACR,KAAKC;AAAA,EACT,CAAG,GAAgBE,gBAAAA,EAAAA,cAAoB,KAAK;AAAA,IACxC,MAAM;AAAA,EACV,GAAkBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC1C,OAAO;AAAA,IACP,QAAQ;AAAA,EACZ,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,OAAO;AAAA,IACP,QAAQ;AAAA,EACZ,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,OAAO;AAAA,IACP,QAAQ;AAAA,EACZ,CAAG,CAAC,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC5C,GAAG;AAAA,EACP,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,GAAG;AAAA,EACP,CAAG,CAAC;AACJ,CAAC;AACDL,GAAI,cAAc;AC5BX,IAAIQ,KAAqBP,gBAAAA,EAAAA,WAAiB,SAAUC,GAAOC,GAAK;AACrE,MAAIC,IAAQ;AAAA,IACV,MAAQ;AAAA,IACR,OAAS;AAAA,EACb;AACE,SAAoBC,gBAAAA,EAAAA,cAAoBC,GAAiBC,EAAS;AAAA,IAChE,WAAWH;AAAA,IACX,mBAAmB;AAAA,IACnB,aAAa;AAAA,EACjB,GAAKF,GAAO;AAAA,IACR,KAAKC;AAAA,EACT,CAAG,GAAgBE,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,GAAG;AAAA,EACP,CAAG,CAAC;AACJ,CAAC;AACDG,GAAM,cAAc;ACnBb,IAAIC,KAAyBR,gBAAAA,EAAAA,WAAiB,SAAUC,GAAOC,GAAK;AACzE,MAAIC,IAAQ;AAAA,IACV,MAAQ;AAAA,IACR,OAAS;AAAA,EACb;AACE,SAAoBC,gBAAAA,EAAAA,cAAoBC,GAAiBC,EAAS;AAAA,IAChE,WAAWH;AAAA,IACX,mBAAmB;AAAA,IACnB,aAAa;AAAA,EACjB,GAAKF,GAAO;AAAA,IACR,KAAKC;AAAA,EACT,CAAG,GAAgBE,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,GAAG;AAAA,EACP,CAAG,CAAC;AACJ,CAAC;AACDI,GAAU,cAAc;ACnBjB,IAAIC,KAAuBT,gBAAAA,EAAAA,WAAiB,SAAUC,GAAOC,GAAK;AACvE,MAAIC,IAAQ;AAAA,IACV,MAAQ;AAAA,IACR,OAAS;AAAA,EACb;AACE,SAAoBC,gBAAAA,EAAAA,cAAoBC,GAAiBC,EAAS;AAAA,IAChE,WAAWH;AAAA,IACX,mBAAmB;AAAA,IACnB,aAAa;AAAA,EACjB,GAAKF,GAAO;AAAA,IACR,KAAKC;AAAA,EACT,CAAG,GAAgBE,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,MAAM;AAAA,IACN,GAAG;AAAA,EACP,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,GAAG;AAAA,EACP,CAAG,CAAC;AACJ,CAAC;AACDK,GAAQ,cAAc;AClBf,IAAIC,KAA0BV,gBAAAA,EAAAA,WAAiB,SAAUC,GAAOC,GAAK;AAC1E,MAAIC,IAAQ;AAAA,IACV,MAAQ;AAAA,IACR,OAAS;AAAA,EACb;AACE,SAAoBC,gBAAAA,EAAAA,cAAoBC,GAAiBC,EAAS;AAAA,IAChE,WAAWH;AAAA,IACX,mBAAmB;AAAA,IACnB,aAAa;AAAA,EACjB,GAAKF,GAAO;AAAA,IACR,KAAKC;AAAA,EACT,CAAG,GAAgBE,gBAAAA,EAAAA,cAAoB,KAAK;AAAA,IACxC,MAAM;AAAA,EACV,GAAkBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC1C,OAAO;AAAA,IACP,QAAQ;AAAA,EACZ,CAAG,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC3C,OAAO;AAAA,IACP,QAAQ;AAAA,EACZ,CAAG,CAAC,GAAgBA,gBAAAA,EAAAA,cAAoB,QAAQ;AAAA,IAC5C,UAAU;AAAA,IACV,GAAG;AAAA,EACP,CAAG,CAAC;AACJ,CAAC;AACDM,GAAW,cAAc;AC3BzB,SAASC,EAAEA,GAAEC,GAAEC,GAAEC,GAAE;AAAC,SAAO,KAAID,MAAIA,IAAE,UAAW,SAASE,GAAEC,GAAE;AAAC,aAAS,EAAEL,GAAE;AAAC,UAAG;AAAC,QAAAM,EAAEH,EAAE,KAAKH,CAAC,CAAC;AAAA,MAAC,SAAOA,GAAE;AAAC,QAAAK,EAAEL,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,aAAS,EAAEA,GAAE;AAAC,UAAG;AAAC,QAAAM,EAAEH,EAAE,MAAMH,CAAC,CAAC;AAAA,MAAC,SAAOA,GAAE;AAAC,QAAAK,EAAEL,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,aAASM,EAAEN,GAAE;AAAC,UAAIC;AAAE,MAAAD,EAAE,OAAKI,EAAEJ,EAAE,KAAK,KAAGC,IAAED,EAAE,OAAMC,aAAaC,IAAED,IAAE,IAAIC,EAAG,SAASF,GAAE;AAAC,QAAAA,EAAEC,CAAC;AAAA,MAAC,IAAK,KAAK,GAAE,CAAC;AAAA,IAAC;AAAC,IAAAK,GAAGH,IAAEA,EAAE,MAAMH,GAAEC,KAAG,CAAA,CAAE,GAAG,KAAI,CAAE;AAAA,EAAC,CAAC;AAAE;AAAoD,IAAAM,IAAC,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,YAAU,CAAA;AAAA,EAAE;AAAA,EAAC,GAAG,GAAE,GAAE,GAAE;AAAC,QAAG,KAAK,UAAU,CAAC,MAAI,KAAK,UAAU,CAAC,IAAE,oBAAI,QAAK,KAAK,UAAU,CAAC,EAAE,IAAI,CAAC,GAAiB,GAAE,MAAK;AAAC,YAAML,IAAE,MAAI;AAAC,aAAK,GAAG,GAAEA,CAAC,GAAE,KAAK,GAAG,GAAE,CAAC;AAAA,MAAC;AAAE,aAAO,KAAK,GAAG,GAAEA,CAAC,GAAEA;AAAA,IAAC;AAAC,WAAM,MAAI,KAAK,GAAG,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,GAAG,GAAE,GAAE;AAAC,QAAI;AAAE,KAAQ,IAAE,KAAK,UAAU,CAAC,OAA1B,QAAuC,MAAT,UAAY,EAAE,OAAO,CAAC;AAAA,EAAC;AAAA,EAAC,KAAK,GAAE,GAAE;AAAC,WAAO,KAAK,GAAG,GAAE,GAAE,EAAC,MAAK,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,SAAK,YAAU,CAAA;AAAA,EAAE;AAAA,EAAC,KAAK,MAAK,GAAE;AAAC,SAAK,UAAU,CAAC,KAAG,KAAK,UAAU,CAAC,EAAE,QAAS,CAAAF,MAAGA,EAAE,GAAG,CAAC,CAAC;AAAA,EAAE;AAAC;AAAC,MAAME,IAAE,EAAC,QAAO,SAASD,GAAEC,GAAE;AAAC,SAAOF,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAMA,IAAE,IAAI,aAAa,EAAC,YAAWE,EAAC,CAAC;AAAE,WAAOF,EAAE,gBAAgBC,CAAC,EAAE,QAAS,MAAID,EAAE,MAAK,CAAE;AAAA,EAAE,CAAC;AAAE,GAAE,cAAa,SAASA,GAAEC,GAAE;AAAC,SAAgB,OAAOD,EAAE,CAAC,KAApB,aAAwBA,IAAE,CAACA,CAAC,IAAG,SAASA,GAAE;AAAC,UAAMC,IAAED,EAAE,CAAC;AAAE,QAAGC,EAAE,KAAM,CAAAD,MAAGA,IAAE,KAAGA,IAAE,EAAE,GAAG;AAAC,YAAME,IAAED,EAAE;AAAO,UAAIE,IAAE;AAAE,eAAQH,IAAE,GAAEA,IAAEE,GAAEF,KAAI;AAAC,cAAME,IAAE,KAAK,IAAID,EAAED,CAAC,CAAC;AAAE,QAAAE,IAAEC,MAAIA,IAAED;AAAA,MAAE;AAAC,iBAAUD,KAAKD,EAAE,UAAQA,IAAE,GAAEA,IAAEE,GAAEF,IAAI,CAAAC,EAAED,CAAC,KAAGG;AAAA,IAAC;AAAA,EAAC,EAAEH,CAAC,GAAE,EAAC,UAASC,GAAE,QAAOD,EAAE,CAAC,EAAE,QAAO,YAAWA,EAAE,CAAC,EAAE,SAAOC,GAAE,kBAAiBD,EAAE,QAAO,gBAAe,OAAkBA,IAAE,CAAC,GAAE,iBAAgB,YAAY,UAAU,iBAAgB,eAAc,YAAY,UAAU,cAAa;AAAC,EAAC;AAAE,SAASG,GAAEH,GAAEC,GAAE;AAAC,QAAMC,IAAED,EAAE,QAAM,SAAS,gBAAgBA,EAAE,OAAMD,CAAC,IAAE,SAAS,cAAcA,CAAC;AAAE,aAAS,CAACA,GAAEI,CAAC,KAAI,OAAO,QAAQH,CAAC,EAAE,KAAgBD,MAAb,cAAgBI,EAAE,YAAS,CAACJ,GAAEC,CAAC,KAAI,OAAO,QAAQG,CAAC,EAAE,CAAAH,aAAa,OAAKC,EAAE,YAAYD,CAAC,IAAY,OAAOA,KAAjB,WAAmBC,EAAE,YAAY,SAAS,eAAeD,CAAC,CAAC,IAAEC,EAAE,YAAYC,GAAEH,GAAEC,CAAC,CAAC;AAAA,MAAM,CAAUD,MAAV,UAAY,OAAO,OAAOE,EAAE,OAAME,CAAC,IAAkBJ,MAAhB,gBAAkBE,EAAE,cAAYE,IAAEF,EAAE,aAAaF,GAAEI,EAAE,SAAQ,CAAE;AAAE,SAAOF;AAAC;AAAC,SAASE,GAAEJ,GAAEC,GAAEC,GAAE;AAAC,QAAME,IAAED,GAAEH,GAAEC,KAAG,CAAA,CAAE;AAAE,SAAgBC,GAAE,YAAYE,CAAC,GAAEA;AAAC;AAAC,IAAIC,KAAE,OAAO,OAAO,EAAC,WAAU,MAAK,eAAcD,IAAE,SAAQA,GAAC,CAAC;AAAE,MAAMI,KAAE,EAAC,WAAU,SAASP,GAAEC,GAAEC,GAAE;AAAC,SAAOH,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAMI,IAAE,MAAM,MAAMH,GAAEE,CAAC;AAAE,QAAGC,EAAE,UAAQ,IAAI,OAAM,IAAI,MAAM,mBAAmBH,CAAC,KAAKG,EAAE,MAAM,KAAKA,EAAE,UAAU,GAAG;AAAE,WAAO,SAASH,GAAEC,GAAE;AAACF,MAAAA,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,YAAG,CAACC,EAAE,QAAM,CAACA,EAAE,QAAQ;AAAO,cAAME,IAAEF,EAAE,KAAK,UAAS,GAAGG,IAAE,OAAOH,EAAE,QAAQ,IAAI,gBAAgB,CAAC,KAAG;AAAE,YAAII,IAAE;AAAE,cAAMG,IAAE,CAAAP,MAAGD,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAAK,KAAmBJ,GAAE,UAAS;AAAE,gBAAMD,IAAE,KAAK,MAAMK,IAAED,IAAE,GAAG;AAAE,UAAAF,EAAEF,CAAC;AAAA,QAAC,CAAC,GAAGS,IAAE,MAAIT,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,cAAIA;AAAE,cAAG;AAAC,YAAAA,IAAE,MAAMG,EAAE,KAAI;AAAA,UAAE,QAAS;AAAC;AAAA,UAAM;AAAC,UAAAH,EAAE,SAAOQ,EAAER,EAAE,KAAK,GAAE,MAAMS;QAAI,CAAC;AAAG,QAAAA,EAAC;AAAA,MAAE,CAAC;AAAA,IAAE,EAAEL,EAAE,MAAK,GAAGF,CAAC,GAAEE,EAAE,KAAI;AAAA,EAAE,CAAC;AAAE,EAAC;AAAE,MAAMK,WAAUR,EAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAK,GAAG,KAAK,kBAAgB,IAAG,EAAE,SAAO,KAAK,QAAM,EAAE,OAAM,KAAK,kBAAgB,MAAI,KAAK,QAAM,SAAS,cAAc,OAAO,GAAE,EAAE,kBAAgB,KAAK,MAAM,WAAS,KAAI,EAAE,aAAW,KAAK,MAAM,WAAS,KAAU,EAAE,gBAAR,QAAsB,KAAK,aAAa,WAAW,MAAI;AAAC,MAAM,EAAE,gBAAR,SAAuB,KAAK,MAAM,eAAa,EAAE;AAAA,IAAa,GAAG,EAAC,MAAK,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,aAAa,GAAE,GAAE,GAAE;AAAC,WAAO,KAAK,MAAM,iBAAiB,GAAE,GAAE,CAAC,GAAE,MAAI,KAAK,MAAM,oBAAoB,GAAE,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,WAAO,KAAK,MAAM,cAAY,KAAK,MAAM,OAAK;AAAA,EAAE;AAAA,EAAC,YAAW;AAAC,UAAM,IAAE,KAAK,OAAM;AAAG,MAAE,WAAW,OAAO,KAAG,IAAI,gBAAgB,CAAC;AAAA,EAAC;AAAA,EAAC,YAAY,GAAE;AAAC,WAAW,KAAK,MAAM,YAAY,CAAC,MAA7B;AAAA,EAA8B;AAAA,EAAC,OAAO,GAAE,GAAE;AAAC,UAAM,IAAE,KAAK,OAAM;AAAG,QAAG,KAAG,MAAI,EAAE;AAAO,SAAK,UAAS;AAAG,UAAM,IAAE,aAAa,SAAO,KAAK,YAAY,EAAE,IAAI,KAAG,CAAC,KAAG,IAAI,gBAAgB,CAAC,IAAE;AAAE,QAAG,KAAG,KAAK,MAAM,gBAAgB,KAAK,GAAE,KAAG,EAAE,KAAG;AAAC,WAAK,MAAM,MAAI;AAAA,IAAC,QAAS;AAAC,WAAK,MAAM,MAAI;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,oBAAkB,KAAK,MAAM,SAAQ,KAAK,MAAM,OAAM,GAAG,KAAK,UAAS,GAAG,KAAK,MAAM,gBAAgB,KAAK,GAAE,KAAK,MAAM,KAAI;AAAA,EAAG;AAAA,EAAC,gBAAgB,GAAE;AAAC,SAAK,QAAM;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAOD,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAG;AAAC,eAAO,MAAM,KAAK,MAAM,KAAI;AAAA,MAAE,SAAO,GAAE;AAAC,YAAG,aAAa,gBAA6B,EAAE,SAAjB,aAAsB;AAAO,cAAM;AAAA,MAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,SAAK,MAAM,MAAK;AAAA,EAAE;AAAA,EAAC,YAAW;AAAC,WAAM,CAAC,KAAK,MAAM,UAAQ,CAAC,KAAK,MAAM;AAAA,EAAK;AAAA,EAAC,QAAQ,GAAE;AAAC,SAAK,MAAM,cAAY,KAAK,IAAI,GAAE,KAAK,IAAI,GAAE,KAAK,aAAa,CAAC;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,WAAO,KAAK,MAAM;AAAA,EAAQ;AAAA,EAAC,iBAAgB;AAAC,WAAO,KAAK,MAAM;AAAA,EAAW;AAAA,EAAC,YAAW;AAAC,WAAO,KAAK,MAAM;AAAA,EAAM;AAAA,EAAC,UAAU,GAAE;AAAC,SAAK,MAAM,SAAO;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,WAAO,KAAK,MAAM;AAAA,EAAK;AAAA,EAAC,SAAS,GAAE;AAAC,SAAK,MAAM,QAAM;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,WAAO,KAAK,MAAM;AAAA,EAAY;AAAA,EAAC,YAAW;AAAC,WAAO,KAAK,MAAM;AAAA,EAAO;AAAA,EAAC,gBAAgB,GAAE,GAAE;AAAC,IAAM,KAAN,SAAU,KAAK,MAAM,iBAAe,IAAG,KAAK,MAAM,eAAa;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,WAAO,KAAK;AAAA,EAAK;AAAA,EAAC,UAAU,GAAE;AAAC,WAAO,KAAK,MAAM,UAAU,CAAC;AAAA,EAAC;AAAC;AAAC,MAAMM,UAAUL,EAAC;AAAA,EAAC,YAAY,GAAE,GAAE;AAAC,UAAK,GAAG,KAAK,WAAS,CAAA,GAAG,KAAK,eAAa,IAAG,KAAK,YAAU,MAAK,KAAK,iBAAe,MAAK,KAAK,qBAAmB,GAAE,KAAK,aAAW,IAAG,KAAK,gBAAc,IAAG,KAAK,sBAAoB,CAAA,GAAG,KAAK,gBAAc,CAAA,GAAG,KAAK,UAAQ;AAAE,UAAM,IAAE,KAAK,2BAA2B,EAAE,SAAS;AAAE,SAAK,SAAO;AAAE,UAAK,CAAC,GAAE,CAAC,IAAE,KAAK,SAAQ;AAAG,MAAE,YAAY,CAAC,GAAE,KAAK,YAAU,GAAE,KAAK,kBAAgB,EAAE,cAAc,SAAS,GAAE,KAAK,UAAQ,EAAE,cAAc,UAAU,GAAE,KAAK,gBAAc,EAAE,cAAc,WAAW,GAAE,KAAK,kBAAgB,EAAE,cAAc,WAAW,GAAE,KAAK,SAAO,EAAE,cAAc,SAAS,GAAE,KAAG,EAAE,YAAY,CAAC,GAAE,KAAK,WAAU;AAAA,EAAE;AAAA,EAAC,2BAA2B,GAAE;AAAC,QAAI;AAAE,QAAa,OAAO,KAAjB,WAAmB,IAAE,SAAS,cAAc,CAAC,IAAE,aAAa,gBAAc,IAAE,IAAG,CAAC,EAAE,OAAM,IAAI,MAAM,qBAAqB;AAAE,WAAO;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,UAAM,IAAE,CAAAD,MAAG;AAAC,YAAMC,IAAE,KAAK,QAAQ,sBAAqB,GAAGC,IAAEF,EAAE,UAAQC,EAAE,MAAKE,IAAEH,EAAE,UAAQC,EAAE;AAAI,aAAM,CAACC,IAAED,EAAE,OAAME,IAAEF,EAAE,MAAM;AAAA,IAAC;AAAE,QAAG,KAAK,QAAQ,iBAAiB,SAAS,OAAG;AAAC,YAAK,CAAC,GAAE,CAAC,IAAE,EAAE,CAAC;AAAE,WAAK,KAAK,SAAQ,GAAE,CAAC;AAAA,IAAC,IAAI,KAAK,QAAQ,iBAAiB,YAAY,OAAG;AAAC,YAAK,CAAC,GAAE,CAAC,IAAE,EAAE,CAAC;AAAE,WAAK,KAAK,YAAW,GAAE,CAAC;AAAA,IAAC,CAAC,GAAQ,KAAK,QAAQ,eAAlB,MAAwC,OAAO,KAAK,QAAQ,cAA9B,YAA0C,KAAK,SAAQ,GAAG,KAAK,gBAAgB,iBAAiB,UAAU,MAAI;AAAC,YAAK,EAAC,YAAWD,GAAE,aAAYC,GAAE,aAAYC,EAAC,IAAE,KAAK,iBAAgBC,IAAEH,IAAEC,GAAEG,KAAGJ,IAAEE,KAAGD;AAAE,WAAK,KAAK,UAASE,GAAEC,GAAEJ,GAAEA,IAAEE,CAAC;AAAA,IAAC,CAAC,GAAe,OAAO,kBAAnB,YAAkC;AAAC,YAAMF,IAAE,KAAK,YAAY,GAAG;AAAE,WAAK,iBAAe,IAAI,eAAgB,MAAI;AAAC,QAAAA,EAAC,EAAG,KAAM,MAAI,KAAK,kBAAiB,GAAK,MAAO,MAAI;AAAA,QAAC,CAAC;AAAA,MAAE,CAAC,GAAG,KAAK,eAAe,QAAQ,KAAK,eAAe;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,UAAM,IAAE,KAAK,OAAO;AAAY,UAAI,KAAK,sBAA6B,KAAK,QAAQ,WAAtB,WAA+B,KAAK,qBAAmB,GAAE,KAAK,SAAQ;AAAA,EAAG;AAAA,EAAC,WAAU;AAAC,SAAK,cAAc,KAAK,SAAS,GAAE,GAAE,GAAE,GAAE,IAAE,GAAEK,IAAE,GAAEG,IAAE,KAAI;AAAC,UAAG,CAAC,EAAE,QAAM,MAAI;AAAA,MAAC;AAAE,YAAMC,IAAE,WAAW,mBAAmB,EAAE;AAAQ,UAAIH,IAAE,MAAI;AAAA,MAAC;AAAE,YAAM,IAAE,CAAAI,MAAG;AAAC,YAAGA,EAAE,WAASL,EAAE;AAAO,QAAAK,EAAE,eAAc,GAAGA,EAAE,gBAAe;AAAG,YAAIC,IAAED,EAAE,SAAQE,IAAEF,EAAE,SAAQG,IAAE;AAAG,cAAMC,IAAE,KAAK,IAAG,GAAGC,IAAE,CAAAZ,MAAG;AAAC,cAAGA,EAAE,eAAc,GAAGA,EAAE,gBAAe,GAAGM,KAAG,KAAK,QAAMK,IAAEN,EAAE;AAAO,gBAAMH,IAAEF,EAAE,SAAQG,IAAEH,EAAE,SAAQO,IAAEL,IAAEM,GAAEI,IAAET,IAAEM;AAAE,cAAGC,KAAG,KAAK,IAAIH,CAAC,IAAE,KAAG,KAAK,IAAIK,CAAC,IAAE,GAAE;AAAC,kBAAMZ,IAAE,EAAE,sBAAqB,GAAG,EAAC,MAAKC,GAAE,KAAII,EAAC,IAAEL;AAAE,YAAAU,MAAa,IAAEF,IAAEP,GAAEQ,IAAEJ,CAAC,GAAEK,IAAE,KAAI,EAAEH,GAAEK,GAAEV,IAAED,GAAEE,IAAEE,CAAC,GAAEG,IAAEN,GAAEO,IAAEN;AAAA,UAAC;AAAA,QAAC,GAAEU,IAAE,CAAAf,MAAG;AAAC,cAAGY,GAAE;AAAC,kBAAMX,IAAED,EAAE,SAAQG,IAAEH,EAAE,SAAQI,IAAE,EAAE,yBAAwB,EAAC,MAAKG,GAAE,KAAIC,EAAC,IAAEJ;AAAE,YAAS,IAAEH,IAAEM,GAAEJ,IAAEK,CAAC;AAAA,UAAC;AAAC,UAAAH,EAAC;AAAA,QAAE,GAAEW,IAAE,CAAAjB,MAAG;AAAC,UAAAA,EAAE,iBAAeA,EAAE,kBAAgB,SAAS,mBAAiBgB,EAAEhB,CAAC;AAAA,QAAC,GAAEkB,IAAE,CAAAlB,MAAG;AAAC,UAAAa,MAAIb,EAAE,gBAAe,GAAGA,EAAE,eAAc;AAAA,QAAG,GAAEmB,IAAE,CAAAnB,MAAG;AAAC,UAAAa,KAAGb,EAAE,eAAc;AAAA,QAAE;AAAE,iBAAS,iBAAiB,eAAce,CAAC,GAAE,SAAS,iBAAiB,aAAYC,CAAC,GAAE,SAAS,iBAAiB,cAAaC,CAAC,GAAE,SAAS,iBAAiB,iBAAgBA,CAAC,GAAE,SAAS,iBAAiB,aAAYE,GAAE,EAAC,SAAQ,GAAE,CAAC,GAAE,SAAS,iBAAiB,SAAQD,GAAE,EAAC,SAAQ,GAAE,CAAC,GAAEZ,IAAE,MAAI;AAAC,mBAAS,oBAAoB,eAAcS,CAAC,GAAE,SAAS,oBAAoB,aAAYC,CAAC,GAAE,SAAS,oBAAoB,cAAaC,CAAC,GAAE,SAAS,oBAAoB,iBAAgBA,CAAC,GAAE,SAAS,oBAAoB,aAAYE,CAAC,GAAE,WAAY,MAAI;AAAC,qBAAS,oBAAoB,SAAQD,GAAE,EAAC,SAAQ,GAAE,CAAC;AAAA,UAAC,GAAG,EAAE;AAAA,QAAC;AAAA,MAAC;AAAE,aAAO,EAAE,iBAAiB,eAAc,CAAC,GAAE,MAAI;AAAC,QAAAZ,EAAC,GAAG,EAAE,oBAAoB,eAAc,CAAC;AAAA,MAAC;AAAA,IAAC,EAAE,KAAK,SAAS,CAAC,GAAE,GAAE,MAAI;AAAC,WAAK,KAAK,QAAO,KAAK,IAAI,GAAE,KAAK,IAAI,GAAE,IAAE,KAAK,QAAQ,wBAAwB,KAAK,CAAC,CAAC;AAAA,IAAC,GAAI,OAAG;AAAC,WAAK,aAAW,IAAG,KAAK,KAAK,aAAY,KAAK,IAAI,GAAE,KAAK,IAAI,GAAE,IAAE,KAAK,QAAQ,sBAAqB,EAAG,KAAK,CAAC,CAAC;AAAA,IAAC,GAAI,OAAG;AAAC,WAAK,aAAW,IAAG,KAAK,KAAK,WAAU,KAAK,IAAI,GAAE,KAAK,IAAI,GAAE,IAAE,KAAK,QAAQ,wBAAwB,KAAK,CAAC,CAAC;AAAA,IAAC,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,UAAU,GAAE,GAAE;AAAC,QAAI;AAAE,UAAM,MAAW,IAAE,KAAK,eAAf,QAAoC,MAAT,SAAW,SAAO,EAAE,qBAAmB;AAAE,QAAS,KAAN,KAAQ,QAAO;AAAI,QAAG,CAAC,MAAM,OAAO,CAAC,CAAC,EAAE,QAAO,OAAO,CAAC;AAAE,QAAY,MAAT,QAAW;AAAC,YAAMN,IAAE,KAAK,OAAO,gBAAc;AAAI,aAAsB,GAAE,MAAO,CAAAA,MAAG,CAACA,EAAE,WAAWA,IAAE,IAAEA;AAAA,IAAC;AAAC,WAAO;AAAA,EAAG;AAAA,EAAC,WAAU;AAAC,UAAM,IAAE,SAAS,cAAc,KAAK,GAAE,IAAE,EAAE,aAAa,EAAC,MAAK,OAAM,CAAC,GAAE,IAAE,KAAK,QAAQ,YAAoB,OAAO,KAAK,QAAQ,YAA9B,WAAuC,KAAK,QAAQ,SAAS,QAAQ,MAAK,EAAE,IAAE;AAAG,WAAO,EAAE,YAAU;AAAA,cAAiB,IAAE,WAAW,CAAC,MAAI,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAguB,KAAK,UAAU,KAAK,QAAQ,QAAO,KAAK,QAAQ,aAAa,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyjC,CAAC,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,WAAW,GAAE;AAAC,QAAG,KAAK,QAAQ,cAAY,EAAE,WAAU;AAAC,YAAM,IAAE,KAAK,2BAA2B,EAAE,SAAS;AAAE,QAAE,YAAY,KAAK,SAAS,GAAE,KAAK,SAAO;AAAA,IAAC;AAAC,IAAK,EAAE,eAAP,MAA6B,OAAO,KAAK,QAAQ,cAA9B,YAA0C,KAAK,SAAQ,GAAG,KAAK,UAAQ,GAAE,KAAK,SAAQ;AAAA,EAAE;AAAA,EAAC,aAAY;AAAC,WAAO,KAAK;AAAA,EAAO;AAAA,EAAC,WAAU;AAAC,WAAO,KAAK,gBAAgB;AAAA,EAAW;AAAA,EAAC,YAAW;AAAC,WAAO,KAAK,gBAAgB;AAAA,EAAU;AAAA,EAAC,UAAU,GAAE;AAAC,SAAK,gBAAgB,aAAW;AAAA,EAAC;AAAA,EAAC,oBAAoB,GAAE;AAAC,UAAK,EAAC,aAAY,EAAC,IAAE,KAAK,iBAAgB,IAAE,IAAE;AAAE,SAAK,UAAU,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,QAAI,GAAE;AAAE,SAAK,cAAc,QAAS,CAAAA,MAAGA,EAAC,CAAE,GAAG,KAAK,UAAU,OAAM,IAAW,IAAE,KAAK,oBAAf,QAAyC,MAAT,UAAY,EAAE,WAAU,IAAW,IAAE,KAAK,yBAAf,QAA8C,MAAT,UAAY,EAAE,QAAS,CAAAA,MAAGA,EAAC,CAAE,GAAG,KAAK,sBAAoB,CAAA;AAAA,EAAE;AAAA,EAAC,YAAY,IAAE,IAAG;AAAC,QAAI,GAAE;AAAE,UAAM,IAAE,MAAI;AAAC,WAAG,aAAa,CAAC,GAAE,KAAG,EAAC;AAAA,IAAE;AAAE,WAAO,KAAK,SAAS,KAAK,CAAC,GAAE,MAAI,IAAI,QAAS,CAAC,GAAEK,MAAI;AAAC,QAAC,GAAG,IAAEA,GAAE,IAAE,WAAY,MAAI;AAAC,YAAE,QAAO,IAAE,QAAO,EAAC;AAAA,MAAE,GAAG,CAAC;AAAA,IAAC;EAAG;AAAA,EAAC,mBAAmB,GAAE;AAAC,QAAG,CAAC,MAAM,QAAQ,CAAC,EAAE,QAAO,KAAG;AAAG,QAAG,EAAE,SAAO,EAAE,QAAO,EAAE,CAAC,KAAG;AAAG,UAAM,IAAE,SAAS,cAAc,QAAQ,GAAE,IAAE,EAAE,WAAW,IAAI,GAAE,IAAE,EAAE,UAAQ,OAAO,oBAAkB,IAAG,IAAE,EAAE,qBAAqB,GAAE,GAAE,GAAE,CAAC,GAAEA,IAAE,KAAG,EAAE,SAAO;AAAG,WAAO,EAAE,QAAS,CAACL,GAAEC,MAAI;AAAC,YAAMC,IAAED,IAAEI;AAAE,QAAE,aAAaH,GAAEF,CAAC;AAAA,IAAC,CAAC,GAAG;AAAA,EAAC;AAAA,EAAC,gBAAe;AAAC,WAAO,KAAK,IAAI,GAAE,OAAO,oBAAkB,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAE,GAAE,GAAE,GAAE;AAAC,UAAM,IAAE,EAAE,CAAC,GAAEK,IAAE,EAAE,CAAC,KAAG,EAAE,CAAC,GAAEG,IAAE,EAAE,QAAO,EAAC,OAAMC,GAAE,QAAOH,EAAC,IAAE,EAAE,QAAO,IAAEA,IAAE,GAAEK,IAAE,KAAK,cAAa,GAAGC,IAAE,EAAE,WAAS,EAAE,WAASD,IAAE,GAAEE,IAAE,EAAE,SAAO,EAAE,SAAOF,IAAE,EAAE,WAASC,IAAE,IAAE,GAAEE,IAAE,EAAE,aAAW,GAAEC,IAAEN,KAAGG,IAAEC,KAAGL,GAAEQ,IAAEF,KAAG,eAAc,IAAE,cAAY;AAAO,MAAE,UAAS;AAAG,QAAIG,IAAE,GAAEC,IAAE,GAAEC,IAAE;AAAE,aAAQnB,IAAE,GAAEA,KAAGQ,GAAER,KAAI;AAAC,YAAMQ,IAAE,KAAK,MAAMR,IAAEe,CAAC;AAAE,UAAGP,IAAES,GAAE;AAAC,cAAMjB,IAAE,KAAK,MAAMkB,IAAE,IAAE,CAAC,GAAEd,IAAEJ,IAAE,KAAK,MAAMmB,IAAE,IAAE,CAAC,KAAG;AAAE,YAAId,IAAE,IAAEL;AAAE,QAAQ,EAAE,aAAV,QAAmBK,IAAE,IAAa,EAAE,aAAb,aAAwBA,IAAEC,IAAEF,IAAG,EAAEY,CAAC,EAAEC,KAAGL,IAAEC,IAAGR,GAAEO,GAAER,GAAEU,CAAC,GAAEG,IAAET,GAAEU,IAAE,GAAEC,IAAE;AAAA,MAAC;AAAC,YAAMV,IAAE,KAAK,IAAI,EAAET,CAAC,KAAG,CAAC,GAAEW,IAAE,KAAK,IAAIN,EAAEL,CAAC,KAAG,CAAC;AAAE,MAAAS,IAAES,MAAIA,IAAET,IAAGE,IAAEQ,MAAIA,IAAER;AAAA,IAAE;AAAC,MAAE,KAAI,GAAG,EAAE,UAAS;AAAA,EAAE;AAAA,EAAC,mBAAmB,GAAE,GAAE,GAAE,GAAE;AAAC,UAAM,IAAE,CAAAV,MAAG;AAAC,YAAMG,IAAE,EAAEH,CAAC,KAAG,EAAE,CAAC,GAAEI,IAAED,EAAE,QAAO,EAAC,QAAOI,EAAC,IAAE,EAAE,QAAOC,IAAED,IAAE,GAAEF,IAAE,EAAE,OAAO,QAAMD;AAAE,QAAE,OAAO,GAAEI,CAAC;AAAE,UAAIC,IAAE,GAAEC,IAAE;AAAE,eAAQX,IAAE,GAAEA,KAAGK,GAAEL,KAAI;AAAC,cAAMK,IAAE,KAAK,MAAML,IAAEM,CAAC;AAAE,YAAGD,IAAEK,GAAE;AAAC,gBAAMV,IAAES,KAAG,KAAK,MAAME,IAAEF,IAAE,CAAC,KAAG,MAAQR,MAAJ,IAAM,KAAG;AAAG,YAAE,OAAOS,GAAEV,CAAC,GAAEU,IAAEL,GAAEM,IAAE;AAAA,QAAC;AAAC,cAAMH,IAAE,KAAK,IAAIJ,EAAEJ,CAAC,KAAG,CAAC;AAAE,QAAAQ,IAAEG,MAAIA,IAAEH;AAAA,MAAE;AAAC,QAAE,OAAOE,GAAED,CAAC;AAAA,IAAC;AAAE,MAAE,UAAS,GAAG,EAAE,CAAC,GAAE,EAAE,CAAC,GAAE,EAAE,KAAI,GAAG,EAAE,UAAS;AAAA,EAAE;AAAA,EAAC,eAAe,GAAE,GAAE,GAAE;AAAC,QAAG,EAAE,YAAU,KAAK,mBAAmB,EAAE,SAAS,GAAE,EAAE,eAAe,QAAO,KAAK,EAAE,eAAe,GAAE,CAAC;AAAE,QAAI,IAAE,EAAE,aAAW;AAAE,QAAG,EAAE,WAAU;AAAC,YAAMR,IAAE,MAAM,KAAK,EAAE,CAAC,CAAC,EAAE,OAAQ,CAACD,GAAEC,MAAI,KAAK,IAAID,GAAE,KAAK,IAAIC,CAAC,CAAC,GAAG,CAAC;AAAE,UAAEA,IAAE,IAAEA,IAAE;AAAA,IAAC;AAAC,MAAE,YAAU,EAAE,UAAQ,EAAE,WAAS,KAAK,kBAAkB,GAAE,GAAE,GAAE,CAAC,IAAE,KAAK,mBAAmB,GAAE,GAAE,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAE,GAAE,GAAE,GAAE,GAAEI,GAAEG,GAAE;AAAC,UAAMC,IAAE,KAAK,cAAa,GAAGH,IAAE,SAAS,cAAc,QAAQ;AAAE,IAAAA,EAAE,QAAM,KAAK,MAAM,IAAEG,CAAC,GAAEH,EAAE,SAAO,KAAK,MAAM,IAAEG,CAAC,GAAEH,EAAE,MAAM,QAAM,GAAG,CAAC,MAAKA,EAAE,MAAM,SAAO,GAAG,CAAC,MAAKA,EAAE,MAAM,OAAK,GAAG,KAAK,MAAM,CAAC,CAAC,MAAKD,EAAE,YAAYC,CAAC;AAAE,UAAM,IAAEA,EAAE,WAAW,IAAI;AAAE,QAAG,KAAK,eAAe,GAAE,GAAE,CAAC,GAAEA,EAAE,QAAM,KAAGA,EAAE,SAAO,GAAE;AAAC,YAAMN,IAAEM,EAAE,UAAS,GAAGJ,IAAEF,EAAE,WAAW,IAAI;AAAE,MAAAE,EAAE,UAAUI,GAAE,GAAE,CAAC,GAAEJ,EAAE,2BAAyB,aAAYA,EAAE,YAAU,KAAK,mBAAmB,EAAE,aAAa,GAAEA,EAAE,SAAS,GAAE,GAAEI,EAAE,OAAMA,EAAE,MAAM,GAAEE,EAAE,YAAYR,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAE,GAAE,GAAE,GAAE,GAAEK,GAAE;AAAC,UAAMG,IAAE,KAAK,iBAAgB,EAAC,aAAYC,EAAC,IAAE,KAAK,iBAAgBC,IAAE,IAAEF;AAAE,QAAIG,IAAE,KAAK,IAAIL,EAAE,kBAAiBG,GAAEC,CAAC,GAAEE,IAAE,CAAA;AAAG,QAAG,EAAE,YAAU,EAAE,QAAO;AAAC,YAAMZ,IAAE,EAAE,YAAU,KAAGE,IAAEF,KAAG,EAAE,UAAQA,IAAE;AAAG,MAAAW,IAAET,KAAG,MAAIS,IAAE,KAAK,MAAMA,IAAET,CAAC,IAAEA;AAAA,IAAE;AAAC,QAAOS,MAAJ,EAAM;AAAO,UAAM,IAAE,CAAAT,MAAG;AAAqB,UAAjBA,IAAE,KAAGA,KAAGY,KAAYF,EAAEV,CAAC,EAAE;AAAO,MAAAU,EAAEV,CAAC,IAAE;AAAG,YAAMM,IAAEN,IAAES;AAAE,UAAIF,IAAE,KAAK,IAAIC,IAAEF,GAAEG,CAAC;AAAE,UAAG,EAAE,YAAU,EAAE,QAAO;AAAC,cAAMX,IAAE,EAAE,YAAU,KAAGE,IAAEF,KAAG,EAAE,UAAQA,IAAE;AAAG,QAAAS,IAAE,KAAK,MAAMA,IAAEP,CAAC,IAAEA;AAAA,MAAC;AAAC,UAAGO,KAAG,EAAE;AAAO,YAAMH,IAAE,EAAE,IAAK,CAAAN,MAAG;AAAC,cAAMC,IAAE,KAAK,MAAMO,IAAEE,IAAEV,EAAE,MAAM,GAAEE,IAAE,KAAK,OAAOM,IAAEC,KAAGC,IAAEV,EAAE,MAAM;AAAE,eAAOA,EAAE,MAAMC,GAAEC,CAAC;AAAA,MAAC;AAAI,WAAK,mBAAmBI,GAAE,GAAEG,GAAE,GAAED,GAAE,GAAEH,CAAC;AAAA,IAAC,GAAES,IAAE,KAAK,KAAKJ,IAAEC,CAAC;AAAE,QAAG,CAAC,KAAK,cAAa;AAAC,eAAQX,IAAE,GAAEA,IAAEc,GAAEd,IAAI,GAAEA,CAAC;AAAE;AAAA,IAAM;AAAC,UAAMe,IAAE,KAAK,gBAAgB,aAAWL,GAAEM,IAAE,KAAK,MAAMD,IAAED,CAAC;AAAE,QAAG,EAAEE,IAAE,CAAC,GAAE,EAAEA,CAAC,GAAE,EAAEA,IAAE,CAAC,GAAEF,IAAE,GAAE;AAAC,YAAMd,IAAE,KAAK,GAAG,UAAU,MAAI;AAAC,cAAK,EAAC,YAAWA,EAAC,IAAE,KAAK,iBAAgBC,IAAE,KAAK,MAAMD,IAAEU,IAAEI,CAAC;AAAE,eAAO,KAAKF,CAAC,EAAE,SAAON,EAAE,cAAY,EAAE,YAAU,IAAGD,EAAE,YAAU,IAAGO,IAAE,CAAA,IAAI,EAAEX,IAAE,CAAC,GAAE,EAAEA,CAAC,GAAE,EAAEA,IAAE,CAAC;AAAA,MAAC,CAAC;AAAG,WAAK,oBAAoB,KAAKD,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,cAAc,GAAE,GAAE,GAAE,GAAE;AAAC,QAAG,EAAC,SAAQ,EAAC,IAAE,GAAEK,IAAE,SAASL,GAAEC,GAAE;AAAC,UAAIC,IAAE,CAAA;AAAG,eAAQC,KAAKH,EAAE,QAAO,UAAU,eAAe,KAAKA,GAAEG,CAAC,KAAGF,EAAE,QAAQE,CAAC,IAAE,MAAID,EAAEC,CAAC,IAAEH,EAAEG,CAAC;AAAG,UAASH,KAAN,QAAqB,OAAO,OAAO,yBAA1B,YAAgD;AAAC,YAAII,IAAE;AAAE,aAAID,IAAE,OAAO,sBAAsBH,CAAC,GAAEI,IAAED,EAAE,QAAOC,IAAI,CAAAH,EAAE,QAAQE,EAAEC,CAAC,CAAC,IAAE,KAAG,OAAO,UAAU,qBAAqB,KAAKJ,GAAEG,EAAEC,CAAC,CAAC,MAAIF,EAAEC,EAAEC,CAAC,CAAC,IAAEJ,EAAEG,EAAEC,CAAC,CAAC;AAAA,MAAE;AAAC,aAAOF;AAAA,IAAC,EAAE,GAAE,CAAC,SAAS,CAAC;AAAE,UAAMM,IAAE,SAAS,cAAc,KAAK,GAAEC,IAAE,KAAK,UAAUJ,EAAE,QAAOA,EAAE,aAAa;AAAE,IAAAG,EAAE,MAAM,SAAO,GAAGC,CAAC,MAAK,KAAG,IAAE,MAAID,EAAE,MAAM,YAAU,IAAIC,CAAC,OAAM,KAAK,cAAc,MAAM,YAAU,GAAGA,CAAC,MAAK,KAAK,cAAc,YAAYD,CAAC;AAAE,UAAMF,IAAEE,EAAE,UAAS;AAAG,SAAK,gBAAgB,YAAYF,CAAC,GAAE,KAAK,kBAAkB,GAAED,GAAE,GAAEI,GAAED,GAAEF,CAAC;AAAA,EAAC;AAAA,EAAC,OAAOL,GAAE;AAAC,WAAOD,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAIA;AAAE,WAAK,SAAS,QAAS,CAAAA,MAAGA,EAAC,CAAE,GAAG,KAAK,WAAS,CAAA,GAAG,KAAK,cAAc,YAAU,IAAG,KAAK,gBAAgB,YAAU,IAAS,KAAK,QAAQ,SAAnB,SAA2B,KAAK,gBAAgB,MAAM,QAAgB,OAAO,KAAK,QAAQ,SAA9B,WAAoC,GAAG,KAAK,QAAQ,KAAK,OAAK,KAAK,QAAQ;AAAO,YAAM,IAAE,KAAK,cAAa,GAAG,IAAE,KAAK,gBAAgB,aAAY,IAAE,KAAK,KAAKC,EAAE,YAAU,KAAK,QAAQ,eAAa,EAAE;AAAE,WAAK,eAAa,IAAE;AAAE,YAAMI,IAAE,KAAK,QAAQ,cAAY,CAAC,KAAK,cAAaG,KAAGH,IAAE,IAAE,KAAG;AAAE,UAAG,KAAK,QAAQ,MAAM,QAAMA,IAAE,SAAO,GAAG,CAAC,MAAK,KAAK,gBAAgB,MAAM,YAAU,KAAK,eAAa,SAAO,UAAS,KAAK,gBAAgB,UAAU,OAAO,eAAc,CAAC,CAAC,KAAK,QAAQ,aAAa,GAAE,KAAK,OAAO,MAAM,kBAAgB,GAAG,KAAK,QAAQ,eAAa,KAAK,QAAQ,aAAa,IAAG,KAAK,OAAO,MAAM,QAAM,GAAG,KAAK,QAAQ,WAAW,MAAK,KAAK,YAAUJ,GAAE,KAAK,KAAK,QAAQ,GAAE,KAAK,QAAQ,cAAc,UAAQC,IAAE,GAAEA,IAAED,EAAE,kBAAiBC,KAAI;AAAC,cAAMC,IAAE,OAAO,OAAO,OAAO,OAAO,IAAG,KAAK,OAAO,IAAUH,IAAE,KAAK,QAAQ,mBAAvB,QAAgDA,MAAT,SAAW,SAAOA,EAAEE,CAAC,CAAC;AAAE,aAAK,cAAc,CAACD,EAAE,eAAeC,CAAC,CAAC,GAAEC,GAAEK,GAAEN,CAAC;AAAA,MAAC;AAAA,WAAK;AAAC,cAAMF,IAAE,CAACC,EAAE,eAAe,CAAC,CAAC;AAAE,QAAAA,EAAE,mBAAiB,KAAGD,EAAE,KAAKC,EAAE,eAAe,CAAC,CAAC,GAAE,KAAK,cAAcD,GAAE,KAAK,SAAQQ,GAAE,CAAC;AAAA,MAAC;AAAC,cAAQ,QAAO,EAAG,KAAM,MAAI,KAAK,KAAK,UAAU,CAAC;AAAA,IAAE;EAAG;AAAA,EAAC,WAAU;AAAC,QAAG,KAAK,oBAAoB,QAAS,CAAAR,MAAGA,GAAG,GAAG,KAAK,sBAAoB,CAAA,GAAG,CAAC,KAAK,UAAU;AAAO,UAAK,EAAC,aAAY,EAAC,IAAE,KAAK,iBAAgB,EAAC,OAAM,EAAC,IAAE,KAAK,gBAAgB,sBAAqB;AAAG,QAAG,KAAK,OAAO,KAAK,SAAS,GAAE,KAAK,gBAAc,MAAI,KAAK,gBAAgB,aAAY;AAAC,YAAK,EAAC,OAAMA,EAAC,IAAE,KAAK,gBAAgB;AAAwB,UAAIE,IAAEF,IAAE;AAAE,MAAAE,KAAG,GAAEA,IAAEA,IAAE,IAAE,KAAK,MAAMA,CAAC,IAAE,KAAK,KAAKA,CAAC,GAAEA,KAAG,GAAE,KAAK,gBAAgB,cAAYA;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,KAAK,GAAE;AAAC,SAAK,QAAQ,cAAY,GAAE,KAAK,SAAQ;AAAA,EAAE;AAAA,EAAC,eAAe,GAAE,IAAE,IAAG;AAAC,UAAK,EAAC,YAAW,GAAE,aAAY,GAAE,aAAY,EAAC,IAAE,KAAK,iBAAgBG,IAAE,IAAE,GAAEG,IAAE,GAAEC,IAAE,IAAE,GAAEH,IAAE,IAAE;AAAE,QAAG,KAAK;AAAuB,MAAAD,IAAE,KAAEI,IAAE,KAAK,gBAAgB,cAAY,KAAEJ,IAAE,KAAEG,MAAI,KAAK,gBAAgB,cAAY;AAAA,SAAO;AAAC,OAACH,IAAEG,KAAGH,IAAEI,OAAK,KAAK,gBAAgB,aAAWJ,KAAG,KAAK,QAAQ,aAAWC,IAAE;AAAI,YAAMN,IAAEK,IAAE,IAAEC;AAAE,WAAG,KAAK,QAAQ,cAAYN,IAAE,MAAI,KAAK,gBAAgB,cAAY,KAAK,IAAIA,GAAE,EAAE;AAAA,IAAE;AAAC;AAAC,YAAMA,IAAE,KAAK,gBAAgB,YAAWC,IAAED,IAAE,GAAEE,KAAGF,IAAE,KAAG;AAAE,WAAK,KAAK,UAASC,GAAEC,GAAEF,GAAEA,IAAE,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,eAAe,GAAE,GAAE;AAAC,QAAG,MAAM,CAAC,EAAE;AAAO,UAAM,IAAE,MAAI;AAAE,SAAK,cAAc,MAAM,WAAS,WAAW,CAAC,6BAA6B,CAAC,WAAU,KAAK,gBAAgB,MAAM,QAAM,GAAG,CAAC,KAAI,KAAK,OAAO,MAAM,OAAK,GAAG,CAAC,KAAI,KAAK,OAAO,MAAM,YAAU,KAAK,QAAQ,cAAY,eAAe,IAAE,KAAK,QAAQ,WAAW,QAAM,IAAG,KAAK,gBAAc,KAAK,QAAQ,cAAY,KAAK,eAAe,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,YAAYC,GAAEC,GAAEC,GAAE;AAAC,WAAOH,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,YAAMA,IAAE,KAAK,cAAc,iBAAiB,QAAQ;AAAE,UAAG,CAACA,EAAE,OAAO,OAAM,IAAI,MAAM,kBAAkB;AAAE,UAAeG,MAAZ,WAAc;AAAC,cAAMA,IAAE,MAAM,KAAKH,CAAC,EAAE,IAAK,CAAAA,MAAGA,EAAE,UAAUC,GAAEC,CAAC,CAAC;AAAG,eAAO,QAAQ,QAAQC,CAAC;AAAA,MAAC;AAAC,aAAO,QAAQ,IAAI,MAAM,KAAKH,CAAC,EAAE,IAAK,CAAAA,MAAG,IAAI,QAAS,CAACG,GAAEC,MAAI;AAAC,QAAAJ,EAAE,OAAQ,CAAAA,MAAG;AAAC,UAAAA,IAAEG,EAAEH,CAAC,IAAEI,EAAE,IAAI,MAAM,wBAAwB,CAAC;AAAA,QAAC,GAAGH,GAAEC,CAAC;AAAA,MAAC,CAAC,CAAE,CAAE;AAAA,IAAC,CAAC;AAAA,EAAE;AAAC;AAACI,EAAE,mBAAiB,KAAIA,EAAE,YAAU;AAAG,MAAMI,WAAUT,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,cAAY,MAAI;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,SAAK,cAAY,KAAK,GAAG,QAAQ,MAAI;AAAC,4BAAuB,MAAI;AAAC,aAAK,KAAK,MAAM;AAAA,MAAC,CAAC;AAAA,IAAE,CAAC,GAAG,KAAK,KAAK,MAAM;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,SAAK,YAAW;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,YAAW;AAAA,EAAE;AAAC;AAAC,MAAMU,WAAUV,EAAC;AAAA,EAAC,YAAY,IAAE,IAAI,gBAAa;AAAC,UAAK,GAAG,KAAK,aAAW,MAAK,KAAK,gBAAc,GAAE,KAAK,iBAAe,GAAE,KAAK,SAAO,IAAG,KAAK,gBAAc,GAAE,KAAK,YAAU,QAAO,KAAK,SAAO,MAAK,KAAK,aAAW,IAAG,KAAK,SAAO,IAAG,KAAK,cAAY,MAAK,KAAK,UAAQ,IAAG,KAAK,WAAS,IAAG,KAAK,mBAAiB,KAAK,IAAG,KAAK,sBAAoB,KAAK,IAAG,KAAK,eAAa,GAAE,KAAK,WAAS,KAAK,aAAa,cAAa,KAAK,SAAS,QAAQ,KAAK,aAAa,WAAW;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,WAAOD,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,IAAI,MAAK;AAAC,WAAO,KAAK;AAAA,EAAU;AAAA,EAAC,IAAI,IAAI,GAAE;AAAC,QAAG,KAAK,aAAW,GAAE,KAAK,YAAU,QAAO,CAAC,EAAE,QAAO,KAAK,SAAO,MAAK,KAAK,KAAK,KAAK,SAAS;AAAE,UAAM,CAAC,EAAE,KAAM,OAAG;AAAC,UAAG,EAAE,UAAQ,IAAI,OAAM,IAAI,MAAM,mBAAmB,CAAC,KAAK,EAAE,MAAM,KAAK,EAAE,UAAU,GAAG;AAAE,aAAO,EAAE,YAAW;AAAA,IAAE,CAAC,EAAG,KAAM,OAAG,KAAK,eAAa,IAAE,OAAK,KAAK,aAAa,gBAAgB,CAAC,GAAI,KAAM,OAAG;AAAC,WAAK,eAAa,MAAI,KAAK,SAAO,GAAE,KAAK,KAAK,gBAAgB,GAAE,KAAK,KAAK,SAAS,GAAE,KAAK,YAAU,KAAK,KAAI;AAAA,IAAG,CAAC;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,QAAI;AAAE,QAAG,CAAC,KAAK,OAAO;AAAO,SAAK,SAAO,KAAW,IAAE,KAAK,gBAAf,QAAqC,MAAT,UAAY,EAAE,WAAU,GAAG,KAAK,aAAW,KAAK,aAAa,mBAAkB,GAAG,KAAK,WAAS,KAAK,WAAW,SAAO,KAAK,SAAQ,KAAK,WAAW,aAAa,QAAM,KAAK,eAAc,KAAK,WAAW,QAAQ,KAAK,QAAQ;AAAE,QAAI,IAAE,KAAK,iBAAe,KAAK;AAAc,KAAC,KAAG,KAAK,YAAU,IAAE,OAAK,IAAE,GAAE,KAAK,iBAAe,IAAG,KAAK,WAAW,MAAM,KAAK,aAAa,aAAY,CAAC,GAAE,KAAK,gBAAc,KAAK,aAAa,aAAY,KAAK,WAAW,UAAQ,MAAI;AAAC,WAAK,eAAa,KAAK,aAAW,KAAK,MAAK,GAAG,KAAK,KAAK,OAAO;AAAA,IAAE;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,QAAI;AAAE,SAAK,SAAO,KAAW,IAAE,KAAK,gBAAf,QAAqC,MAAT,UAAY,EAAE,QAAO,KAAK,kBAAgB,KAAK,aAAa,cAAY,KAAK;AAAA,EAAa;AAAA,EAAC,OAAM;AAAC,WAAOA,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,WAAK,WAAS,KAAK,MAAK,GAAG,KAAK,KAAK,MAAM;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,SAAK,WAAS,KAAK,UAAS,KAAK,KAAK,OAAO;AAAA,EAAE;AAAA,EAAC,OAAO,GAAE;AAAC,UAAM,IAAE,IAAE,KAAK,aAAY,IAAE,KAAK;AAAW,IAAS,GAAE,KAAK,KAAK,aAAa,cAAY,CAAC,GAAW,GAAE,iBAAiB,SAAS,MAAI;AAAC,YAAI,KAAK,eAAa,KAAK,aAAW,MAAK,KAAK;IAAQ,GAAG,EAAC,MAAK,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,UAAUC,GAAE;AAAC,WAAOD,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,aAAO,KAAK,aAAa,UAAUC,CAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,IAAI,eAAc;AAAC,WAAO,KAAK;AAAA,EAAa;AAAA,EAAC,IAAI,aAAa,GAAE;AAAC,SAAK,gBAAc,GAAE,KAAK,eAAa,KAAK,WAAW,aAAa,QAAM;AAAA,EAAE;AAAA,EAAC,IAAI,cAAa;AAAC,YAAO,KAAK,SAAO,KAAK,iBAAe,KAAK,kBAAgB,KAAK,aAAa,cAAY,KAAK,kBAAgB,KAAK;AAAA,EAAa;AAAA,EAAC,IAAI,YAAY,GAAE;AAAC,UAAM,IAAE,CAAC,KAAK;AAAO,SAAG,KAAK,OAAM,GAAG,KAAK,iBAAe,IAAE,KAAK,eAAc,KAAG,KAAK,MAAK,GAAG,KAAK,KAAK,SAAS,GAAE,KAAK,KAAK,YAAY;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,QAAI,GAAE;AAAE,YAAe,IAAE,KAAK,eAAf,QAAoC,MAAT,SAAW,MAAW,IAAE,KAAK,YAAf,QAAiC,MAAT,SAAW,SAAO,EAAE,aAAW;AAAA,EAAC;AAAA,EAAC,IAAI,SAAS,GAAE;AAAC,SAAK,YAAU;AAAA,EAAC;AAAA,EAAC,IAAI,SAAQ;AAAC,WAAO,KAAK,SAAS,KAAK;AAAA,EAAK;AAAA,EAAC,IAAI,OAAO,GAAE;AAAC,SAAK,SAAS,KAAK,QAAM,GAAE,KAAK,KAAK,cAAc;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK;AAAA,EAAM;AAAA,EAAC,IAAI,MAAM,GAAE;AAAC,SAAK,WAAS,MAAI,KAAK,SAAO,GAAE,KAAK,SAAO,KAAK,SAAS,eAAa,KAAK,SAAS,QAAQ,KAAK,aAAa,WAAW;AAAA,EAAE;AAAA,EAAC,YAAY,GAAE;AAAC,WAAM,mBAAmB,KAAK,CAAC;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,iBAAgB;AAAC,UAAM,IAAE,CAAA;AAAG,QAAG,CAAC,KAAK,OAAO,QAAO;AAAE,UAAM,IAAE,KAAK,OAAO;AAAiB,aAAQ,IAAE,GAAE,IAAE,GAAE,IAAI,GAAE,KAAK,KAAK,OAAO,eAAe,CAAC,CAAC;AAAE,WAAO;AAAA,EAAC;AAAA,EAAC,gBAAgB,GAAE;AAAC,YAAO,GAAC;AAAA,MAAE,KAAI;AAAM,aAAK,MAAI;AAAG;AAAA,MAAM,KAAI;AAAe,aAAK,eAAa;AAAE;AAAA,MAAM,KAAI;AAAc,aAAK,cAAY;AAAE;AAAA,MAAM,KAAI;AAAW,aAAK,WAAS;AAAE;AAAA,MAAM,KAAI;AAAS,aAAK,SAAO;AAAE;AAAA,MAAM,KAAI;AAAQ,aAAK,QAAM;AAAA,IAAE;AAAA,EAAC;AAAC;AAAC,MAAMW,KAAE,EAAC,WAAU,QAAO,eAAc,QAAO,aAAY,GAAE,aAAY,GAAE,YAAW,IAAG,UAAS,IAAG,YAAW,IAAG,YAAW,IAAG,YAAW,IAAG,YAAW,IAAG;AAAE,MAAMC,UAAUJ,GAAC;AAAA,EAAC,OAAO,OAAO,GAAE;AAAC,WAAO,IAAII,EAAE,CAAC;AAAA,EAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAM,IAAE,EAAE,UAAqB,EAAE,YAAf,aAAuB,IAAIF,OAAE;AAAQ,UAAM,EAAC,OAAM,GAAE,eAAc,EAAE,eAAc,UAAS,EAAE,UAAS,cAAa,EAAE,UAAS,CAAC,GAAE,KAAK,UAAQ,CAAA,GAAG,KAAK,cAAY,MAAK,KAAK,iBAAe,MAAK,KAAK,gBAAc,CAAA,GAAG,KAAK,qBAAmB,CAAA,GAAG,KAAK,kBAAgB,MAAK,KAAK,UAAQ,OAAO,OAAO,CAAA,GAAGC,IAAE,CAAC,GAAE,KAAK,QAAM,IAAIF;AAAE,UAAM,IAAE,IAAE,SAAO,KAAK,gBAAe;AAAG,SAAK,WAAS,IAAIJ,EAAE,KAAK,SAAQ,CAAC,GAAE,KAAK,iBAAgB,GAAG,KAAK,mBAAkB,GAAG,KAAK,gBAAe,GAAG,KAAK,YAAW;AAAG,UAAM,IAAE,KAAK,QAAQ,OAAK,KAAK,OAAM,KAAI;AAAG,YAAQ,QAAO,EAAG,KAAM,MAAI;AAAC,WAAK,KAAK,MAAM;AAAE,YAAK,EAAC,OAAMN,GAAE,UAASC,EAAC,IAAE,KAAK;AAAQ,OAAC,KAAGD,KAAGC,MAAI,KAAK,KAAK,GAAED,GAAEC,CAAC,EAAE,MAAO,MAAI,IAAI;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,eAAe,IAAE,KAAK,kBAAiB;AAAC,WAAO,KAAK,SAAS,eAAe,IAAE,KAAK,YAAW,GAAG,KAAK,UAAS,CAAE,GAAE;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,SAAK,cAAc,KAAK,KAAK,MAAM,GAAG,QAAQ,MAAI;AAAC,UAAG,CAAC,KAAK,aAAY;AAAC,cAAM,IAAE,KAAK,eAAc;AAAG,aAAK,KAAK,cAAa,CAAC,GAAE,KAAK,KAAK,gBAAe,CAAC,GAAQ,KAAK,kBAAX,QAA2B,KAAK,UAAS,KAAI,KAAG,KAAK,kBAAgB,KAAK;MAAO;AAAA,IAAC,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,mBAAkB;AAAC,SAAK,UAAS,MAAK,KAAK,KAAK,MAAM,GAAE,KAAK,MAAM,MAAK,IAAI,KAAK,mBAAmB,KAAK,KAAK,aAAa,cAAc,MAAI;AAAC,YAAM,IAAE,KAAK,eAAc;AAAG,WAAK,KAAK,cAAa,CAAC;AAAA,IAAC,IAAI,KAAK,aAAa,QAAQ,MAAI;AAAC,WAAK,KAAK,MAAM,GAAE,KAAK,MAAM,MAAK;AAAA,IAAE,IAAI,KAAK,aAAa,SAAS,MAAI;AAAC,WAAK,KAAK,OAAO,GAAE,KAAK,MAAM,KAAI,GAAG,KAAK,iBAAe;AAAA,IAAI,IAAI,KAAK,aAAa,WAAW,MAAI;AAAC,WAAK,MAAM,QAAO,KAAK,iBAAe;AAAA,IAAI,CAAC,GAAG,KAAK,aAAa,SAAS,MAAI;AAAC,WAAK,KAAK,cAAa,KAAK,YAAW,CAAE,GAAE,KAAK,KAAK,QAAQ,GAAE,KAAK,iBAAe;AAAA,IAAI,CAAC,GAAG,KAAK,aAAa,WAAW,MAAI;AAAC,WAAK,KAAK,WAAU,KAAK,eAAc,CAAE;AAAA,IAAC,CAAC,GAAG,KAAK,aAAa,SAAS,MAAI;AAAC,UAAI;AAAE,WAAK,KAAK,UAAgB,IAAE,KAAK,gBAAe,EAAG,WAAjC,QAAkD,MAAT,SAAW,IAAE,IAAI,MAAM,aAAa,CAAC,GAAE,KAAK,iBAAe;AAAA,IAAI,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,SAAK,cAAc,KAAK,KAAK,SAAS,GAAG,SAAS,CAAC,GAAE,MAAI;AAAC,WAAK,QAAQ,aAAW,KAAK,OAAO,CAAC,GAAE,KAAK,KAAK,eAAc,IAAE,KAAK,YAAW,CAAE,GAAE,KAAK,KAAK,SAAQ,GAAE,CAAC;AAAA,IAAE,CAAC,GAAG,KAAK,SAAS,GAAG,YAAY,CAAC,GAAE,MAAI;AAAC,WAAK,KAAK,YAAW,GAAE,CAAC;AAAA,IAAC,IAAI,KAAK,SAAS,GAAG,UAAU,CAAC,GAAE,GAAE,GAAE,MAAI;AAAC,YAAM,IAAE,KAAK,YAAW;AAAG,WAAK,KAAK,UAAS,IAAE,GAAE,IAAE,GAAE,GAAE,CAAC;AAAA,IAAC,CAAC,GAAG,KAAK,SAAS,GAAG,UAAU,MAAI;AAAC,WAAK,KAAK,QAAQ;AAAA,IAAC,CAAC,GAAG,KAAK,SAAS,GAAG,YAAY,MAAI;AAAC,WAAK,KAAK,gBAAgB;AAAA,IAAC,CAAC,GAAG,KAAK,SAAS,GAAG,aAAa,OAAG;AAAC,WAAK,KAAK,aAAY,CAAC;AAAA,IAAC,CAAC,GAAG,KAAK,SAAS,GAAG,WAAW,OAAG;AAAC,WAAK,KAAK,WAAU,CAAC;AAAA,IAAC,CAAC,CAAE;AAAE;AAAC,UAAI;AAAE,WAAK,cAAc,KAAK,KAAK,SAAS,GAAG,QAAQ,OAAG;AAAC,YAAG,CAAC,KAAK,QAAQ,SAAS;AAAO,YAAI;AAAE,aAAK,SAAS,eAAe,CAAC,GAAE,aAAa,CAAC,GAAE,KAAK,UAAS,IAAG,IAAE,IAAO,KAAK,QAAQ,eAAlB,KAA6B,IAAE,MAAc,OAAO,KAAK,QAAQ,cAA9B,YAAmD,KAAK,QAAQ,eAAtB,WAAmC,IAAE,KAAK,QAAQ,WAAW,eAAc,IAAE,WAAY,MAAI;AAAC,eAAK,OAAO,CAAC;AAAA,QAAC,GAAG,CAAC,GAAE,KAAK,KAAK,eAAc,IAAE,KAAK,YAAW,CAAE,GAAE,KAAK,KAAK,QAAO,CAAC;AAAA,MAAC,CAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,QAAI;AAAE,IAAC,GAAQ,IAAE,KAAK,QAAQ,aAAvB,QAA0C,MAAT,WAAkB,EAAE,UAAS,KAAK,QAAQ,QAAQ,QAAS,CAAAD,MAAG;AAAC,WAAK,eAAeA,CAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,0BAAyB;AAAC,SAAK,mBAAmB,QAAS,OAAG,EAAC,CAAE,GAAG,KAAK,qBAAmB,CAAA;AAAA,EAAE;AAAA,EAAC,WAAW,GAAE;AAAC,SAAK,UAAQ,OAAO,OAAO,CAAA,GAAG,KAAK,SAAQ,CAAC,GAAE,EAAE,YAAU,CAAC,EAAE,UAAQ,KAAK,cAAYE,EAAE,aAAa,KAAK,YAAW,GAAG,EAAE,QAAQ,IAAG,EAAE,SAAO,EAAE,aAAW,KAAK,cAAYA,EAAE,aAAa,EAAE,OAAM,EAAE,QAAQ,IAAG,KAAK,SAAS,WAAW,KAAK,OAAO,GAAE,EAAE,aAAW,KAAK,gBAAgB,EAAE,SAAS,GAAQ,EAAE,iBAAR,SAAwB,KAAK,gBAAe,EAAG,WAAS,EAAE;AAAA,EAAc;AAAA,EAAC,eAAe,GAAE;AAAC,QAAG,KAAK,QAAQ,SAAS,CAAC,EAAE,QAAO;AAAE,MAAE,MAAM,IAAI,GAAE,KAAK,QAAQ,KAAK,CAAC;AAAE,UAAM,IAAE,EAAE,KAAK,WAAW,MAAI;AAAC,WAAK,UAAQ,KAAK,QAAQ,OAAQ,CAAAD,MAAGA,MAAI,IAAI,KAAK,gBAAc,KAAK,cAAc,OAAQ,CAAAD,MAAGA,MAAI,CAAC;AAAA,IAAE;AAAI,WAAO,KAAK,cAAc,KAAK,CAAC,GAAE;AAAA,EAAC;AAAA,EAAC,iBAAiB,GAAE;AAAC,SAAK,UAAQ,KAAK,QAAQ,OAAQ,OAAG,MAAI,CAAC,GAAG,EAAE,QAAO;AAAA,EAAE;AAAA,EAAC,aAAY;AAAC,WAAO,KAAK,SAAS;EAAY;AAAA,EAAC,WAAU;AAAC,WAAO,KAAK,SAAS,SAAQ;AAAA,EAAE;AAAA,EAAC,YAAW;AAAC,WAAO,KAAK,SAAS,UAAS;AAAA,EAAE;AAAA,EAAC,UAAU,GAAE;AAAC,WAAO,KAAK,SAAS,UAAU,CAAC;AAAA,EAAC;AAAA,EAAC,cAAc,GAAE;AAAC,UAAM,IAAE,IAAE,KAAK,YAAW;AAAG,SAAK,SAAS,oBAAoB,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAkB;AAAC,WAAO,KAAK;AAAA,EAAO;AAAA,EAAC,UAAUC,GAAEE,GAAEC,GAAEC,GAAE;AAAC,WAAOL,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAIA;AAAE,UAAG,KAAK,KAAK,QAAOC,CAAC,GAAE,CAAC,KAAK,QAAQ,SAAO,KAAK,UAAS,KAAI,KAAK,MAAK,GAAG,KAAK,cAAY,MAAK,KAAK,iBAAe,MAAK,CAACE,KAAG,CAACC,GAAE;AAAC,cAAMF,IAAE,KAAK,QAAQ,eAAa,CAAA;AAAG,eAAO,mBAAiB,CAACA,EAAE,WAAS,KAAK,kBAAgB,IAAI,mBAAgBA,EAAE,UAAeF,IAAE,KAAK,qBAAf,QAA0CA,MAAT,SAAW,SAAOA,EAAE;AAAQ,cAAMI,IAAE,CAAAJ,MAAG,KAAK,KAAK,WAAUA,CAAC;AAAE,QAAAG,IAAE,MAAMK,GAAE,UAAUP,GAAEG,GAAEF,CAAC;AAAE,cAAMG,IAAE,KAAK,QAAQ;AAAa,QAAAA,MAAIF,IAAE,IAAI,KAAK,CAACA,CAAC,GAAE,EAAC,MAAKE,EAAC,CAAC;AAAA,MAAE;AAAC,WAAK,OAAOJ,GAAEE,CAAC;AAAE,YAAMM,IAAE,MAAM,IAAI,QAAS,CAAAT,MAAG;AAAC,cAAMC,IAAEI,KAAG,KAAK;AAAc,QAAAJ,IAAED,EAAEC,CAAC,IAAE,KAAK,mBAAmB,KAAK,KAAK,aAAa,kBAAkB,MAAID,EAAE,KAAK,YAAW,CAAE,GAAG,EAAC,MAAK,GAAE,CAAC,CAAC;AAAA,MAAC,CAAC;AAAG,UAAG,CAACC,KAAG,CAACE,GAAE;AAAC,cAAMH,IAAE,KAAK,gBAAe;AAAG,QAAAA,aAAaW,OAAIX,EAAE,WAASS;AAAA,MAAE;AAAC,UAAGL,EAAE,MAAK,cAAYF,EAAE,aAAaE,GAAEK,KAAG,CAAC;AAAA,eAAUN,GAAE;AAAC,cAAMH,IAAE,MAAMG,EAAE,YAAW;AAAG,aAAK,cAAY,MAAMD,EAAE,OAAOF,GAAE,KAAK,QAAQ,UAAU;AAAA,MAAC;AAAC,WAAK,gBAAc,KAAK,KAAK,UAAS,KAAK,YAAW,CAAE,GAAE,KAAK,SAAS,OAAO,KAAK,WAAW,IAAG,KAAK,KAAK,SAAQ,KAAK,YAAW,CAAE;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,KAAKC,GAAEC,GAAEC,GAAE;AAAC,WAAOH,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAG;AAAC,eAAO,MAAM,KAAK,UAAUC,GAAE,QAAOC,GAAEC,CAAC;AAAA,MAAC,SAAOH,GAAE;AAAC,cAAM,KAAK,KAAK,SAAQA,CAAC,GAAEA;AAAA,MAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,SAASC,GAAEC,GAAEC,GAAE;AAAC,WAAOH,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAG;AAAC,eAAO,MAAM,KAAK,UAAU,IAAGC,GAAEC,GAAEC,CAAC;AAAA,MAAC,SAAOH,GAAE;AAAC,cAAM,KAAK,KAAK,SAAQA,CAAC,GAAEA;AAAA,MAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,KAAK,GAAE;AAAC,QAAG,CAAC,KAAK,YAAY,OAAM,IAAI,MAAM,iBAAiB;AAAE,SAAK,SAAS,KAAK,CAAC,GAAE,KAAK,KAAK,QAAO,CAAC;AAAA,EAAC;AAAA,EAAC,iBAAgB;AAAC,WAAO,KAAK;AAAA,EAAW;AAAA,EAAC,YAAY,EAAC,UAAS,IAAE,GAAE,WAAU,IAAE,KAAI,WAAU,IAAE,IAAG,IAAE,CAAA,GAAG;AAAC,QAAG,CAAC,KAAK,YAAY,OAAM,IAAI,MAAM,oCAAoC;AAAE,UAAM,IAAE,KAAK,IAAI,GAAE,KAAK,YAAY,gBAAgB,GAAE,IAAE,CAAA;AAAG,aAAQA,IAAE,GAAEA,IAAE,GAAEA,KAAI;AAAC,YAAMG,IAAE,KAAK,YAAY,eAAeH,CAAC,GAAEK,IAAE,CAAA,GAAGG,IAAEL,EAAE,SAAO;AAAE,eAAQH,IAAE,GAAEA,IAAE,GAAEA,KAAI;AAAC,cAAMC,IAAEE,EAAE,MAAM,KAAK,MAAMH,IAAEQ,CAAC,GAAE,KAAK,MAAMR,IAAE,KAAGQ,CAAC,CAAC;AAAE,YAAIJ,IAAE;AAAE,iBAAQJ,IAAE,GAAEA,IAAEC,EAAE,QAAOD,KAAI;AAAC,gBAAME,IAAED,EAAED,CAAC;AAAE,eAAK,IAAIE,CAAC,IAAE,KAAK,IAAIE,CAAC,MAAIA,IAAEF;AAAA,QAAE;AAAC,QAAAG,EAAE,KAAK,KAAK,MAAMD,IAAE,CAAC,IAAE,CAAC;AAAA,MAAC;AAAC,QAAE,KAAKC,CAAC;AAAA,IAAC;AAAC,WAAO;AAAA,EAAC;AAAA,EAAC,cAAa;AAAC,QAAI,IAAE,MAAM,iBAAe;AAAE,WAAW,MAAJ,KAAO,MAAI,SAAK,CAAC,KAAK,gBAAc,IAAE,KAAK,YAAY,WAAU;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAE;AAAC,SAAK,QAAQ,WAAS;AAAA,EAAC;AAAA,EAAC,QAAQ,GAAE;AAAC,SAAK,iBAAe,MAAK,MAAM,QAAQ,CAAC,GAAE,KAAK,eAAe,CAAC,GAAE,KAAK,KAAK,cAAa,CAAC;AAAA,EAAC;AAAA,EAAC,OAAO,GAAE;AAAC,UAAM,IAAE,KAAK,gBAAc;AAAE,SAAK,QAAQ,CAAC;AAAA,EAAC;AAAA,EAAC,KAAKJ,GAAEC,GAAE;AAAC,UAAMC,IAAE,OAAO,OAAO,MAAK,EAAC,MAAK,EAAC,KAAI,MAAI,MAAM,KAAI,EAAC,CAAC;AAAE,WAAOH,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,MAAMC,KAAN,QAAS,KAAK,QAAQA,CAAC;AAAE,YAAMD,IAAE,MAAMG,EAAE,KAAK,KAAK,IAAI;AAAE,aAAaD,KAAN,SAAU,KAAK,iBAAiBS,KAAE,KAAK,MAAM,OAAOT,CAAC,IAAE,KAAK,iBAAeA,IAAGF;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,YAAW;AAAC,WAAOA,EAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,aAAO,KAAK,UAAS,IAAG,KAAK,MAAK,IAAG,KAAK,KAAI;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,OAAM;AAAC,SAAK,MAAK,GAAG,KAAK,QAAQ,CAAC;AAAA,EAAC;AAAA,EAAC,KAAK,GAAE;AAAC,SAAK,QAAQ,KAAK,eAAc,IAAG,CAAC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,SAAK,KAAK,IAAG,CAAC,CAAC,CAAC,CAAC,GAAE,IAAI;AAAA,EAAC;AAAA,EAAC,gBAAgB,GAAE;AAAC,SAAK,wBAAuB,GAAG,MAAM,gBAAgB,CAAC,GAAE,KAAK,iBAAgB;AAAA,EAAE;AAAA,EAAC,cAAa;AAAC,WAAOA,EAAE,MAAK,WAAU,QAAQ,WAAU,IAAE,aAAY,IAAE,GAAE,IAAE,WAAU;AAAC,aAAO,KAAK,SAAS,YAAY,GAAE,GAAE,CAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,QAAI;AAAE,SAAK,KAAK,SAAS,IAAU,IAAE,KAAK,qBAAf,QAA0C,MAAT,UAAY,EAAE,SAAQ,KAAK,QAAQ,QAAS,CAAAA,MAAGA,EAAE,QAAO,CAAE,GAAG,KAAK,cAAc,QAAS,CAAAA,MAAGA,EAAC,CAAE,GAAG,KAAK,wBAAuB,GAAG,KAAK,MAAM,QAAO,GAAG,KAAK,SAAS,QAAO,GAAG,MAAM,QAAO;AAAA,EAAE;AAAC;AAACa,EAAE,aAAW,cAAcZ,EAAC;AAAA,EAAC,YAAYD,GAAE;AAAC,UAAK,GAAG,KAAK,gBAAc,CAAA,GAAG,KAAK,cAAY,IAAG,KAAK,UAAQA;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAA,EAAC;AAAA,EAAC,MAAMA,GAAE;AAAC,SAAK,gBAAc,KAAK,gBAAc,IAAG,KAAK,cAAY,KAAI,KAAK,aAAWA,GAAE,KAAK,OAAM;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,KAAK,SAAS,GAAE,KAAK,cAAc,QAAS,CAAAA,MAAGA,EAAC,IAAK,KAAK,gBAAc,CAAA,GAAG,KAAK,cAAY,IAAG,KAAK,aAAW;AAAA,EAAM;AAAC,GAAEa,EAAE,MAAIR;ACAxh7B,SAASL,GAAEA,GAAEE,GAAE,GAAEC,GAAE;AAAC,SAAO,KAAI,MAAI,IAAE,UAAW,SAASK,GAAEH,GAAE;AAAC,aAASD,EAAEJ,GAAE;AAAC,UAAG;AAAC,UAAEG,EAAE,KAAKH,CAAC,CAAC;AAAA,MAAC,SAAOA,GAAE;AAAC,QAAAK,EAAEL,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,aAAS,EAAEA,GAAE;AAAC,UAAG;AAAC,UAAEG,EAAE,MAAMH,CAAC,CAAC;AAAA,MAAC,SAAOA,GAAE;AAAC,QAAAK,EAAEL,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,aAAS,EAAEA,GAAE;AAAC,UAAIE;AAAE,MAAAF,EAAE,OAAKQ,EAAER,EAAE,KAAK,KAAGE,IAAEF,EAAE,OAAME,aAAa,IAAEA,IAAE,IAAI,EAAG,SAASF,GAAE;AAAC,QAAAA,EAAEE,CAAC;AAAA,MAAC,CAAC,GAAI,KAAKE,GAAE,CAAC;AAAA,IAAC;AAAC,OAAGD,IAAEA,EAAE,MAAMH,GAAK,CAAA,CAAE,GAAG,KAAI,CAAE;AAAA,EAAC,CAAC;AAAE;AAAqD,MAAME,GAAC;AAAA,EAAC,cAAa;AAAC,SAAK,YAAU,CAAA;AAAA,EAAE;AAAA,EAAC,GAAG,GAAEA,GAAED,GAAE;AAAC,QAAG,KAAK,UAAU,CAAC,MAAI,KAAK,UAAU,CAAC,IAAE,oBAAI,QAAK,KAAK,UAAU,CAAC,EAAE,IAAIC,CAAC,GAAiBD,GAAE,MAAK;AAAC,YAAMA,IAAE,MAAI;AAAC,aAAK,GAAG,GAAEA,CAAC,GAAE,KAAK,GAAG,GAAEC,CAAC;AAAA,MAAC;AAAE,aAAO,KAAK,GAAG,GAAED,CAAC,GAAEA;AAAA,IAAC;AAAC,WAAM,MAAI,KAAK,GAAG,GAAEC,CAAC;AAAA,EAAC;AAAA,EAAC,GAAG,GAAEA,GAAE;AAAC,QAAID;AAAE,KAAQA,IAAE,KAAK,UAAU,CAAC,OAA1B,QAAuCA,MAAT,UAAYA,EAAE,OAAOC,CAAC;AAAA,EAAC;AAAA,EAAC,KAAK,GAAEA,GAAE;AAAC,WAAO,KAAK,GAAG,GAAEA,GAAE,EAAC,MAAK,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,SAAK,YAAU,CAAA;AAAA,EAAE;AAAA,EAAC,KAAK,MAAKA,GAAE;AAAC,SAAK,UAAU,CAAC,KAAG,KAAK,UAAU,CAAC,EAAE,QAAS,CAAAF,MAAGA,EAAE,GAAGE,CAAC,CAAC;AAAA,EAAE;AAAC;AAAC,MAAMD,WAAUC,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAK,GAAG,KAAK,gBAAc,CAAA,GAAG,KAAK,cAAY,IAAG,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAA,EAAC;AAAA,EAAC,MAAM,GAAE;AAAC,SAAK,gBAAc,KAAK,gBAAc,IAAG,KAAK,cAAY,KAAI,KAAK,aAAW,GAAE,KAAK,OAAM;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,KAAK,SAAS,GAAE,KAAK,cAAc,QAAS,OAAG,EAAC,CAAE,GAAG,KAAK,gBAAc,IAAG,KAAK,cAAY,IAAG,KAAK,aAAW;AAAA,EAAM;AAAC;AAAC,MAAMC,WAAUD,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,cAAY,MAAI;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,QAAO;AAAC,SAAK,cAAY,KAAK,GAAG,QAAQ,MAAI;AAAC,4BAAuB,MAAI;AAAC,aAAK,KAAK,MAAM;AAAA,MAAC,CAAC;AAAA,IAAE,CAAC,GAAG,KAAK,KAAK,MAAM;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,SAAK,YAAW;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,YAAW;AAAA,EAAE;AAAC;AAAC,MAAMM,KAAE,CAAC,cAAa,aAAY,cAAa,aAAY,WAAW;AAAE,MAAMH,UAAUJ,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,QAAIC,GAAED,GAAEO,GAAEH,GAAED,GAAE;AAAE,UAAM,OAAO,OAAO,OAAO,OAAO,CAAA,GAAG,CAAC,GAAE,EAAC,qBAA2BF,IAAE,EAAE,wBAAZ,QAA0CA,MAAT,SAAWA,IAAE,OAAM,oBAA0BD,IAAE,EAAE,uBAAZ,QAAyCA,MAAT,UAAYA,GAAE,0BAAgCO,IAAE,EAAE,6BAAZ,QAA+CA,MAAT,SAAWA,IAAE,GAAE,qBAA2BH,IAAE,EAAE,wBAAZ,QAA0CA,MAAT,UAAYA,GAAE,sBAA4BD,IAAE,EAAE,yBAAZ,QAA2CA,MAAT,UAAYA,GAAE,yBAA+B,IAAE,EAAE,4BAAZ,QAA8C,MAAT,SAAW,IAAE,OAAM,CAAC,CAAC,GAAE,KAAK,SAAO,MAAK,KAAK,gBAAc,MAAK,KAAK,aAAW,MAAK,KAAK,mBAAiB,IAAG,KAAK,gBAAc,GAAE,KAAK,eAAa,GAAE,KAAK,WAAS,GAAE,KAAK,QAAM,IAAID,MAAE,KAAK,cAAc,KAAK,KAAK,MAAM,GAAG,QAAQ,MAAI;AAAC,YAAMH,IAAE,YAAY,IAAG,IAAG,KAAK;AAAc,WAAK,WAAS,KAAK,SAAQ,IAAG,KAAK,WAAS,KAAK,eAAaA,GAAE,KAAK,KAAK,mBAAkB,KAAK,QAAQ;AAAA,IAAC,CAAC,CAAE;AAAA,EAAC;AAAA,EAAC,OAAO,OAAO,GAAE;AAAC,WAAO,IAAIK,EAAE,KAAG,CAAA,CAAE;AAAA,EAAC;AAAA,EAAC,gBAAgB,GAAE;AAAC,QAAIH;AAAE,UAAMD,IAAE,IAAI,gBAAa,IAAEA,EAAE,wBAAwB,CAAC,GAAEO,IAAEP,EAAE,eAAc;AAAG,MAAE,QAAQO,CAAC,GAAE,KAAK,QAAQ,uBAAqBA,EAAE,UAAQ;AAAI,UAAMH,IAAEG,EAAE,mBAAkBJ,IAAE,IAAI,aAAaC,CAAC;AAAE,QAAII,IAAE;AAAE,SAAK,gBAAqBP,IAAE,KAAK,qBAAf,QAA0CA,MAAT,WAAa,KAAK,kBAAgB,OAAO,OAAO,CAAA,GAAG,KAAK,WAAW,OAAO,IAAG,KAAK,WAAW,QAAQ,WAAS,IAAG,KAAK,QAAQ,sBAAoB,KAAK,WAAW,QAAQ,cAAY;AAAI,UAAMS,IAAE,YAAa,MAAI;AAAC,UAAIX,GAAEE,GAAEC,GAAEQ;AAAE,UAAG,CAAC,KAAK,kBAAiB;AAAC,YAAGH,EAAE,uBAAuBJ,CAAC,GAAE,KAAK,QAAQ,mBAAkB;AAAC,gBAAMJ,IAAE,KAAK,OAAO,KAAK,QAAQ,2BAAyB,KAAGC,EAAE,UAAU,GAAEC,IAAE,KAAK,IAAIF,GAAE,KAAK,aAAW,KAAK,WAAW,SAAOK,IAAEA,CAAC,GAAEF,IAAE,IAAI,aAAaH,CAAC;AAAE,cAAG,KAAK,YAAW;AAAC,kBAAMC,IAAE,KAAK,IAAI,GAAED,IAAE,KAAK,WAAW,MAAM;AAAE,YAAAG,EAAE,IAAI,KAAK,WAAW,MAAM,CAACD,IAAEG,CAAC,GAAEJ,CAAC;AAAA,UAAC;AAAC,UAAAE,EAAE,IAAIC,GAAEJ,IAAEK,CAAC,GAAE,KAAK,aAAWF;AAAA,QAAC,WAAS,KAAK,QAAQ,oBAAmB;AAAC,cAAG,CAAC,KAAK,YAAW;AAAC,kBAAMF,IAAE,KAAK,QAAQ,6BAA2B,KAAK,MAAM,MAAI,KAAK,QAAQ,0BAA0B,MAAWC,KAAUF,IAAE,KAAK,gBAAf,QAAqCA,MAAT,SAAW,SAAOA,EAAE,SAAQ,OAAlE,QAAgFE,MAAT,SAAWA,IAAE,KAAG,OAAO;AAAiB,iBAAK,aAAW,IAAI,aAAaD,CAAC;AAAA,UAAC;AAAC,cAAIA,IAAE;AAAE,mBAAQD,IAAE,GAAEA,IAAEK,GAAEL,KAAI;AAAC,kBAAME,IAAE,KAAK,IAAIE,EAAEJ,CAAC,CAAC;AAAE,YAAAE,IAAED,MAAIA,IAAEC;AAAA,UAAE;AAAC,cAAGO,IAAE,IAAE,KAAK,WAAW,QAAO;AAAC,kBAAMT,IAAE,IAAI,aAAa,IAAE,KAAK,WAAW,MAAM;AAAE,YAAAA,EAAE,IAAI,KAAK,YAAW,CAAC,GAAE,KAAK,aAAWA;AAAA,UAAC;AAAC,eAAK,WAAWS,CAAC,IAAER,GAAEQ;AAAA,QAAG,MAAM,MAAK,aAAWL;AAAE,YAAG,KAAK,YAAW;AAAC,gBAAMJ,MAAWW,KAAUR,IAAE,KAAK,gBAAf,QAAqCA,MAAT,SAAW,SAAOA,EAAE,YAA1D,QAA4EQ,MAAT,SAAWA,IAAE,KAAG;AAAI,eAAK,WAAW,KAAK,IAAG,CAAC,KAAK,UAAU,GAAE,KAAK,QAAQ,oBAAkB,KAAK,QAAQ,0BAAwBX,CAAC,EAAE,KAAM,MAAI;AAAC,iBAAK,cAAY,KAAK,QAAQ,uBAAqB,KAAK,WAAW,QAAQ,KAAK,YAAW,IAAG,GAAG,GAAE,KAAK,WAAW,QAAQ,eAAa,KAAK,WAAW,WAAW,EAAC,aAAY,KAAK,WAAW,aAAW,KAAK,WAAW,YAAW,EAAE,CAAC;AAAA,UAAE,CAAC,EAAG,MAAO,CAAAA,MAAG;AAAC,oBAAQ,MAAM,6CAA4CA,CAAC;AAAA,UAAC,CAAC;AAAA,QAAE;AAAA,MAAC;AAAA,IAAC,GAAG,EAAE;AAAE,WAAM,EAAC,WAAU,MAAI;AAAC,oBAAcW,CAAC,GAAW,GAAE,WAAU,GAAYV,GAAE,MAAK;AAAA,IAAE,GAAE,OAAM,MAAI;AAAC,WAAK,mBAAiB,IAAG,cAAcU,CAAC,GAAE,KAAK,QAAO;AAAA,IAAE,EAAC;AAAA,EAAC;AAAA,EAAC,SAAST,GAAE;AAAC,WAAOF,GAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,UAAIA;AAAE,UAAG;AAAC,QAAAA,IAAE,MAAM,UAAU,aAAa,aAAa,EAAC,OAAYE,KAAN,QAASA,EAAC,CAAC;AAAA,MAAC,SAAOF,GAAE;AAAC,cAAM,IAAI,MAAM,qCAAmCA,EAAE,OAAO;AAAA,MAAC;AAAC,YAAK,EAAC,WAAUC,GAAE,OAAM,EAAC,IAAE,KAAK,gBAAgBD,CAAC;AAAE,aAAO,KAAK,cAAc,KAAK,KAAK,KAAK,WAAUC,CAAC,CAAC,GAAE,KAAK,cAAc,KAAK,KAAK,KAAK,cAAa,CAAC,CAAC,GAAE,KAAK,SAAOD,GAAEA;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,WAAS,KAAK,OAAO,UAAS,EAAG,QAAS,OAAG,EAAE,KAAI,CAAE,GAAG,KAAK,SAAO,MAAK,KAAK,gBAAc;AAAA,EAAK;AAAA,EAAC,eAAeE,GAAE;AAAC,WAAOF,GAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,YAAMA,IAAE,KAAK,WAAS,MAAM,KAAK,SAASE,CAAC;AAAG,WAAK,aAAW;AAAK,YAAMD,IAAE,KAAK,iBAAe,IAAI,cAAcD,GAAE,EAAC,UAAS,KAAK,QAAQ,YAAUQ,GAAE,KAAM,CAAAR,MAAG,cAAc,gBAAgBA,CAAC,CAAC,GAAG,oBAAmB,KAAK,QAAQ,mBAAkB,CAAC;AAAE,WAAK,gBAAcC,GAAE,KAAK,cAAa;AAAG,YAAM,IAAE,CAAA;AAAG,MAAAA,EAAE,kBAAgB,CAAAD,MAAG;AAAC,QAAAA,EAAE,KAAK,OAAK,KAAG,EAAE,KAAKA,EAAE,IAAI,GAAE,KAAK,KAAK,yBAAwBA,EAAE,IAAI;AAAA,MAAC;AAAE,YAAMK,IAAE,CAAAL,MAAG;AAAC,YAAIE;AAAE,cAAMM,IAAE,IAAI,KAAK,GAAE,EAAC,MAAKP,EAAE,SAAQ,CAAC;AAAE,aAAK,KAAKD,GAAEQ,CAAC,GAAE,KAAK,QAAQ,wBAAsB,KAAK,6BAA4B,IAAWN,IAAE,KAAK,gBAAf,QAAqCA,MAAT,UAAYA,EAAE,KAAK,IAAI,gBAAgBM,CAAC,CAAC;AAAA,MAAE;AAAE,MAAAP,EAAE,UAAQ,MAAII,EAAE,cAAc,GAAEJ,EAAE,SAAO,MAAII,EAAE,YAAY,GAAEJ,EAAE,MAAM,KAAK,QAAQ,sBAAsB,GAAE,KAAK,gBAAc,YAAY,IAAG,GAAG,KAAK,eAAa,GAAE,KAAK,WAAS,GAAE,KAAK,mBAAiB,IAAG,KAAK,MAAM,MAAK,GAAG,KAAK,KAAK,cAAc;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,cAAa;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,cAAa;AAAC,QAAI;AAAE,aAA6B,IAAE,KAAK,mBAAf,QAAwC,MAAT,SAAW,SAAO,EAAE,WAAlE;AAAA,EAAwE;AAAA,EAAC,WAAU;AAAC,QAAI;AAAE,aAA0B,IAAE,KAAK,mBAAf,QAAwC,MAAT,SAAW,SAAO,EAAE,WAA/D;AAAA,EAAqE;AAAA,EAAC,WAAU;AAAC,QAAI;AAAE,aAA4B,IAAE,KAAK,mBAAf,QAAwC,MAAT,SAAW,SAAO,EAAE,WAAjE;AAAA,EAAuE;AAAA,EAAC,gBAAe;AAAC,QAAI;AAAE,SAAK,SAAQ,OAAa,IAAE,KAAK,mBAAf,QAAwC,MAAT,UAAY,EAAE,KAAI,GAAG,KAAK,MAAM,KAAI;AAAA,EAAG;AAAA,EAAC,iBAAgB;AAAC,QAAI,GAAEC;AAAE,SAAK,YAAW,MAAK,KAAK,mBAAiB,KAAW,IAAE,KAAK,mBAAf,QAAwC,MAAT,UAAY,EAAE,YAAW,IAAWA,IAAE,KAAK,mBAAf,QAAwCA,MAAT,UAAYA,EAAE,MAAK,GAAG,KAAK,MAAM,KAAI,GAAG,KAAK,eAAa,KAAK;AAAA,EAAS;AAAA,EAAC,kBAAiB;AAAC,QAAI;AAAE,SAAK,SAAQ,MAAK,KAAK,mBAAiB,KAAW,IAAE,KAAK,mBAAf,QAAwC,MAAT,UAAY,EAAE,OAAM,GAAG,KAAK,MAAM,MAAK,GAAG,KAAK,gBAAc,YAAY,IAAG,GAAG,KAAK,KAAK,eAAe;AAAA,EAAE;AAAA,EAAC,OAAO,2BAA0B;AAAC,WAAOF,GAAE,MAAK,QAAO,QAAQ,aAAW;AAAC,aAAO,UAAU,aAAa,iBAAgB,EAAG,KAAM,OAAG,EAAE,OAAQ,CAAAA,MAAkBA,EAAE,SAAjB,YAAqB,CAAE;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,6BAA4B,GAAG,MAAM,QAAO,GAAG,KAAK,cAAa,GAAG,KAAK;EAAS;AAAA,EAAC,+BAA8B;AAAC,SAAK,cAAY,KAAK,oBAAkB,KAAK,WAAW,WAAW,KAAK,eAAe,GAAE,OAAO,KAAK;AAAA,EAAgB;AAAC;ACqB9iO,MAAMoB,KAAiBA,CACrBC,GACAC,MACiB;AACjB,QAAM;AAAA,IACJC,WAAW;AAAA,MACTC,yBAAAA,IAA0B;AAAA;AAAA,IAAA;AAAA,EAC5B,IACEC,EAAAA,WAAWC,EAAU;AAiBzB,SAfoBC,EAAAA,YAAY,MAAM;AACpC,QAAI,CAACN,EAAK;AAEV,UAAMO,IAAOC,GAA0B;AAAA,MACrCL,yBAAAA;AAAAA,MACAH,KAAAA;AAAAA,MACAC,UAAAA;AAAAA,IAAAA,CACD;AAEDM,IAAAA,EAAKE,MAAMC,UAAU,QACrBC,SAASC,KAAKC,YAAYN,CAAI,GAC9BA,EAAKO,MAAAA,GACLH,SAASC,KAAKG,YAAYR,CAAI;AAAA,EAChC,GAAG,CAACP,GAAKG,GAAyBF,CAAQ,CAAC;AAG7C,GChBMe,KAA+B,CAAK;AAAA,EACxCC,WAAAA;AAAAA,EACAC,IAAAA;AAAAA,EACAC,QAAAA;AAAAA,EACAC,KAAAA;AAAAA,EACAC,cAAAA;AAOF,MAA+B;AAC7BC,EAAAA,EAAAA,UAAU,MAAM;AACd,UAAMC,IAAgBN,EAAUO,gBAAgBN,GAAIE,CAAG;AACvD,IAAIK,EAAkBF,CAAa,KAAKG,EAAmBL,CAAY,KACrEJ,EAAUU,gBAAgBT,GAAIE,GAAKC,CAAY;AAAA,EAEnD,GAAG,CAACJ,GAAWC,GAAIE,GAAKC,CAAY,CAAC;AAErC,QAAM,CAACO,GAAOC,CAAgB,IAAIC,EAAAA,SAChCb,EAAUO,gBAAgBN,GAAIE,CAAG,KAAKC,CACxC,GAEMU,IAAWzB,cACf,CAAC0B,MAAa;AACZf,IAAAA,EAAUU,gBAAgBT,GAAIE,GAAKY,CAAK,GACxCH,EAAiBG,CAAK;AAAA,EACxB,GACA,CAACf,GAAWC,GAAIE,CAAG,CACrB,GAEMa,IAAUC,EAAAA,QAAQ,OAAO;AAAA,IAAEf,QAAQA,KAAU;AAAA,EAAA,IAAO,CAACA,CAAM,CAAC,GAC5DgB,IAAgB7B,EAAAA,YACpB,MAAMyB,EAASV,CAAY,GAC3B,CAACA,GAAcU,CAAQ,CACzB;AAEAK,SAAAA,GAAmB;AAAA,IACjBH,SAAAA;AAAAA,IACAhB,WAAAA;AAAAA,IACAkB,eAAAA;AAAAA,EAAAA,CACD,GAEM,CAACP,GAAOG,CAAQ;AACzB,GCtCaM,KAAc,OAAO;AAAA,EAChCC,OAAAA;AAAAA,EACAC,cAAAA;AAAAA,EACAtB,WAAAA;AAAAA,EACAuB,YAAAA;AAAAA,EACAC,YAAAA;AAOF,MAGM;AACJ,MAAIC,IAAwB,CAAA;AAE5B,MAAI;AACFA,IAAAA,IAAW,MAAMH,EAAaI,cAAcL,CAAK;AAAA,EACnD,SAAS1D,GAAG;AACV,WAAO;AAAA,MACLgE,mBAAmB,CAAA;AAAA,MACnBC,eAAeP,EAAMQ,IAAIC,CAAAA,OAAS;AAAA,QAAEA,MAAAA;AAAAA,QAAMC,OAAOC,GAAYrE,CAAC;AAAA,MAAA,EAAI;AAAA,IAAA;AAAA,EAEtE;AAEA,QAAMsE,IAAgBC,GAAIb,GAAOI,CAAQ,GAEnCE,IAAwC,CAAA,GACxCC,IAAgC,CAAA;AAEtC,eAAMO,QAAQC,IACZH,EAAcJ,IAAI,OAAO,CAACC,GAAMO,CAAO,MAAM;AAC3C,QAAI,CAACP,KAAQ,CAACO,KAAW,CAACA,EAAQC,aAAa,CAACD,EAAQE;AACtD,aAAO;AAAA,QAAET,MAAAA;AAAAA,QAAMO,SAAAA;AAAAA,QAASN,OAAO,IAAIS,MAAM,qBAAqB;AAAA,MAAA;AAGhE,QAAI;AACF,YAAMlB,EAAamB;AAAAA,QACjB;AAAA,UAAExC,IAAIoC,EAAQE;AAAAA,UAAQrC,QAAQqB,EAAWrB,UAAU;AAAA,QAAA;AAAA;AAAA,QACnDmC,EAAQC;AAAAA,QACRR;AAAAA,MAAAA,GAEFH,EAAkBe,KAAK;AAAA,QAAEL,SAAAA;AAAAA,QAASP,MAAAA;AAAAA,MAAAA,CAAM;AAAA,IAC1C,SAASnE,GAAG;AACV,YAAMoE,IAAQC,GAAYrE,CAAC;AAC3BiE,MAAAA,EAAcc,KAAK;AAAA,QAAEZ,MAAAA;AAAAA,QAAMC,OAAAA;AAAAA,MAAAA,CAAO;AAAA,IACpC;AAAA,EACF,CAAC,CACH,GAEA/B,EAAU2C,0BACRpB,GACA,IAAIqB,GAAuB;AAAA,IACzBC,kBAAkBlB,EAAkBE,IAClC,CAAC;AAAA,MAAEC,MAAAA;AAAAA,MAAMO,SAAAA;AAAAA,IAAAA,MACP,IAAIS,GAAsB;AAAA,MACxBP,QAAQF,EAAQE;AAAAA,MAChBd,UAAUY;AAAAA,MACVU,MAAMjB,EAAKiB;AAAAA,MACXC,MAAMlB,EAAKkB;AAAAA,IAAAA,CACZ,CACL;AAAA,EAAA,CACD,GACD;AAAA,IACEC,QAAQ;AAAA,EAAA,GAEVzB,CACF,GAEO;AAAA,IAAEG,mBAAAA;AAAAA,IAAmBC,eAAAA;AAAAA,EAAAA;AAC9B,GC5FasB,KAA+BC,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,IAAW,GAE1CC,KAA6BF,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EACxC,CAAC;AAAA,EAAEE,OAAAA;AAAAA,EAAOC,UAAAA;AAAS,OAAO;AAAA,EACxBC,QAAQF,EAAMG,MAAMC;AAAAA,EACpBC,OAAO;AAAA,EACPC,YAAYN,EAAMO,OAAOC;AAAAA,EACzBC,cAAcT,EAAMU,MAAMC;AAAAA,EAC1BC,cAAcZ,EAAMa,QAAQC;AAAAA,EAC5B3E,SAAS;AAAA,EACT4E,YAAY;AAAA,EACZC,UAAU;AAAA,EACVC,aAAajB,EAAMa,QAAQK;AAAAA,EAC3BC,cAAcnB,EAAMa,QAAQO;AAAAA,EAC5BC,QAAQrB,EAAMO,OAAOe,oBACjB,GAAGtB,EAAMG,MAAMoB,WAAW,UAAUvB,EAAMO,OAAOe,iBAAiB,KAClEE;AAAAA,EACJC,QAAQxB,IAAW,gBAAgB;AACrC,MACF,GAEayB,KAAyB7B,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAA;AAAA,EAAAL,MAAA;AAAA,EAAAkC,QAAA;AAAA,CAErC,GAEYC,KAAsB/B,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EACjC,CAAC;AAAA,EAAE+B,MAAAA;AAAK,OAAO;AAAA,EACb1F,SAAS0F,IAAO,UAAU;AAC5B,MACF,GAEaC,KAAyBjC,gBAAAA,UAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAGnC,CAAC;AAAA,EAAEE,OAAAA;AAAAA,EAAO+B,sBAAAA;AAAAA,EAAsB9B,UAAAA;AAAS,OAAO;AAAA,EACjD+B,QAAQhC,EAAMa,QAAQO;AAAAA,EACtBa,YAAYjC,EAAMkC,MAAMC;AAAAA,EACxBC,OAAOnC,IACHD,EAAMO,OAAO8B,cACbN,IACE/B,EAAMO,OAAO+B,WACbtC,EAAMO,OAAOgC;AAAAA,EACnBC,iBAAiBxC,EAAMO,OAAOC;AAAAA,EAC9BiC,UAAUzC,EAAM0C,UAAUtB;AAC5B,IAAE,EAAA,GAEWuB,KAA0B9C,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAA;AAAA,EAAAL,MAAA;AAAA,EAAAkC,QAAA;AAAA,CAItC,GAEYiB,KAAsB/C,gBAAAA,UAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAY,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EAC7DoC,OAAOpC,EAAMO,OAAO+B;AACtB,IAAE,EAAA,GAEWO,KAAgChD,gBAAAA,OAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAS,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EACpEoC,OAAOpC,EAAMO,OAAOvE;AAAAA,EACpB8G,gBAAgB9C,EAAM+C,gBAAgB,cAAc;AACtD,IAAE,EAAA,GAGWC,KAAgCnD,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAW,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EACtEE,QAAQF,EAAMG,MAAMC;AAAAA,EACpBjE,SAAS;AAAA,EACT8G,gBAAgB;AAAA,EAChBlC,YAAY;AACd,IAAE,EAAA,GAEWmC,KAA2BrD,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAW,CAAC;AAAA,EAAEE,OAAAA;AAAM,MAAM;AAChE,QAAMmD,IAAU;AAChB,SAAO;AAAA,IACLC,SAAS;AAAA,IACT/C,OAAO;AAAA,IACPH,QAAQiD;AAAAA,IACRE,gBAAgBF;AAAAA,IAChBG,iBAAiB,mBAAmBtD,EAAMO,OAAOgD,WAAW;AAAA,IAC5DC,kBAAkB;AAAA,EAAA;AAEtB,GAAC,EAAA,GAEYC,KAAqC5D,gBAAAA,UAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAY,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EAC5E,cAAc;AAAA,IACZoC,OAAOpC,EAAMO,OAAOmD;AAAAA,IACpBC,SAAS3D,EAAMa,QAAQ+C;AAAAA,EAAAA;AAAAA,EAEzB,sCAAsC;AAAA,IACpCxB,OAAOpC,EAAMO,OAAOsD;AAAAA,EAAAA;AAExB,IAAE,EAAA,GAEWC,KAAsCjE,gBAAAA,UAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EACjD,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EACd,cAAc;AAAA,IACZ2D,SAAS3D,EAAMa,QAAQ+C;AAAAA,IACvBxB,OAAOpC,EAAMO,OAAOgC;AAAAA,EAAAA;AAAAA,EAEtB,sCAAsC;AAAA,IACpCH,OAAOpC,EAAMO,OAAO+B;AAAAA,EAAAA;AAExB,MACF,GAEayB,KAAiClE,gBAAAA,UAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAY,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EACxE,cAAc;AAAA,IACZ2D,SAAS3D,EAAMa,QAAQ+C;AAAAA,IACvBxB,OAAOpC,EAAMO,OAAOgC;AAAAA,EAAAA;AAAAA,EAEtB,sCAAsC;AAAA,IACpCH,OAAOpC,EAAMO,OAAO+B;AAAAA,EAAAA;AAExB,IAAE,EAAA,GAEW0B,KAAiCnE,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAW,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EACvE7D,SAAS;AAAA,EACT8G,gBAAgB;AAAA,EAChBlC,YAAY;AAAA,EACZkD,UAAU;AAAA,EACVC,YAAY;AAAA,EACZP,SAAS3D,EAAMa,QAAQK;AAAAA,EACvBiD,KAAKnE,EAAMa,QAAQC;AAAAA,EACnBsD,aAAapE,EAAMa,QAAQC;AAC7B,IAAE,EAAA,GAEWuD,KAAwBxE,gBAAAA,SAAA;AAAA,EAAAC,QAAA;AAAA,CAAA,EAAW,CAAC;AAAA,EAAEE,OAAAA;AAAM,OAAO;AAAA,EAC9DsE,YAAYtE,EAAMa,QAAQO;AAC5B,IAAE,EAAA,GCpGImD,IAAgDA,CAAC;AAAA,EACrDC,SAAAA;AAAAA,EACAvE,UAAAA;AAAAA,EACAwE,WAAAA;AAAAA,EACAC,aAAAA;AACF,MACEC,gBAAAA,MAACC,MACC,MAAMC,GAAeC,iBACrB,SAAAN,GACA,UAAAvE,GACA,cAAYwE,GACZ,gBAAc,IACd,eAAY,4BAEZ,gCAACM,IAAA,EAAK,SAASL,GAAa,MAAK,MAAK,OAAM,UAAA,CAAS,EAAA,CACvD,GAoCWM,KAETA,CAAC;AAAA,EAAE/E,UAAAA;AAAAA,EAAUgF,eAAAA;AAAc,MAC7BN,gBAAAA,EAAAA,IAAClB,IAAA,EACC,UAAAkB,gBAAAA,EAAAA,IAACJ,GAAA,EACC,SAASU,GACT,UAAAhF,GACA,WAAU,kBACV,aAAa9F,GAAAA,CAAW,GAE5B,GAGW+K,KAETA,CAAC;AAAA,EAAEjF,UAAAA;AAAAA,EAAUkF,WAAAA;AAAAA,EAAWC,kBAAAA;AAAiB,MAEzCT,gBAAAA,EAAAA,IAACZ,MACEoB,UAAAA,IACCR,gBAAAA,EAAAA,IAACJ,KACC,SAASa,GACT,UAAAnF,GACA,WAAU,SACV,aAAajG,IAAM,IAGrB2K,gBAAAA,EAAAA,IAACJ,KACC,SAASa,GACT,UAAAnF,GACA,WAAU,QACV,aAAahG,GAAAA,CAAU,EAAA,CAG7B,GAISoL,KAETA,CAAC;AAAA,EAAEpF,UAAAA;AAAAA,EAAUqF,gBAAAA;AAAe,MAC9BX,gBAAAA,EAAAA,IAACb,IAAA,EACC,UAAAa,gBAAAA,EAAAA,IAACJ,GAAA,EACC,SAASe,GACT,UAAArF,GACA,WAAU,UACV,aAAazG,GAAAA,CAAI,GAErB,GAGW+L,KAA8DA,CAAC;AAAA,EAC1Ef,SAAAA;AACF,MACEG,gBAAAA,EAAAA,IAACZ,IAAA,EACC,UAAAY,gBAAAA,EAAAA,IAACJ,GAAA,EACC,UAAU,IACV,SAAAC,GACA,WAAU,SACV,aAAatK,GAAAA,CAAQ,GAEzB,GAGIsL,KAAiEA,CAAC;AAAA,EACtEvF,UAAAA;AAAAA,EACAwF,aAAAA;AAAAA,EACAN,WAAAA;AAAAA,EACAO,aAAAA;AAAAA,EACAC,SAAAA;AAAAA,EACAC,oBAAAA;AAAAA,EACAN,gBAAAA;AAAAA,EACAL,eAAAA;AAAAA,EACAG,kBAAAA;AAAAA,EACAS,SAAAA;AACF,MACMF,0BAEC3B,IAAA,EACC,UAAAW,gBAAAA,EAAAA,IAACY,IAAA,EAAsB,SAASM,GAAQ,GAC1C,IAIAH,IAEAf,gBAAAA,EAAAA,IAACX,IAAA,EACC,UAAAW,gBAAAA,EAAAA,IAACmB,IAAA,EACC,cAAW,aACX,MAAK,QACL,QAAO,KACP,SAAQ,IAAA,CAAG,GAEf,2BAKD9B,IAAA,EACEyB,UAAAA;AAAAA,EAAAA,IACCd,gBAAAA,EAAAA,IAACK,MACC,UAAA/E,GACA,eAAAgF,EAAA,CAA6B,IAG/BN,gBAAAA,EAAAA,IAACU,IAAA,EACC,UAAApF,GACA,gBAAAqF,EAAA,CAA+B;AAAA,EAGlCM,KACCjB,gBAAAA,EAAAA,IAACO,IAAA,EACC,UAAAjF,GACA,WAAAkF,GACA,kBAAAC,EAAA,CAAmC;AAAA,GAGzC,GAIJW,KAAeC,EAAAA,KAAKR,EAAuB,GChMrCS,KAAuBA,MAEzBtB,gBAAAA,EAAAA,IAAChC,IAAA,EACC,UAAAgC,gBAAAA,EAAAA,IAAC/B,IAAA,EAAmB,sDAEpB,GACF,GAIJsD,KAAeF,EAAAA,KAAKC,EAAoB,GCjB3BE,KAAmB,GACnBC,KAAY,GACZC,KAAU,GACVC,KAAa,GACbC,KAAe,GAEfC,IAAuB,SCH9BC,KAAMC,GAAAA,UAAU,mBAAmB;AAOzC,eAAeC,GAAiBC,GAA2C;AACzE,QAAMC,IAAe,IAAIC,OAAOC,aAAAA,GAC1BC,IAAc,MAAMJ,EAASI,YAAAA;AAEnC,MAAIC;AACJ,MAAI;AACFA,IAAAA,IAAc,MAAMJ,EAAaK,gBAAgBF,CAAW;AAAA,EAC9D,SAASvI,GAAO;AACdgI,IAAAA,GAAIhI,MAAMA,CAAK;AACf;AAAA,EACF;AAEA,QAAM0I,IAAgB,IAChBC,IAAYH,EAAYI,kBACxBC,IAAaL,EAAYK,YACzBC,IAASN,EAAYM,SAASH,IAAY,IAAID,GAC9CK,IAAS,IAAIC,YAAYF,CAAM,GAC/BG,IAAO,IAAIC,SAASH,CAAM,GAG1BI,IAAY;AAAA,IAChB,GAAG;AAAA,MAAEC,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA,IAC5B,GAAG;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO8J,IAAS;AAAA,IAAA;AAAA,IACrC,GAAG;AAAA,MAAEM,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA,IAC5B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA,IAC7B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA;AAAA,IAC7B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA;AAAA,IAC7B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO2J;AAAAA,IAAAA;AAAAA;AAAAA,IAC7B,IAAI;AAAA,MAAES,MAAM;AAAA,MAAUpK,OAAO6J;AAAAA,IAAAA;AAAAA;AAAAA,IAC7B,IAAI;AAAA,MAAEO,MAAM;AAAA,MAAUpK,OAAO6J,IAAaF,IAAY;AAAA,IAAA;AAAA;AAAA,IACtD,IAAI;AAAA,MAAES,MAAM;AAAA,MAAUpK,OAAO2J,IAAY;AAAA,IAAA;AAAA;AAAA,IACzC,IAAI;AAAA,MAAES,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA;AAAA,IAC7B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAO;AAAA,IAAA;AAAA,IAC7B,IAAI;AAAA,MAAEoK,MAAM;AAAA,MAAUpK,OAAOwJ,EAAYM,SAASH,IAAY;AAAA,IAAA;AAAA;AAAA,EAAE;AAIlEU,SAAOC,QAAQH,CAAS,EAAEI,QAAQ,CAAC,CAACC,GAAQ;AAAA,IAAEJ,MAAAA;AAAAA,IAAMpK,OAAAA;AAAAA,EAAAA,CAAO,MAAM;AAC/D,UAAMyK,IAAYC,SAASF,GAAQ,EAAE;AACrC,IAAIJ,MAAS,WACXO,GAAYV,GAAMQ,GAAWzK,CAAe,IACnCoK,MAAS,WAClBH,EAAKW,UAAUH,GAAWzK,GAAiB,EAAI,IACtCoK,MAAS,YAClBH,EAAKY,UAAUJ,GAAWzK,GAAiB,EAAI;AAAA,EAEnD,CAAC;AAGD,MAAIwK,IAASd;AACb,WAAS7M,IAAI,GAAGA,IAAI2M,EAAYM,QAAQjN;AACtC,aAASiO,IAAU,GAAGA,IAAUnB,GAAWmB,KAAW;AACpD,YAAMC,IAASC,KAAKC,IAClB,IACAD,KAAKE,IAAI,GAAG1B,EAAY2B,eAAeL,CAAO,EAAEjO,CAAC,CAAC,CACpD;AACAoN,MAAAA,EAAKmB,SAASZ,GAAQO,IAAS,OAAQ,EAAI,GAC3CP,KAAU;AAAA,IACZ;AAGF,QAAMa,IAAW,IAAIC,WAAWvB,CAAM;AACtC,SAAO,IAAIwB,KAAK,CAACF,CAAQ,GAAG;AAAA,IAAEjB,MAAM;AAAA,EAAA,CAAa;AACnD;AAQA,SAASO,GAAYV,GAAgBO,GAAgBgB,GAAsB;AACzE,WAAS3O,IAAI,GAAGA,IAAI2O,EAAO1B,QAAQjN;AACjCoN,IAAAA,EAAKwB,SAASjB,IAAS3N,GAAG2O,EAAOE,WAAW7O,CAAC,CAAC;AAElD;ACrFA,MAAM8O,KAAaA,CAACC,MAA2B;AAC7C,QAAMC,IAAUb,KAAKc,MAAMF,IAAS,GAAI,GAClCG,IAAUf,KAAKc,MAAMD,IAAU,EAAE,GACjCG,IAAQhB,KAAKc,MAAMC,IAAU,EAAE,GAC/BE,IAAmBJ,IAAU,IAC7BK,IAAmBH,IAAU,IAE7BI,IAAaF,EAAiBG,SAAAA,EAAWC,SAAS,GAAG,GAAG,GACxDC,IAAaJ,EAAiBE,SAAAA,EAAWC,SAAS,GAAG,GAAG,GACxDE,IAAeP,EAAMI,SAAAA,EAAWC,SAAS,GAAG,GAAG;AAErD,SAAON,IAAU,KACb,GAAGO,CAAU,IAAIH,CAAU,KAC3B,GAAGI,CAAY,IAAID,CAAU,IAAIH,CAAU;AACjD,GCJMK,KAAmBA,6BAEpBtH,IAAA,EACC,UAAA;AAAA,EAAAgC,gBAAAA,EAAAA,IAAC/B,MAAmB,UAAA,8CAAA,CAEpB;AAAA,EAAuB;AAAA,EACvB+B,gBAAAA,EAAAA,IAAC9B,MACC,MAAMqH,IACN,KAAI,uBACJ,QAAO,UAAQ,UAAA,6BAAA,CAGjB;AAAA,GACF,GAIJC,KAAenE,EAAAA,KAAKiE,EAAgB,GCpB9BG,KAAcA,MAEhBzF,gBAAAA,EAAAA,IAAC3B,IAAA,EACC,UAAA2B,gBAAAA,EAAAA,IAACzB,IAAA,CAAA,CAAwB,GAC3B,GAIJmH,KAAerE,EAAAA,KAAKoE,EAAW,GCkDzBE,KAA8BA,CAAC;AAAA,EACnC5M,SAAAA;AAAAA,EACAM,cAAAA;AAAAA,EACAtB,WAAAA;AAAAA,EACAwB,YAAAA;AAAAA,EACA+B,UAAAA;AACF,MAAoB;AAClB,QAAMD,IAAQuK,GAAAA,GACRC,IAAgBC,GAAYzK,CAAK,GACjC,CAAC0K,GAAYC,CAAa,IAAIpN,EAAAA,SAA4B,IAAI,GAC9DqN,IAAgBC,EAAAA,OAA8B,IAAI,GAClD,CAACC,GAAeC,CAAgB,IAAItO,GAExC;AAAA,IACAC,WAAAA;AAAAA,IACAC,IAAIe,EAAQf;AAAAA,IACZE,KAAK;AAAA,IACLC,cAAc;AAAA,EAAA,CACf,GACK,CAACkO,GAAcC,CAAe,IAAI1N,EAAAA,SAA8B,IAAI,GAGpE,CAAC2N,GAAuBC,CAAwB,IAAI5N,EAAAA,SAExD,CAAA,CAAE,GACE,CAAC6N,GAAqBC,CAAsB,IAAI9N,EAAAA,SAEpD,IAAI,GAEA,CAAC+N,GAAcC,CAAe,IAAI9O,GAEtC;AAAA,IACAC,WAAAA;AAAAA,IACAC,IAAIe,EAAQf;AAAAA,IACZE,KAAK;AAAA,IACLC,cAAc;AAAA,EAAA,CACf,GACK,GAAG0O,CAAW,IAAIjO,EAAAA,SAAS,CAAC,GAC5BkO,IAAgBA,MAAY;AAChCD,IAAAA,EAAYE,CAAAA,MAAQA,IAAO,CAAC;AAAA,EAC9B,GACM,CAACC,GAAcC,CAAe,IAAIrO,EAAAA,SAASiJ,CAAoB,GAE/D,CAACqF,GAAeC,CAAgB,IACpCrP,GAAqC;AAAA,IACnCC,WAAAA;AAAAA,IACAC,IAAIe,EAAQf;AAAAA,IACZC,QAAQc,EAAQd;AAAAA,IAChBC,KAAK;AAAA,IACLC,cAAc0J;AAAAA,EAAAA,CACf,GAEG,CAACuF,GAA0BC,CAA2B,IAC1DzO,EAAAA,SAAS,EAAK,GACV,CAAC0O,GAAqBC,EAAsB,IAAI3O,EAAAA,SAAS,EAAK,GAC9D,CAAC4O,IAA4BC,EAA6B,IAC9D7O,EAAAA,SAAS,EAAK,GACV,CAACmI,IAAa2G,EAAc,IAAI9O,EAAAA,SAAS,EAAK,GAC9C,CAACoI,GAAS2G,CAAU,IAAI/O,EAAAA,SAAS,EAAK,GAEtCgP,KAAW7O,EAAQf,IACnB6P,IAAe9O,EAAQd,QAEvB6P,KAAyB1Q,cAC7B,OAAO2Q,MAAe;AACpBL,IAAAA,GAAe,EAAI,GACflP,EAAmBqP,CAAY,KACjC9P,EAAUiQ,kDAAkCC,IAAI,CAACJ,CAAY,CAAC,CAAC;AAEjE,QAAIK;AAQJ,QANIH,EAAK7E,SAAS,cAChBgF,IAAUH,IAEVG,IAAU,MAAMC,GAAkBJ,CAAI,GAGpC,CAACG,GAAS;AACZP,MAAAA,EAAW,EAAI;AACf;AAAA,IACF;AAEA,UAAM7Q,IAAMsR,IAAIC,gBAAgBH,CAAO,GACjCI,MAAY,oBAAIC,KAAAA,GAAOC,YAAAA,EAAcC,MAAM,GAAG,EAAE,EAAEC,QAAQ,KAAK,GAAG,GAClE7O,KAAO,IAAI8O,KAAK,CAACT,CAAO,GAAG,GAAGI,EAAS,cAAc;AAAA,MACzDpF,MAAMgF,EAAQhF;AAAAA,IAAAA,CACf;AAED0D,IAAAA,EAAgB9P,CAAG,GAEdqC,GAAY;AAAA,MACfC,OAAO,CAACS,EAAI;AAAA,MACZR,cAAAA;AAAAA,MACAtB,WAAAA;AAAAA,MACAuB,YAAY;AAAA,QAAEtB,IAAI4P;AAAAA,QAAU3P,QAAQ4P;AAAAA,MAAAA;AAAAA,MACpCtO,YAAAA;AAAAA,IAAAA,CACD,EACEqP,KAAK,CAAC;AAAA,MAAElP,mBAAAA;AAAAA,MAAmBC,eAAAA;AAAAA,IAAAA,MAAoB;AAC9C,UAAIA,GAAciJ,SAAS,GAAG;AAC5B+E,QAAAA,EAAW,EAAI;AACf;AAAA,MACF;AACA,YAAMkB,IAASnP,GAAkB,CAAC;AAClC,MAAImP,KAAUA,EAAOzO,QAAQ0O,aAC3B1C,EAAiByC,EAAOzO,QAAQ0O,SAAS;AAAA,IAE7C,CAAC,EACAC,QAAQ,MAAM;AACb,MAAIvQ,EAAmBqP,CAAY,OACvBG,8BAA8B,oBAAIC,KAAK,GAEnDP,GAAe,EAAK;AAAA,IACtB,CAAC;AAAA,EACL,GACA,CACEd,GACAvN,GACAtB,GACA6P,IACAC,GACAtO,GACA6M,CAAgB,CAEpB,GAEM4C,IAAc5R,EAAAA,YAClB,CAAC;AAAA,IACC6R,qBAAAA;AAAAA,IACAC,YAAAA;AAAAA,EAAAA,MAII;AACJ,IAAI3Q,EAAkBwN,CAAU,KAAKxN,EAAkB4N,CAAa,MAGpES,EAAgB,IAAI,GACpBb,EAAWoD,MAAAA,GACPD,KAEF7P,EAAa6P,WAAW/C,CAAa,GAEvCC,EAAiB,IAAI,GACrBa,EAAgBpF,CAAoB,GACpCsF,EAAiBtF,CAAoB,GACjCoH,KACFlR,EAAU2C,0BACR3B,GACA,IACA;AAAA,MAAEiC,QAAQ;AAAA,IAAA,GACVzB,CACF,GAEF8N,EAA4B,EAAK,GAC7B7O,EAAmBmO,CAAY,KACjCyB,IAAIgB,gBAAgBzC,CAAY;AAAA,EAEpC,GACA,CACER,GACAQ,GACAtN,GACA0M,GACAhN,GACAhB,GACAwB,GACA4N,GACAP,GACAR,CAAgB,CAEpB;AAEAhO,EAAAA,EAAAA,UAAU,MAAM;AACd,QAAIG,EAAkBsP,CAAY,EAAG;AAErC,UAAMwB,IAAkB,IAAIC,GAAAA;AAC5BD,WAAAA,EAAgBE,wBAAwBxR,GAAW8P,GAAc,MAC/DmB,EAAY;AAAA,MAAEC,qBAAqB;AAAA,MAAMC,YAAY;AAAA,IAAA,CAAO,CAC9D,GAEO,MAAMG,EAAgBG,WAAAA;AAAAA,EAC/B,GAAG,CAAC3B,GAAcmB,GAAajR,CAAS,CAAC;AAEzC,QAAM0R,KAAuBrS,EAAAA,YAAY,MAAM;AAC7C,QAAI6O,EAAcyD,YAAY,KAAM;AAEpC,UAAMC,IAAKC,EAAWC,OAAO;AAAA,MAC3BC,WAAW7D,EAAcyD;AAAAA,MACzBK,WAAWpD,IACPqD,EAAM3O,EAAMO,OAAO8B,aAAarC,EAAMO,OAAOC,WAAW,IACxDR,EAAMO,OAAOmD;AAAAA,MACjBkL,eAAe5O,EAAMO,OAAO+B;AAAAA,MAC5BpC,QACE2O,GAAe7O,EAAMG,MAAMC,oBAAoB,IAC/C,IAAI+F;AAAAA,MACN2I,UAAU1I;AAAAA,MACV2I,QAAQ1I;AAAAA,MACR2I,WAAW1I;AAAAA,MACX2I,aAAa1I;AAAAA,MACb9K,KAAK6P,KAAgB9J;AAAAA,IAAAA,CACtB;AAED8M,IAAAA,EAAGY,GAAG,cAAcC,CAAAA,MAAQ;AAC1BvD,MAAAA,EAAgBxC,GAAW+F,IAAO,GAAI,CAAC;AAAA,IACzC,CAAC,GAEDb,EAAGY,GAAG,SAAS,MAAM;AACnBzD,MAAAA,EAAAA;AAAAA,IACF,CAAC;AAED,UAAM2D,IAAKd,EAAGe,eACZC,EAAad,OAAO;AAAA,MAClBe,mBAAmB;AAAA,MACnBC,qBAAqB;AAAA,IAAA,CACtB,CACH;AAEAJ,WAAAA,EAAGF,GAAG,cAAcxC,CAAAA,MAAQ;AAE1BD,MAAAA,GAAuBC,CAAI;AAAA,IAC7B,CAAC,GAED0C,EAAGF,GAAG,mBAAmBC,CAAAA,MAAQ;AAC/BrD,MAAAA,EAAiB1C,GAAW+F,CAAI,CAAC;AAAA,IACnC,CAAC,GAEDxE,EAAc2D,CAAE,GAChBrD,EAAgBmE,CAAE,GAEX,MAAM;AACX,MAAId,OAAOmB,QAAAA,GACPL,OAAOK,QAAAA;AAAAA,IACb;AAAA,EAMF,GAAG,CAAChD,EAAsB,CAAC;AAE3B1P,EAAAA,EAAAA,UAAU,MAAMqR,MAAwB,CAACA,EAAoB,CAAC,GAE9DrR,EAAAA,UAAU,MAAM;AACd,IAAK2S,GAAQlF,GAAexK,CAAK,KAC/B0K,GAAYiF,WAAW;AAAA,MACrBjB,WAAWpD,IACPqD,EAAM3O,EAAMO,OAAO8B,aAAarC,EAAMO,OAAOC,WAAW,IACxDR,EAAMO,OAAOmD;AAAAA,MACjBkL,eAAe5O,EAAMO,OAAO+B;AAAAA,IAAAA,CAC7B;AAAA,EAEL,GAAG,CAACtC,GAAOwK,GAAec,GAAcZ,CAAU,CAAC;AAEnD,QAAMtF,KAAmBrJ,EAAAA,YAAY,MAAM;AACzC,IAAI2O,MAEFA,EAAWkF,UAAAA,GAIX5D,EAA4B,EAAI,GAEhCP,EAAAA;AAAAA,EAEJ,GAAG,CAACf,CAAU,CAAC,GAETpF,KAAiBvJ,EAAAA,YAAY,YAAY;AAC7C,QAAI8T,IAAgBzE;AAsBpB,IApBKe,OAEH,MAAM2D,UAAUC,aACbC,aAAa;AAAA,MAAEC,OAAO;AAAA,IAAA,CAAM,EAC5B1C,KAAK,MACJ+B,EAAaY,yBAAAA,EAA2B3C,KAAK4C,CAAAA,MAAW;AAEtD,UADAhF,EAAyBgF,CAAO,GAC5BA,EAAQ5I,SAAS,GAAG;AACtB,cAAM;AAAA,UAAE6I,UAAAA;AAAAA,QAAAA,IAAaD,EAAQ,CAAC;AAC9B9E,QAAAA,EAAuB+E,CAAQ,GAC/BP,IAAgBO;AAAAA,MAClB;AAAA,IACF,CAAC,CACH,EACCC,MAAMC,CAAAA,MAAQ;AACbpE,MAAAA,GAAuB,EAAI;AAAA,IAC7B,CAAC,GACHE,GAA8B,EAAI,IAGhC,GAACpB,KAAgB,CAAC6E,KAAiB,CAACnF,OAIxCA,EAAWiF,WAAW;AAAA,MACpBjB,WAAW1O,EAAMO,OAAOmD;AAAAA,IAAAA,CACzB,GAEG4H,KACFqC,EAAY;AAAA,MAAEC,qBAAqB;AAAA,MAAOC,YAAY;AAAA,IAAA,CAAM,GAI9D7C,EAAa1F,eAAe;AAAA,MAAE8K,UAAUP;AAAAA,IAAAA,CAAe,EAAEtC,KAAK,MAAM;AAElE9B,MAAAA,EAAAA;AAAAA,IACF,CAAC;AAAA,EACH,GAAG,CACDL,GACAJ,GACAhL,GACA0K,GACAY,GACAqC,GACAxB,EAA0B,CAC3B,GAEKlH,KAAgBlJ,EAAAA,YAAY,MAAM;AACtC,IAAKiP,MAELA,EAAa/F,cAAAA,GAEbyF,GAAYiF,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASrBjB,WAAWC,EAAM3O,EAAMO,OAAO8B,aAAarC,EAAMO,OAAOC,WAAW;AAAA,IAAA,CACpE;AAAA,EACH,GAAG,CAACwK,GAAcN,GAAY1K,CAAK,CAAC,GAE9BuQ,KAAoB/U,GAAe8P,GAAc,eAAe,GAEhE7F,IAAc+K,EAAQxF,GAAcvF,YAAAA,GACpCN,KAAYqL,EAAQ9F,GAAYvF,UAAAA,GAEhCpD,KAAuB0D,KAAeN,IACtCsL,KAAkB,CAAChL,KAAe,CAAC6F,KAAgB,CAACW,GAEpDyE,KACJzE,KAAuBwE,MAAmB9K;AAE5C,SACEgL,gBAAAA,EAAAA,KAAC/Q,IAAA,EACC,WAAU,gBACV,eAAY,gBAEZ,UAAA;AAAA,IAAA+E,gBAAAA,EAAAA,IAACiM,IAAA,EACC,OAAOlT,EAAQmT,OACf,UAAA5Q,GACA,iBAAiB6Q,GACfpT,EAAQqT,iBAAiBtT,KAC3B,GAECC,UAAAA,EAAQsT,QACPrM,gBAAAA,EAAAA,IAACN,IAAA,EACC,UAAAM,gBAAAA,EAAAA,IAACsM,IAAA,EAAY,SAASvT,EAAQsT,MAAM,WAAWE,GAAUC,IAAAA,CAAI,EAAA,CAC/D,EAAA,CAEJ;AAAA,IACAR,gBAAAA,EAAAA,KAAC5Q,MAA2B,UAAAE,GAC1B,UAAA;AAAA,MAAA0Q,gBAAAA,OAACS,MACC,cAAc,IACd,uBAAuB,IACvB,QAAQrR,IAEPuL,UAAAA;AAAAA,QAAAA,KACC3G,gBAAAA,EAAAA,IAAC0M,MACC,OAAM,mBACN,MAAMC,IACN,SAAS,MAAMf,GAAAA,EAAkB,CAAE;AAAA,QAGtCzF,2BACEuG,IAAA,EACC,OAAM,mBACN,MAAME,IACN,SAAS,MACP5D,EAAY;AAAA,UAAEC,qBAAqB;AAAA,UAAMC,YAAY;AAAA,QAAA,CAAM,EAAA,CAC5D;AAAA,MAAA,GAGP;AAAA,MACAlJ,gBAAAA,EAAAA;AAAAA,QAACa;AAAAA,QAAA;AAAA,UACC,aAAAC;AAAA,UACA,WAAAN;AAAA,UACA,aAAAO;AAAA,UACA,SAAAC;AAAA,UACA,oBAAoB6K,EAAQlF;AAAAA,UAE5B,gBAAAhG;AAAA,UACA,eAAAL;AAAA,UACA,kBAAAG;AAAA,UACA,SAAS,MAAM;AACbuI,YAAAA,EAAY;AAAA,cAAEC,qBAAqB;AAAA,cAAOC,YAAY;AAAA,YAAA,CAAM,GAC5DvB,EAAW,EAAK;AAAA,UAClB;AAAA,UACA,UAAUrM,KAAYgM;AAAAA,QAAAA;AAAAA,MAAAA;AAAAA,6BAEvBvK,IAAA,EACEiE,UAAAA;AAAAA,QAAAA,2BAAYM,IAAA,EAAoB;AAAA,QAChCwK,4BAAoBrG,IAAA,EAAW;AAAA,QAC/B6B,2BAAwBhC,IAAA,EAAgB;AAAA,QACzCtF,gBAAAA,MAAC/C,MACC,eAAY,0BACZ,KAAKgJ,GACL,MAAM,CAAC8F,GAAAA,CAAyC;AAAA,MAAA,GAEpD;AAAA,MACA/L,gBAAAA,EAAAA,IAAC7C,MACC,sBAAAC,IACA,UAAA9B,GACA,eAAY,gCAEX8L,UAAAA,IAA2BJ,IAAeE,EAAAA,CAC7C;AAAA,IAAA,EAAA,CACF;AAAA,EAAA,GACF;AAEJ,GAEA2F,KAAexL,EAAAA,KAAKsE,EAAU;","x_google_ignoreList":[0,1,2,3,4,5,6]}