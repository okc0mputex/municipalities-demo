import{r as o,D as s}from"./index-C08LT-R7.js";import{u as M}from"./FormClearHelper-B_V_qF_E.js";function S({getStateFromWidgetMgr:i,getDefaultState:r,updateWidgetMgrState:m,element:t,widgetMgr:e,fragmentId:n,onFormCleared:l}){const[d,f]=o.useState(()=>i(e,t)??r(e,t)),[g,a]=o.useState({value:d,fromUi:!1});o.useEffect(()=>{s(g)||(a(null),f(g.value),m(t,e,g,n))},[g,m,t,e,n]);const u=o.useCallback(()=>{a({value:r(e,t),fromUi:!0}),l?.()},[a,t,r,e,l]);return M({widgetMgr:e,element:t,onFormCleared:u}),[d,a]}function F({getStateFromWidgetMgr:i,getDefaultStateFromProto:r,getCurrStateFromProto:m,updateWidgetMgrState:t,element:e,widgetMgr:n,fragmentId:l,onFormCleared:d}){const f=o.useCallback((u,c)=>r(c),[r]),[g,a]=S({getStateFromWidgetMgr:i,getDefaultState:f,updateWidgetMgrState:t,element:e,widgetMgr:n,fragmentId:l,onFormCleared:d});return o.useEffect(()=>{e.setValue&&(e.setValue=!1,a({value:m(e),fromUi:!1}))},[e,m,a]),[g,a]}export{F as a,S as u};
